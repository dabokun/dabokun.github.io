<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>お知らせ</title>
      <link href="/2999/12/31/99999999-notice/"/>
      <url>/2999/12/31/99999999-notice/</url>
      
        <content type="html"><![CDATA[<p>ここにはお知らせを掲載します．</p><ul><li>(2021年6月11日) Google AdSense による自動広告を追加しました．</li></ul><span id="more"></span><ul><li>(2019年10月7日) <a href="/work/">WORKページ</a>を更新しました．</li><li>(2019年5月16日) 過去のブログ記事を全て移行しました．</li><li>(2019年5月12日) 現在<a href="https://blogs.yahoo.co.jp/astr0dab0">yahooブログ</a>から記事を移行中です．日付の前後関係がおかしかったりしますのでご了承ください．</li></ul>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Display HDR な天体写真のススメ</title>
      <link href="/2025/06/06/00000077-hdr-astrophoto/"/>
      <url>/2025/06/06/00000077-hdr-astrophoto/</url>
      
        <content type="html"><![CDATA[<h3 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h3><p>こんにちは．だぼです．久々のブログ更新になります．<br>お気づきの方も多いと思いますが，ブログのデザインが変わりました．というか PC 変更に伴って環境を再現できず壊れました．<br>ここ数日は仕事後に復帰作業をやっていました．まだできていないページとかもありますが少しずつ直していきますのでご容赦ください．</p><p>さて突然ですが，皆さんはモニターの HDR 表示を使いこなしていますか？<br>今回は，（おそらく）誰もやっていない天体写真×HDR をやってみたという記事になります．<br>一点，ここでの HDR とは，カメラでよくある露出ブラケットを利用した階調の回復，いわゆる撮影時の HDR とは全く異なることにご注意ください．</p><span id="more"></span><h3 id="Display-HDR-とは？"><a href="#Display-HDR-とは？" class="headerlink" title="Display HDR とは？"></a>Display HDR とは？</h3><p>そもそも，Display HDR とはなんでしょうか．これは主にモニターのダイナミックレンジが広がってきたことに伴う技術で，簡単に言えばせっかく高い bit 数（10bit 以上）で記録されている画像なのだから 8bit のダイナミックレンジではなくもっと広い階調で表示しよう，そのために黒はより暗く，白はより明るく表示しよう，みたいな考え方になります．</p><p>天体写真では暗い背景に淡い星雲，明るい星といった幅広い階調を鑑賞するわけですので，表示のダイナミックレンジは広ければ広いほど良いはずです．なのに，少なくとも自分の身の回りでは誰もやっていない，なぜでしょうか？<br>それは，Display HDR にはいくつかのハードルがあるからです．①十分な性能をもった PC 用ディスプレイは高額であること，そして②汎用さの不足です．<br>①については，十分な性能をもった一般人でも買えるくらいのモニターで，例えば最大輝度 1600cd，DisplayHDR1400 の規格をもった ASUS ProArt PA32UCG では40万円以上します．いくらギリギリ買えるかもとはいえ，HDR 鑑賞のためだけにそこまで使えるかは微妙でしょう．②については，例えば大手カメラメーカーの提供する HDR 画像は主に HEIF というフォーマットを採用しています．HEIF は 10bit のデータを高い圧縮率でもつことができる一方，展開に重たい計算が必要になったり，そもそもメーカーが提供するソフトウェアでなければ開くことすらできなかったりと，汎用性の面で問題を抱えていることも事実です．</p><p>しかし，これらの問題はそれぞれ解消されつつあります．まず，①のディスプレイの問題については，スマートフォンを使うことで比較的安価に楽しむことができるようになってきました．最近のスマホで撮影した写真は勝手に HDR になります．これは HDR GainMap 情報（後述）が付加されているためであることが多いです．YouTube（動画ですが） や Instagram, Threads などの Meta 社の提供する SNS は画像の HDR 表示に対応しています．最近 Instagram をやっていて，やけに明るい画像を目にしませんか？あれは HDR 対応のスマホで撮影されたデータだからです．<br>②の汎用性についても，HDR GainMap のサポートによって解消されつつあります．GainMap とは画像のどの部分を（HDR の領域まで）どれだけ明るくするかという情報で，通常の JPEG データに追加する形で付加されています．詳しくは<a href="https://blog.adobe.com/jp/publish/2023/10/26/cc-photo-hdr-explained">Adobe の解説ページ</a>もご覧ください（<a href="https://blog.adobe.com/en/publish/2023/10/10/hdr-explained">元の英語版</a>ではちゃんと HDR 画像が使われていますのでこちらでも OK）．この方法を利用する最大の利点は JPEG という汎用的な画像フォーマットでも簡単に利用できることです．また，GainMap は相対的な情報ですので，ディスプレイのポテンシャルに応じて適切に輝度を上げた画像を表示できることも大きなメリットです．</p><h3 id="早速天体写真でやってみる"><a href="#早速天体写真でやってみる" class="headerlink" title="早速天体写真でやってみる"></a>早速天体写真でやってみる</h3><p>では，早速やってみた結果です．前回の記事の M42 オリオン大星雲でやってみました．<br>まずは HDR GainMap なし．<br><img src="/images/00000076-2024-11-fukushima/M42.jpg" alt="M42 オリオン大星雲 2024ver."></p><div style="text-align: center;">HDR GainMap なし<br></div><p>次に HDR GainMap あり．</p><p><img src="/images/00000077-hdr-astrophoto/M42_hdr.jpg" alt="HDR なし"></p><div style="text-align: center;">HDR GainMap なし<br></div><p>いかがでしょう．何度も申し上げますが，HDR に対応していないモニターでは両方同じ画像に見えるはずですが，HDR 対応モニターでは明らかに GainMap ありの方が星が明るくなり，コントラストが強く見えるはずです．HDR で見ていると SDR では物足りなくなっては来ませんか？笑<br>また少し色も派手になっていると思いますが，これは僕の GainMap の作り方の問題だと思います．<br>最近では Lightroom や Photoshop で HDR 編集ができるようにもなってきました．上記の M42 の画像は完全に独自の方法で作っているのですが，今後 HDR モニターを考慮した天体写真の編集方法もいろいろ出てくるかもしれませんね．<br>HDR について知っている人の中でも眩しくてウザいという意見は多いですが、こと天体写真の鑑賞という文脈にあっては、淡く微妙な濃淡の鑑賞のためにダイナミックレンジの広いモニターの性能を活かすことはごく自然な流れなのではないかと思っています．<br>HDR 天体写真，流行ってほしい．</p><p>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 天体写真 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024年11月 福島県某所，育樹祭記念広場</title>
      <link href="/2024/12/03/00000076-2024-11-fukushima/"/>
      <url>/2024/12/03/00000076-2024-11-fukushima/</url>
      
        <content type="html"><![CDATA[<h3 id="2024年11月"><a href="#2024年11月" class="headerlink" title="2024年11月"></a>2024年11月</h3><p>今年の11月は遠征に2回行きました．やはり秋は天体観測の季節ですね．</p><span id="more"></span><h3 id="福島県某所"><a href="#福島県某所" class="headerlink" title="福島県某所"></a>福島県某所</h3><p>11月3日文化の日には福島県の某所へ．天文仲間の知り合いの方が集まるということで出かけました．<br>文化の日は「晴れの特異日」とよばれ，統計的に晴れることが多く，今年も例に漏れず北関東に出れば晴れを狙えそうな予報でした．<br>途中千葉で友人を拾いがてら聖地巡礼…．壊れていた車で行く久々の遠征です．</p><p><img src="/images/00000076-2024-11-fukushima/001.jpg" alt="千葉に向かう途中，湾岸を途中で降り聖地へ"></p><p>温泉に入って（タオル忘れて無事湯冷めした）到着すると，よく晴れてはいますが前日に雨が降ったこともあり透明度は若干低く眠い感じ．<br>最近また冷却 CMOS の機嫌が悪く安定するまでに時間がかかる．はやく 2600MC Air を導入して一息つきたいものです．<br>夜半過ぎになると，コントラストも改善し暗い空が広がりました．ガイドが乱れない程度の微風も拭き夜露結露に悩まされることもなかったです．<br>カメラも安定運用に入り2天体を合計8時間ほど露光，このツンデレめ．</p><p><img src="/images/00000076-2024-11-fukushima/M31.jpg" alt="M31 アンドロメダ銀河 2024ver."></p><div style="text-align: center;">「M31 アンドロメダ銀河」<br>2024年11月3日19時15分～23時50分 福島県某所<br>ε-160ED<br>QHY268PH C<br>Gain 26/Offset 50/-20℃/180s*80<br>Optolong UV/IR Cut 2''<br>Total: 240min<br>タカハシ EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Photoshop CC / PixInsight<br><a href="https://www.astrobin.com/b645gr/">AstroBin</a><br><br></div><p><img src="/images/00000076-2024-11-fukushima/M42.jpg" alt="M42 オリオン大星雲 2024ver."></p><div style="text-align: center;">「M42 オリオン大星雲」<br>2024年11月4日0時6分～4時46分 福島県某所<br>ε-160ED<br>QHY268PH C<br>Gain 26/Offset 50/-20℃/180s*91<br>Optolong UV/IR Cut 2''<br>Total: 273min<br>タカハシ EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Photoshop CC / PixInsight<br><a href="https://www.astrobin.com/qbqlvr/">AstroBin</a><br><br></div><p>εにも慣れてきたところで有名天体を狙ってみました．空も暗いですしね．<br>僕は違いますが，望遠鏡を毎年買っているような人は毎年のように有名天体を撮る，天体写真好きあるあるだと思います．<br>M31 はやはり画像処理が難しい．多くの人が個性をもってうまく処理をしているので，自分のなかでの理想がなかなか確立しづらい気がします．逆に M42 は自分のなかに理想があって，それに近づけることで今まで自分が撮ってきたなかでは一番いい出来に仕上がったのではないかと思います．<br>シーイングのおかげで望遠鏡のポテンシャルもこれまでで最大限に発揮された気がします．ここまで来ると，AI系の星像補正ツールは最早無用の長物だと感じます．<br>TOA 等を使っていてもそうなんですが，「これいいな」と自分の中で合格点が出ている画像に対して BXT 等をかけても「あんまり変わらないな」という感想にしかならないんですよね．</p><h3 id="育樹祭記念広場"><a href="#育樹祭記念広場" class="headerlink" title="育樹祭記念広場"></a>育樹祭記念広場</h3><p>そして月末は育樹祭へ．上述の福島の時よりもオンラインの天文仲間を含め，多くの人が集いました．<br>会社の同期にも声をかけて連れていきました．</p><p><img src="/images/00000076-2024-11-fukushima/002.jpg" alt="これは小作のほうとう，これも久々に食しました"></p><p>かくいう自分は到着後に MGEN3 関係の一式を忘れたことに気づき途方に暮れていたのですが，<a href="https://x.com/ShonanAstroPhot">けーたろさん</a>，<a href="https://x.com/hotan666">Wada さん</a>，<a href="https://x.com/magicalflute77">Aramis さん</a>が機材を提供してくれるなどとおっしゃってきます．本当は己の機材で完結させたかったが，貴重な新月期の快晴です．背に腹は代えられまい．<br>最初はガイド機材だけ借りようと思ったのですが，EM-200 にいくガイドケーブルがありません．なら AM3 と三脚と ASIAIR も余ってるから貸すよと．なんでだよ．<br>そしたら今度は ASIAIR が僕の QHY カメラを認識しません．そりゃそうだ．なら ASI6200MC Pro も余ってるから貸すよと．なんでだよ．</p><blockquote><p>あ…ありのまま 今　起こった事を話すぜ！</p></blockquote><blockquote><p>おれは MGEN3 を忘れて絶望していたらいつのまにか野生の AM3 と TC40 と ASIAIR とガイド鏡ガイドカメラと ASI6200MC Pro が生えていた…</p></blockquote><blockquote><p>な…　何を言ってるのか　わからねーと思うがおれも何をされたのかわからなかった…　頭がどうにかなりそうだった…</p></blockquote><p><img src="/images/00000076-2024-11-fukushima/003.jpg" alt="どうしてこうなった…"></p><p>そんなこんなで，気がついたらフルスペック機材が完成し望遠鏡以外は全部他人からの貸与機材という結果に…．普通に無風快晴なんですよ？どうしてこうなった…．<s>もう毎回 MGEN 忘れたほうがいいんじゃないか…．</s></p><p>まあ前述の通り，僕は 2600MC Air がほしい．紅の軍事帝国にはあまり染まりたくないと思いつつ，やはり便利そうではあるんですよね…．購入前に ASIAIR を使うことになる強制練習イベントが発生したと捉えておきます．</p><p><img src="/images/00000076-2024-11-fukushima/ngc1333.jpg" alt="NGC1333 周辺"></p><div style="text-align: center;">「NGC1333 周辺の分子雲」<br>2024年11月30日21時1分～12月1日4時21分 山梨県 育樹祭記念広場<br>ε-160ED<br>ZWO ASI6200MC Pro<br>Gain 100/Offset 50/-10℃/180s*131<br>Total: 393min<br>ZWO AM3<br>Adobe Photoshop CC / PixInsight<br><a href="https://www.astrobin.com/60q5n1/">AstroBin</a><br><br></div><p>せっかくのフルスペック機材ということで，普段は避けるような対象を狙ってみました．なんだかんだで初のフルサイズ冷却 CMOS 使用ですね．<br>そこそこ早めの到着でしたが，ASIAIR アプリのダウンロードに1時間くらいかかったのと回転構図合わせに悩んだため21時頃からの露光となりました．</p><p>以下お借りした機材所感…</p><ul><li><p>AM3+TC40：おそらくけーたろ氏のノウハウが入って三脚は剛性マシマシになっていることを加味する必要があるのではと思うが，撮影したライト133フレームのうち使えないと判断したのは2フレーム．それも追尾エラーではなく外部からの光と構図ズレ．少なくとも ε-160ED での運用では EM-200 での歩留まりとさほど変わらないと判断．買うなら AM5N かと思っていたが AM3N が出ればこちらでいいのかもしれない．</p></li><li><p>ASIAIR：お借りしたお三方の教え方が上手いとも言うが，アプリはかなり使いやすい．たぶん次また使えと言われても使えると思う．UI の開発者も優秀なのかなと．スマホのスペック不足でちょくちょくアプリが落ちたのは気になったが，処理自体は機材側でやっているので切れても何も問題ないのは安心感大きい．</p></li><li><p>ASI6200MC Pro：APS-C 冷却しか使ってこなかったので画角が一目でわかるほど広いなぁ～という当たり前の感想．データ容量がデカすぎて撮影画像をスマホでスムーズにプレビュー切り替えできない（100%で前後比較して星像チェックしたいことがよくある）のが気になった（なにか方法があるのかも）．インテグレーションも死ぬほど時間がかかるので自分にはまだ早いカメラだなと思った．</p></li></ul><p>改めて，お三方どうもありがとうございましたm(_ _)m．</p><p>余談「本当にあった怖い話」<br>今回機材を丸ごと放置して松屋に避難しに行ったのですが，帰ってきたら子午線反転が終わっていた…しかも近くに望遠鏡は何台も並んでいたが，その現場を現地の誰も目撃していなかったという…．<br>当然ケーブルワークは子午線反転のことなど想定していないので，どこか引きちぎれたりしている可能性もあった．間に合うと思って出かけたんだけど，今度からは気を付けます…．</p><p>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> カメラ </tag>
            
            <tag> 機材 </tag>
            
            <tag> 鏡筒 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>見えたぜ紫金山・アトラス</title>
      <link href="/2024/10/16/00000075-c2023a3/"/>
      <url>/2024/10/16/00000075-c2023a3/</url>
      
        <content type="html"><![CDATA[<h4 id="前置き"><a href="#前置き" class="headerlink" title="前置き"></a>前置き</h4><p>生きていると，「これは人生最高の◯◯だ！」と思う瞬間が極稀に訪れます．そしてさらに，ごく短期間のうちにそれを2回以上更新してしまうことがあります．<br>星に関して言えば，自分の場合，大学一年目で白布峠で人生で初めて暗く標高の高い場所で星を見て，「これは人生最高の星空だ！」と感動した記憶が強く残っています．それから数週間後，乗鞍岳でさらにすごい星空を見て人生最高の星空を2回も更新してしまうという貴重な経験をしました．<br>さて，前々から話題になっていた C2023&#x2F;A3 紫金山・アトラス彗星ですが，車が壊れたり9月末にコロナになってしまったりとトラブルが重なったせいで（天気が悪かったというのもありますが），近日点に近づく前半は一度も見られずモヤモヤする日々を過ごしていました．そして先日，無事崩壊することなく近日点を通過し明るさも上々となってようやく巡ってきた天気も良さそうな三連休．このチャンスは逃すわけにもいかず，2024年10月13日と14日の二晩，彗星を見に出かけたわけです．</p><span id="more"></span><h4 id="2024-10-13"><a href="#2024-10-13" class="headerlink" title="2024&#x2F;10&#x2F;13"></a>2024&#x2F;10&#x2F;13</h4><p>車がないので，とりあえず金曜のうちに実家に戻ります．翌日土曜は実家近くで歯列矯正治療の予定が入っていたので，車を借りて現在一人暮らししている新居からの機材回収のみにとどめました．<br>近くのスーパーで買い物ついでに西の空を眺めてみましたが低空には雲がかかっていたので今日は怪しいだろうと思い込んで実家に帰宅．</p><p>日曜は少し遅めに起き，機材をチェックして静岡県の仁科峠に向けて出発．本当は帰らず月曜日も出るつもりでしたが，このときカメラのバッテリーを一個実家のコンセントにさしっぱなしにしていたので結局帰る羽目になりました．<br>前回彗星を見に行ったのはネオワイズ彗星のときで，雲に阻まれたものの写真になんとか写すことができたといった感じでした．今回はどうだろう．</p><a href="https://dabokun.github.io/2020/07/20/00000035-2020-07-neowise/" target="_blank" rel="nofollow" class="link-preview"><div class="og-image"><img src="http://dabokun.github.io/null" alt="ほしよみ社会塵のブログ" loading="lazy"></div><div class="descriptions"><div class="og-title">ほしよみ社会塵のブログ</div><div class="og-description">撮ったぜネオワイズこんにちは．今話題のネオワイズ彗星を撮影してきました．</div></div></a><p><img src="/images/00000075-c2023a3/001.jpg" alt="到着してカメラを西の空へ向けます"></p><p>箱根を越えて15時半頃に現地に着いてみると，天気はかなりいい感じ．土曜には城ヶ島で見えていたという報告も見ましたので，「標高もあるここで見えないわけがない！」と思う反面，「あまり大した事なかった」みたいな報告もあったので「写真で写せればいいかな」程度に考えていました．16時を過ぎると同業者が続々と集まりはじめ，仁科峠のそこそこ広い駐車場いっぱいに三脚が並んでいました．</p><p><img src="/images/00000075-c2023a3/002.jpg" alt="迎撃準備ヨシ！"></p><p>日も暮れてきて，少し雲も出てきました．この日はカメラ2台で撮影，望遠鏡1台で眼視です．<br>その後夕暮れの空を眺めつつ隣にカメラを出していた人と談笑しつつ，しばらく望遠鏡やファインダーで探したものの彗星は見つからず．金星はよくわかりますが…．<br>18時前ごろでしょうか．ファインダーで見え始めます．一度見えるとカメラのライブビューでも写りはじめ，空が暗くなるとともにあれよあれよと核の輝きが肉眼でも見え始めます．<br>なんか尾も余裕で見えてきました．俺はまだ人生で一度も肉眼で彗星の尾を見たことがないんだ．ちょっと待ってくれよ．</p><p><img src="/images/00000075-c2023a3/003.jpg" alt="Pixel6a で撮影"></p><p>などと思いつつ彗星は待ってくれません．結局，肉眼で4～5°程度の尾を見せながら西の空に沈んでいきます．スマホでも全然写ります．すごいすごい，もう大興奮です．<br>望遠鏡で見ても，広めのアイピースでも収まりきらないような尾を見せています．こんなのは今まで見たことがありません．<br>この日は Nikon Z8 でタイムラプスを撮影していましたが ISO の自動制御が走っておらず普通に失敗しておりました（もう一台のカメラバッテリーは前述の通りです）．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/As9SUpTJ0yQ" frameborder="0" loading="lazy" allowfullscreen></iframe></div><p>撮影はミスりましたが，興奮冷めやらぬままそそくさと撤収します．<br>この日は関西からこちらに来て働いている同年代の方も数名いらっしゃり（何名か？は Twitter でフォローしていただいていた），お話したり眼視で DSO を見せていただいたりしました．ありがとうございました．<br>途中で夕飯を食べたりしながら23時過ぎに実家に帰宅．翌日もあるのでそのまま寝ました．</p><h4 id="2024-10-14"><a href="#2024-10-14" class="headerlink" title="2024&#x2F;10&#x2F;14"></a>2024&#x2F;10&#x2F;14</h4><p>翌日の日曜日は，再びの仁科峠に僕だけではなく友人も何名か集まる予定．土曜に忘れたカメラのバッテリーを回収して実家を出て，新居に置きっぱなしにしていたぬい（ぐるみ）とスーパーワイドビノを取りに行くついでに荷物の整理．この時にカメラプレートとカメラを繋ぐカメラネジを壊れた車に放置していたせいで手元にないことに気づきます．これでは赤道儀にカメラを載せられないので，仁科峠に向かう道中のホームセンターで購入．<br>望遠鏡は置いて，アイピースだけ友人に提供できるように持っていきました．</p><p><img src="/images/00000075-c2023a3/004.jpg" alt="今日もまた，日が暮れる…"></p><p>結局土曜日と同じくらいに現地に着いてみると，土曜日よりも彗星目的の人が多く集まっていました．天気も，少なくとも土曜日より雲が少ないように見えます．<br>友人も集まりはじめ，現地はどんどん彗星目的の人で賑わっていきます．土曜日にあれだけ素晴らしい姿を見せていたので，今日も同等かそれ以上のものが見られるに違いないという確信のようなものがありました．</p><p><img src="/images/00000075-c2023a3/005.jpg" alt="錚々たる機材が並び始めます"></p><p>ちぎれ雲のようなものもありますが，17時40分ごろにカメラ撮影で移り始めました．</p><p><img src="/images/00000075-c2023a3/006.jpg" alt="写った！"></p><p>土曜日と同様，暗くなるにつれてどんどん尾が見えてきます．月明かりや彗星自体の減光のためか土曜日よりもコントラストは低く淡い感じがしますが，尾の長さは土曜日の倍，10°くらい見えます．壮大な眺めです．</p><p><img src="/images/00000075-c2023a3/007.jpg" alt="「ドルジ，あれが彗星だよ．」「ぬおー．」"></p><p>この日は fpL と Z8 で撮りまくります．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/BYUG_USV2e0" frameborder="0" loading="lazy" allowfullscreen></iframe></div><p>こちらは赤道儀を使用した短めのタイムラプスですが，空が暗くなる短時間のうちに美しく輝きを放つ様子がわかります．淡いですが，ネックライン構造も見て取ることができます．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/RFaLUcJ47vg" frameborder="0" loading="lazy" allowfullscreen></iframe></div><p>こちらは静岡市方面に沈んでいく彗星です．カメラ雲台がなかったので地平線は斜めです．</p><p><img src="/images/00000075-c2023a3/008.jpg" alt="タイムラプスからの切り出し"></p><div style="text-align: center;">「紫金山・アトラス彗星」<br>2024年10月14日18時35分 静岡県 仁科峠<br>SIGMA 105mm F1.4 DG HSM Art<br>SIGMA fpL<br>ISO-640/F2.0/8s<br>タカハシ EM-11 Temma2 Jr.<br>Adobe Photoshop CC<br><br></div><p>上のタイムラプスから適当に切り出して編集したもの．105mm では全然収まり切らなさそうな尾の長さ．迫力満点です．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/9eujeDhjEhA" frameborder="0" loading="lazy" allowfullscreen></iframe></div><p>こちらは Z8 でのタイムラプスです．空をかけながら街明かりの中に沈んでいきます．素晴らしい．</p><h4 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h4><p>さて，今回2日連続で彗星を楽しみました．13日と14日で，同じくらいの高度で比較すると↓のような感じになりました．</p><p><img src="/images/00000075-c2023a3/009.png" alt="13日と14日の比較（左13日，14日）．赤丸は同じ星．"></p><p>露出時間が違うので単純比較はできませんが，個人的には14日のほうが尾が長く，より素晴らしく見えていたと思います．</p><p>このようにして，「人生最高の彗星」は二晩連続で更新されたのでした．大満足．</p>]]></content>
      
      
      <categories>
          
          <category> 天体写真 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> カメラ </tag>
            
            <tag> 機材 </tag>
            
            <tag> レンズ </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ブログ復帰していきます</title>
      <link href="/2024/09/11/00000074-2024-res/"/>
      <url>/2024/09/11/00000074-2024-res/</url>
      
        <content type="html"><![CDATA[<p>お久しぶりです．</p><span id="more"></span><p>今年度から社会人になり，若干の余裕(？)ができてきたのでブログ更新をちまちま復帰していきたいと思います．<br>ブログタイトルも変更しました．<br>これまでのことを書きたいところではありますが正直どこから書けばいいのかわからないので今回は取り急ぎ短文で済ませたいと思います．</p><p>天体写真や観望については，頻度は減ったものの継続していますし，今後ものんびり楽しんでいく予定です．<br>それでは．</p><p><img src="/images/00000074-2024-res/work.jpg" alt="M17 オメガ星雲"></p><div style="text-align: center;">「M17 オメガ星雲」<br>2024年9月7日20時45分～22時21分 千葉県 平沢ダム<br>タカハシ ε-160ED<br>QHY268PH C<br>Gain 26/Offset 50/-5℃/180s*29<br>Optolong UV/IR Cut 2''Total: 87min<br>タカハシ EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Photoshop CC / PixInsight<br><br></div><p>一番最近の ε-160ED で撮影したオメガ星雲です．</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MGEN-3 ファームウェアアップデート方法</title>
      <link href="/2023/02/02/00000073-mgen3-fw130/"/>
      <url>/2023/02/02/00000073-mgen3-fw130/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは，昨年末ぶりのブログ更新です．<br>MGEN-3 が年明けにファームウェア 1.30 へのアップデートで Plate Solving に対応しだしましたので遅ればせながらアップデートをしたわけですが，毎度ノートPCに MGEN を接続した後「どうやるんだっけ？」と忘れるのでブログに記しておきます．<br>今回から Plate Solving を利用するためにはデータベースファイルを書き込む必要もあるので，その方法も書いておきます．</p><span id="more"></span><h3 id="ファームウェアのアップデート"><a href="#ファームウェアのアップデート" class="headerlink" title="ファームウェアのアップデート"></a>ファームウェアのアップデート</h3><p>やり方については以下の動画で英語で説明されています．<br>英語がわかる人はこれを見ながら進めてもいいですが，少し情報が古かったり，後述のように今回に関しては不要な操作があったりしますので注意．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/XkxqsNSQVpQ" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h4 id="サポートページへの登録とデバイスの登録"><a href="#サポートページへの登録とデバイスの登録" class="headerlink" title="サポートページへの登録とデバイスの登録"></a>サポートページへの登録とデバイスの登録</h4><p>サポートページのアカウントがない人は<a href="https://support.mgen-autoguider.com/index.php?page=register">登録ページ</a>にアクセスし，メールアドレス，パスワード，簡単な質問の答えを入力して登録します．<br>登録したら，ログインし，”Support”→”My Devices”→”Register Your Device”と進みます．<br><img src="/images/00000073-mgen3-fw130/01.jpg" alt="MGEN のデバイス登録画面"><br>画像黄枠の部分に MGEN の ID とシリアルナンバーを入力して “Register” から登録すると，画像赤枠のように自分の MGEN-3 が登録されます．ID は MGEN-3 本体を起動し画面右上のレンチマーク→”System” から確認でき，シリアルナンバーは MGEN-3 本体の背面またはカメラ本体側面に書いてあります．</p><h4 id="必要なファイルのダウンロード"><a href="#必要なファイルのダウンロード" class="headerlink" title="必要なファイルのダウンロード"></a>必要なファイルのダウンロード</h4><p>前ステップの画像にある，登録されたデバイスの keyfile をダウンロードします．<br>続いてサポートページの “Support” → “Firmwares, Language files” からファームウェアファイルをダウンロードします．今回は “Mgen3_Firmware_1-30.ZIP” です．</p><p>動画だとこの後ドライバーアップデータの実行ファイルをダウンロードしていますが，上記 zip ファイルに含まれているので今回は必要ありません．<br>続いて（FTDIドライバーのインストールがまだの場合），<a href="https://ftdichip.com/drivers/d2xx-drivers/">FTDIドライバーのページ</a>にアクセスし，ドライバーの実行ファイルをダウンロードしてインストールします（Windows の場合は setup executable からダウンロードすれば OK）．<br>これで準備は完了です．</p><h4 id="ファームウェアのアップデート-1"><a href="#ファームウェアのアップデート-1" class="headerlink" title="ファームウェアのアップデート"></a>ファームウェアのアップデート</h4><p>MGEN-3 本体を起動し画面右上のレンチマーク→”Turn Off”→”Stop &amp; go to BOOT”でブート画面にしておきます．<br><img src="/images/00000073-mgen3-fw130/mgen_sc_01.jpg" alt="MGEN でブート画面への移動"><br>続いて “Mgen3_Firmware_1-30.ZIP”を展開して Apps&#x2F;MG3_Updater_v.1.3.exe を実行します．<br><img src="/images/00000073-mgen3-fw130/02.jpg" alt="MGEN アップデータの画面"><br>アップデータの画面の赤枠部分の二箇所， Firmware file には Firmware_1-30&#x2F;LMG3_fw0130_0.bin を，Key file には前のステップでダウンロードしてきた keyfile を指定します．他の設定は特にいじらず，”Update firmware(s)” ボタンを押せばアップロードが始まります．特にエラーが出ず下に DONE と表示されれば OK です．<br>MGEN 本体側でそのまま “Start firmware” からアップデートした状態の MGEN を起動できます．</p><h3 id="データベースファイルの追加"><a href="#データベースファイルの追加" class="headerlink" title="データベースファイルの追加"></a>データベースファイルの追加</h3><p>これまでは MGEN のファームウェアのアップデートは上記ステップで完了でしたが，今回は Plate Solving 機能を利用するためにデータベースファイルを内部 SD カードの指定のパスに書き込む必要があります．<br>Apps&#x2F;MG3_PCApp_v.1.30.exe を起動します．<br><img src="/images/00000073-mgen3-fw130/03_1.jpg" alt="MGEN-3 PC Application の起動直後の画面"><br>起動すると右下に “FileSystem” ボタンがあるのでこれをクリック，別の窓でファイルマネージャーが立ち上がります．<br><img src="/images/00000073-mgen3-fw130/03_2.jpg" alt="データベース書き込みのためのファイルマネージャー"><br>画面左のファイルマネージャーから &#x2F;MG3&#x2F;DB&#x2F; を開き，ウィンドウ左下の “Upload Sky DataBase file (plate solving).” ボタンをクリックすると，データベースファイルの書き込みが始まります．しばらく待って，完了です．<br>MGEN-3 で利用するには，画面上部の四角いアイコン→”Sky data”→”Load DB”でロードします．<br><img src="/images/00000073-mgen3-fw130/mgen_sc_02.jpg" alt="MGEN でPlate Solving 画面への移動，データベースのロード"><br>以上で完了となります．まだファームウェアをアップデートしてから観測に出ておらず，Plate Solving の機能自体はテストしていませんが，マニュアルを見る限りガイドカメラの中心の方向がわかる，程度だと思われます．ただ，ここから有名天体を画面に重畳表示して電子ファインダー代わりにしたり，撮影カメラの向いている方向を設定し，赤道儀と連携することで自動導入できるようになることが期待できます．Lacerta さんには頑張ってほしい()．<br>…個人的には Square Snake Dithering を先にできるようにしてほしいですが．<br>それでは今日のところはこれにて，この記事が未来の自分か他の誰かの役に立てばいいなと思います笑．</p>]]></content>
      
      
      <categories>
          
          <category> 機材 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> 機材 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022年振り返り</title>
      <link href="/2022/12/31/00000072-2022-lookback/"/>
      <url>/2022/12/31/00000072-2022-lookback/</url>
      
        <content type="html"><![CDATA[<h3 id="2022年振り返り"><a href="#2022年振り返り" class="headerlink" title="2022年振り返り"></a>2022年振り返り</h3><p>みなさんがやっているので自分も今年のことを振り返ってみようと思います．</p><span id="more"></span><h4 id="遠征など"><a href="#遠征など" class="headerlink" title="遠征など"></a>遠征など</h4><p>昨年導入した冷却 CMOS や TOA-130 を使って，今年は比較的トラブル少なく安定した遠征活動ができたと思います．<br>1月はまだ寒いので単騎千葉へ．友人H氏の車がスタッドレスになっているはずなので来年は頼れるかもしれません（他力本願）．3月は西湖に行ったり友人H氏，渡部くんと田村市の星の村天文台に行ったり．晴れましたがあまり満足な星果は上げていません．4月に大洗に行くもこちらも曇って不発で，その翌週の朝霧～原村でようやくそれっぽく撮影できました．5月は東京と群馬の友人を連れて清里～原村と連泊し，末には栃木の育樹祭記念公園へ．風の民さんとはじめまして，M&amp;Mさんとはお久しぶりの撮影になりました．6月は戦場ヶ原に行き，晴れてきたのに寝ていたさすらいさんを叩き起こすなどしました．</p><a href="https://dabokun.github.io/2022/05/15/00000063-2022-first-half-lookback01/" target="_blank" rel="nofollow" class="link-preview"><div class="og-image"><img src="http://dabokun.github.io/images/00000063-2022-first-half-lookback01/card.jpg" alt="ほしよみ社会塵のブログ" loading="lazy"></div><div class="descriptions"><div class="og-title">ほしよみ社会塵のブログ</div><div class="og-description">お久しぶりです今年に入ってから，遠征記を全く書いていないことに気づきました．原因は TOA を使うようになったことでしょう．眼視というのはメシエマラソンのような修行をしない限り，また機材重量を特に気にしなければひじょうに楽なもので，観望地に着けば機材をドンと置いて，極軸はなんとな...</div></div></a><a href="https://dabokun.github.io/2022/09/02/00000064-2022-05-06/" target="_blank" rel="nofollow" class="link-preview"><div class="og-image"><img src="http://dabokun.github.io/null" alt="ほしよみ社会塵のブログ" loading="lazy"></div><div class="descriptions"><div class="og-title">ほしよみ社会塵のブログ</div><div class="og-description">こんにちはまたまた久々の更新となります．今年はだいたい月一くらいのペースで星見に遠征しています．5月は，前回の記事で清里原村に行った際の記事を書きましたが，後半は栃木県の育樹祭記念広場へ，6月は戦場ヶ原へ行きました．普段はあまり遠征で訪れない北関東のシーズン(？)です．</div></div></a><p>今年はキャンプもしたい！と思い7月は基本的なキャンプ道具を揃えて友人とふもとっぱらへ．結局時間がなくこれ以降キャンプができていないのがなんともコスパが悪いです．来年は行けるタイミングでじゃんじゃか行きたい…．8月は3年ぶりに乗鞍畳平に行って最高に暗い空を堪能しました．<br>また星ナビさんの「ネットよ今夜もありがとう」でこのブログを紹介していただきました．</p><a href="https://dabokun.github.io/2022/09/04/00000065-2022-07-08/" target="_blank" rel="nofollow" class="link-preview"><div class="og-image"><img src="http://dabokun.github.io/null" alt="ほしよみ社会塵のブログ" loading="lazy"></div><div class="descriptions"><div class="og-title">ほしよみ社会塵のブログ</div><div class="og-description">星ナビ「ネットよ今夜もありがとう」コラムに弊ブログが紹介されました9月5日発売の星ナビ2022年10月号に掲載させていただきました．投稿写真ではなく，「ネットよ今夜もありがとう」という天文を楽しむ人のブログやホームページを紹介するコラムです．毎度お世話になっているM&amp;Mさ...</div></div></a><p>これまでにない遠出をしたいと思い，9月はしらびそへ．しらびそ高原天の川に宿泊しました．晴れましたが，台風一過で湿度がめちゃんこ高かった…．10月最初の快晴を体調不良で逃しましたが，病み上がりで五合目に突撃し M45 をゲット．天文ガイドビギナーの部で掲載していただきました．天リフさんのガチ天にも出演させていただき，20分もお話させていただきました．</p><a href="https://dabokun.github.io/2022/10/04/00000066-2022-09-10/" target="_blank" rel="nofollow" class="link-preview"><div class="og-image"><img src="http://dabokun.github.io/null" alt="ほしよみ社会塵のブログ" loading="lazy"></div><div class="descriptions"><div class="og-title">ほしよみ社会塵のブログ</div><div class="og-description">9月 しらびそ今年の目標はしらびそ or 浄土平往復でした．</div></div></a><a href="https://dabokun.github.io/2022/10/28/00000067-gachiten2022/" target="_blank" rel="nofollow" class="link-preview"><div class="og-image"><img src="http://dabokun.github.io/null" alt="ほしよみ社会塵のブログ" loading="lazy"></div><div class="descriptions"><div class="og-title">ほしよみ社会塵のブログ</div><div class="og-description">ガチ天に出演今月頭に Youtube 上で配信されました 天リフ超会議拡大版「ガチ天2022」2日目に出演してきました．</div></div></a><p>10月後半は研修から帰ってきた静岡の友人と朝霧，Rambさんやけーたろさん，Wadaさん，群馬の友人と初の赤城山でご一緒しました．初の2×2パネルモザイクをし，目盛り環を使った子午線反転とカメラに触れない構図合わせを会得できました．</p><a href="https://dabokun.github.io/2022/10/30/00000068-asagiri-akagi/" target="_blank" rel="nofollow" class="link-preview"><div class="og-image"><img src="http://dabokun.github.io/null" alt="ほしよみ社会塵のブログ" loading="lazy"></div><div class="descriptions"><div class="og-title">ほしよみ社会塵のブログ</div><div class="og-description">あいさつこんにちは．10月後半も，晴天のもと出撃できるかもしれないチャンスが訪れたので，星撮りに遠征へ行きました．</div></div></a><p>まだブログにできていませんが，11月は小海星フェスに行って散財したり，坂本真綾ライブがあったりで夜の遠征はなしでした．12月は，クリスマスに今年最初で最後の天城へ．導入したTOA-645フラットナーを使った撮影ができました．来春の銀河撮影にも期待です．</p><a href="https://dabokun.github.io/2022/12/27/00000071-2022-12-amagi/" target="_blank" rel="nofollow" class="link-preview"><div class="og-image"><img src="http://dabokun.github.io/null" alt="ほしよみ社会塵のブログ" loading="lazy"></div><div class="descriptions"><div class="og-title">ほしよみ社会塵のブログ</div><div class="og-description">今年最初で最後の天城へなんだかんだで，今年は天城に一度も行っていないなーと思っていました．クリスマスにも特に予定ができなかったし（いつものことである），天城，富士山周りはなんだか晴れそうな雰囲気だったので，遠征に出ることにしました．</div></div></a><p>記録：<br>天文遠征14回&#x2F;キャンプ1回&#x2F;星祭り1回&#x2F;ライブ1回</p><h4 id="買ったものなど"><a href="#買ったものなど" class="headerlink" title="買ったものなど"></a>買ったものなど</h4><p>・K-ASTEC DS38-30&#x2F;DP38-30A<br>・防湿庫　東洋リビングED-160CAWP2(B)<br>・キャンプ道具一式（小物を含めるとここには書ききれない…）<br>・ビノテクノ EZM<br>・タカハシ LE40mm<br>・Vixen HR1.6mm(小海)<br>・Pentax XW20mm(小海)<br>・サイトロン QBPフィルター(小海)<br>・EcoFlow Delta2 + 200W ソーラーパネル<br>・タカハシ 645フラットナー130セット，カメラ回転装置(TSA-102)</p><p>来年の目標に節制も追加で．</p><p>それでは皆さん，良いお年を！</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022年12月 天城</title>
      <link href="/2022/12/27/00000071-2022-12-amagi/"/>
      <url>/2022/12/27/00000071-2022-12-amagi/</url>
      
        <content type="html"><![CDATA[<h3 id="今年最初で最後の天城へ"><a href="#今年最初で最後の天城へ" class="headerlink" title="今年最初で最後の天城へ"></a>今年最初で最後の天城へ</h3><p>なんだかんだで，今年は天城に一度も行っていないなーと思っていました．クリスマスにも特に予定ができなかったし（いつものことである），天城，富士山周りはなんだか晴れそうな雰囲気だったので，遠征に出ることにしました．</p><span id="more"></span><p>運転しながら割とギリギリまで朝霧にするか天城にするか悩んでいたのですが，知り合いの方も多くいらっしゃるようなので天城に行くことに．<br>16時半頃といういつもの時間に出発し，テキトーに買い出しだけして19時半頃に到着，すでに下の駐車場には同業者がそれなりに多く来ていました．<a href="http://aramister.blog.fc2.com/blog-entry-716.html">Aramisさん</a>に<a href="https://ramb-astro.hatenadiary.jp/entry/2022/12/27/133024">Rambさん</a>，後から<a href="https://twitter.com/ShonanAstroPhot">けーたろさん</a>，<a href="https://twitter.com/hotan666">Wadaさん</a>，<a href="https://twitter.com/okwkzkw">かばねさん</a>もいらっしゃり，お話することができました．<br>TOA-645 フラットナーと回転装置を最近導入したので，今回は TOA での撮影です．鏡筒を買ってから1年以上経過していますが，撮影に使うのはまだ片手に収まるくらいです．</p><p><img src="/images/00000071-2022-12-amagi/01.jpg" alt="撮影の様子"></p><p>クリスマスですからクリスマスツリー星団を…と思いましたがまだ高度が低く，上がってくるまでどうしよう…と悩んだ末にぎょしゃ座の勾玉星雲の一番明るそうなところを拡大撮影で狙ってみました．<br>が，撮影が不安定です．MGEN-3 と PC の接続がすぐに切れてしまい，ディザリングがまともにできません．PC の再起動や USB，ケーブルをガイドカメラとのものと交換してもダメでしたが，Anker のハブを介したところ切れなくなりました．Anker は神．</p><p><img src="/images/00000071-2022-12-amagi/work1.jpg" alt="勾玉星雲 拡大撮影"></p><div style="text-align: center;">「勾玉星雲 拡大撮影」<br>2022年12月24日21時17分～12月25日0時29分 静岡県 天城高原ゴルフコース<br>TOA-130NS+645 Flattener<br>QHY268PH C<br>Gain 26/Offset 50/-20℃/180s*49<br>Optolong UV/IR Cut 2''Total: 147min<br>タカハシ EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Photoshop CC / PixInsight (BlurXTerminator, NoiseXTerminator)<br><br></div><p>そんなこんなで一応2時間半弱撮影…．<br>最近話題の SPCC や BlurXTerminator (BXT) を使っています．本当はもっと星が大きいです…．AI 系のツールに対してはかなり懐疑的(？)な見方をしている AI については不勉強な僕()ですが，学習しているのはデコンボリューションのためのパラメタで，そのための教師データとして HST や JWST を使っていると．おそらく，HST や JWST の画像（の一部）に大気のゆらぎなどを通したぼけやガイドエラーをかけた画像を用意し，それを尤もらしく元の画像に戻すようなデコンボリューションのパラメタを学習しているのではないかと考えられます．学習後のネットワークモデルさえあればいいので，当然プログラムが走るときに HST や JWST の画像は必要にはならないでしょう．それならいいのかな…いや良くない気もする．自分の立ち位置がよくわからなくなります．<br>BXT ではなるべくインテグレーション直後に実行することが推奨されていますが，リニアステージで適用すると asinh ストレッチの際に星の色がおかしくなってしまう問題が報告されているようです（たとえば<a href="https://snct-astro.hatenadiary.jp/entry/2022/12/18/155747#%E4%BD%BF%E3%81%84%E6%96%B9%E3%81%A82022%E5%B9%B412%E6%9C%88%E6%99%82%E7%82%B9%E3%81%A7%E3%81%AE%E6%B3%A8%E6%84%8F%E7%82%B9">だいこもん氏の記事</a>）．自分も同じで，この問題は NoiseXTerminator (NXT) でも生じています．ただ他にやりようがないので，おかしくなった星の色は Photoshop でなんとなく戻しているというのが現状です．青い星が紫っぽくなってしまうので，この辺の色相をいじっている感じ…．まだ改善の余地がありそうなツールだと感じていますが，今回のように焦点距離が長く，かつシーイングが悪くて星像が大きい画像に効果絶大なのは認めざるをえません．自分も考え方を変えたほうがいいのかな…．とりあえず AI 系のツールを使っていることはちゃんと明記しておきたいと思います．やってることが結局デコンボリューションなのであれば，そのパラメタ値だけでもちゃんとターミナルに出力してくれたりすると，まだ再現性があっていいなと思うのですが．<br>SPCC については，勉強したらかなり面白そうなツールだと思います．特に蒼月城さんの以下の PCC 解説動画は一見の価値があります．まだ流し見しかできていないですが，PCC を追実装したくなったら真っ先に参照したい動画ですね．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/52ZnyJ9oYrY" frameborder="0" loading="lazy" allowfullscreen></iframe></div><p>クリスマスツリー星団の子午線通過が0:17頃でしたが，0時からぼっち・ざ・ろっく！の最終回が配信されていたのでそれが終わるまでリアタイ．星空の下で聴く「星座になれたら」，いい最終回だった…．（スピーカーで聞いてたので周りの人うるさかったらすみませんでした…）</p><p><img src="/images/00000071-2022-12-amagi/02.jpg" alt="夜も更けていきます…"></p><p>視聴後に対象を変えて撮影開始．導入や，カメラを90度回したりしていたので30分ほど時間がかかってしまいました．クリスマスツリー星団は双子座ガンマ星（アルヘナ，ポルックスの左足元に相当する2等星）と経度がかなり近いので，こいつを導入して南に振っていくと導入しやすいようです．撮影開始後は特に問題は発生せず4時過ぎくらいまで撮影…．</p><p><img src="/images/00000071-2022-12-amagi/work2.jpg" alt="クリスマスツリー星団"></p><div style="text-align: center;">「クリスマスツリー星団」<br>2022年12月25日1時00分～4時38分 静岡県 天城高原ゴルフコース<br>TOA-130NS+645 Flattener<br>QHY268PH C<br>Gain 26/Offset 50/-20℃/180s*62<br>Optolong UV/IR Cut 2''Total: 186min<br>タカハシ EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Photoshop CC / PixInsight (BlurXTerminator, NoiseXTerminator)<br><br></div><p>こちらは3時間ちょい．なかなか見栄えはするんじゃないでしょうか．<br>645フラットナーの実力を出し切れたかというとそうでもない感じがしていますが，まあまたシーイングが良いタイミングで…．<br>今回はフラット撮影を一切していません．勾玉の方はなぜか少し被りがありましたが，グラデーションマスクで用意に目立たなくできるレベルでひじょうにやりやすかったです．フルサイズ CMOS がほしくなってきます…．</p><p>薄明にまだ30分ちょいあったので，眼視に切り替えて M51, M104, M81&#x2F;82 を見ました．その場にいらした何人かの方にも見てもらいました．小海で買った PENTAX XW-20mm をようやく使えましたが，見やすく TOA との組み合わせはシャープで，見ごたえがありましたね．<br>来年こそはメシエマラソンしてみたいな…．</p><p><img src="/images/00000071-2022-12-amagi/03.jpg" alt="朝焼けに照らされる富士山"></p><p>片付けて7時前に離脱．朝焼けに照らされた冬の富士山があまりに綺麗だったので，思わず伊豆スカイラインに課金（山伏峠まで…おりてからの道が狭かったので二度と使いたくない）．<br>休憩を挟みつつ9時半頃の帰宅となりました．</p><p>来年も星撮りたい…．余裕あるかな…．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> OpenCV </tag>
            
            <tag> 機材 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>月間天文ガイド2023年1月号に掲載していただきました</title>
      <link href="/2022/12/06/00000069-tenmonguide202301/"/>
      <url>/2022/12/06/00000069-tenmonguide202301/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ？"><a href="#あいさつ？" class="headerlink" title="あいさつ？"></a>あいさつ？</h3><p>こんにちは．皆既月食に星フェス，ライブとブログに書きたいネタが溜まっていますが今回は短めで．昨日12月5日発売になりました月間天文ガイド2023年1月号 読者の天体写真ビギナーの部に M45 の写真を掲載していただきました．</p><span id="more"></span><p><img src="/images/00000069-tenmonguide202301/01.jpg" alt="2023年1月号 読者の天体写真ビギナーの部"><br>書店にお立ち寄りの際は是非ご覧ください．<a href="https://dabokun.github.io/2022/10/04/00000066-2022-09-10/#10%E6%9C%88%E5%88%9D%E3%82%81-%E4%BA%94%E5%90%88%E7%9B%AE">10月頭に五合目で撮影したもの</a>ですね．11月末の坂本真綾ライブでもフォロワーさんのほしい方にはがきサイズで印刷してお配りしていた写真です．この時の話はまた次回．<br><img src="/images/00000069-tenmonguide202301/02.jpg" alt="自前で印刷してお配りしていました"><br>プレヤデスと書かれていますがプレアデスのほうが正しいかもしれません（応募用紙をいつも手書きで書いて送っていて，手元に自分で何と書いたかのデータが残っていないのは今後改善したいと思います）．講評では星の中心はもっと飛ばしたほうが良いということで，眠めの画を作っている自覚はあるのでここも今後取り入れていきたいと思います．まだ自分のビギナー枠は一回分残っていますので有効に使っていくつもりです笑．<br>最初に書きました通りブログに書きたいネタが溜まっているので次のを書きます．<br>それでは！</p>]]></content>
      
      
      <categories>
          
          <category> 天体写真 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10月後半遠征</title>
      <link href="/2022/10/30/00000068-asagiri-akagi/"/>
      <url>/2022/10/30/00000068-asagiri-akagi/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．10月後半も，晴天のもと出撃できるかもしれないチャンスが訪れたので，星撮りに遠征へ行きました．</p><span id="more"></span><h3 id="朝霧へ"><a href="#朝霧へ" class="headerlink" title="朝霧へ"></a>朝霧へ</h3><p>初回は静岡で就職した友人と久々に朝霧で落ち合うことに．対象は遠征地によって決めようと思っていたので，朝霧ということで北の対象を狙うことに．<br>現地には21時頃到着．狙うはハート胎児星雲です．<br>ところが，FSQ-85+APS-C ではあまりにも画角が狭すぎ，少なくとも2×2パネルモザイクしなければ全景は入らなさそうです．胎児だけにしときたいという気持ちとモザイクをしたいという気持ちがせめぎあい，結局茨の道へ進むことにしました．</p><p><img src="/images/00000068-asagiri-akagi/01.jpg" alt="モザイク予定"><br>モザイク予定，長方形が1パネルです</p><h4 id="目盛環を使った子午線反転と-APT-による構図合わせ"><a href="#目盛環を使った子午線反転と-APT-による構図合わせ" class="headerlink" title="目盛環を使った子午線反転と APT による構図合わせ"></a>目盛環を使った子午線反転と APT による構図合わせ</h4><p>撮影時間は1パネルあたり2時間とし，今回だけではなく次の機会も使ってモザイクに挑戦してみることにしました．<br>まずは1パネルだけしか撮れなくでも作品にはなりそうな胎児星雲を撮っていきます．コマごとに見ていくと一方向に流れてしまうような細かい問題はあったものの，特に問題なく撮影を進めていき，2パネル目に入る際にちょうどいいタイミングなので子午線反転を挟むことにしました．<br>手動導入派で「Plate Solve？ナニソレオイシイノ？」というような人間にとって（特に天頂付近を通過するような天体の）子午線反転は苦痛そのものです．いつもであれば，手動で導入し直す→カメラを180度回す→構図をあわせる ということをしていたのですが，これではあまりにも時間がかかってしまうので，もう少しいい方法がないかと，その少し前にちょうど子午線反転を挟んでいた友人と話し合いました．赤道儀には目盛環がありますので，これを使ってできないかと．ちゃんと考えれば当たり前ですが，子午線反転でやりたいことは<br>①赤経を180°回転させる<br>②天の北極（天の赤道より南の対象の場合は南極）に対して対称移動する<br>ということです．①についてはそのまんまですが，②を目盛環の言葉に言い換えれば，<br>②(90°-対象天体の緯度)×2だけ北へ（天の赤道より南の対象の場合は南へ）目盛環を回す<br>ということをすれば，理論的にはできそうです．<br>使っていたEM-200 TemmaPC Jr. はモーターの回転がちょっと遅いので，今回は手動でやってみることに．<br>結論，手動でやったので完璧に画角が合うわけではありませんでしたが，うまくいきました．胎児星雲を構成する星の一部が写野に収まってくれました．</p><p>さて，導入ができたら次の関門は構図合わせです．なるべく経度の回転だけでモザイクしたいので，それまで撮っていた胎児星雲のパネルに構図をあわせたいです．が，子午線反転後は180°画像が回転してしまい単にライブビューしながらでは厳密な構図合わせができません．これまではカメラを180°手で回していましたが，どうしても回転ズレが出てきてしまいます．<br>そこで，APT の機能をよくよく調べてみると，Preview Effect なるものがあり，メニューのなかの Rotate CW からプレビューを90°, 180°, 270°と回転できることを見つけました．</p><p><img src="/images/00000068-asagiri-akagi/02.jpg" alt="Rotate CW のやり方"></p><p>しかし，これはライブビューについても撮影画像プレビューに対しても有効になるので，結局両方 180° 回転してしまい意味がありません．そこで，ちょっと複雑ですが<br>①撮影画像プレビューを 180° 回転させる<br>②Magnifier でわかりやすい星を一部拡大する．そのまま Magnifier を表示しておく<br>③プレビューの 180° 回転をやめて元に戻す<br>④ライブビューにし，②で拡大しておいたわかりやすい星を表示したままにしておいた Magnifier へ導入する<br>という手順を踏めば，子午線反転後でもカメラに触れることなく構図合わせが可能になると考えました．<br>こちらもうまくいき，かなり厳密な構図合わせができましたので，そのまま赤経だけ回転させて2パネル目へ進むことができました．</p><p><img src="/images/00000068-asagiri-akagi/03.jpg" alt="友人の車と"><br><img src="/images/00000068-asagiri-akagi/04.jpg" alt="友人と"></p><p>この日にテキトーに撮った星景写真をば．<br>一晩快晴で朝霧の駐車場は風もある程度遮ってくれますし，かなり快適に過ごすことができました．</p><h3 id="赤城へ"><a href="#赤城へ" class="headerlink" title="赤城へ"></a>赤城へ</h3><p>そんなこんなで2パネル目まで撮り終えましたが消化不良です．なんとか土日に晴れ間がないか探し，群馬の赤城がいい感じだぞと．群馬であれば北も暗いはずです．埼玉県民の <a href="https://twitter.com/haya_astronomy">Ramb くん</a>にも声をかけ，群馬在住の（坂本真綾さんファンの）友人も誘って新坂平駐車場へ．赤城へ行くのは初めてです．現地につくと，フォロワーの <a href="https://twitter.com/hotan666">Wada さん</a>や途中から<a href="https://twitter.com/ShonanAstroPhot">けーたろさん</a>も合流され，他にも天体写真屋さんが複数いらっしゃり，賑やかな夜になりました．土日ということもあり走り屋も多く，別の意味での賑やかさもありましたが…笑．遠くからエンジン音やタイヤの鳴き声が聞こえます．上州のからっ風，赤城おろしという名もある通り，風が吹いていましたが，時期にしてはかなり弱い方で助かりました．EM-200 はびくともしませんで，ガイドも問題ありません．上述の通り子午線反転問題も自分なりのやり方が見つかり，ぶっちゃけ撮影中ほとんどやることがないなと思えるまで気が楽になりました．夜中の寒いなか次はアレしなきゃコレしなきゃと考えながらやるのは辛いので，かなり快適になったなあと思います．最新の赤道儀を使えば，たぶんもっと楽なんでしょうが…．<br>そんなこんなでハート胎児の3,4パネル目も撮影できました．4パネル目は正直目分量で赤経を回転させましたが，結果オーライだったので良しです．</p><p><img src="/images/00000068-asagiri-akagi/work01.jpg" alt="ハート星雲，胎児星雲"></p><div style="text-align: center;">「ハート星雲，胎児星雲」<br>2022年10月26日～10月27日 静岡県 朝霧アリーナ駐車場<br>2022年10月29日～10月30日 群馬県 赤城山 新坂平駐車場<br>FSQ-85EDP+Flattener 1.01X<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*40*4 Panel<br>Optolong UV/IR Cut 2''<br>Total: 480min<br>EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Photoshop CC / Astro Pixel Processor / GraXpert / PixInsight<br><a href="https://www.astrobin.com/v0qgy4/">AstroBin</a><br><br></div><p>モザイクには<a href="https://so-nano-car.com/astro-pixel-processor">そーなのかーさんのブログ</a>を参考に APP を使いました．毎度ありがたい限りです．今回は “dynamic optical distortion correction” をオンにしたらうまくいき，オフでは一部がちゃんとモザイクできませんでした．<br>それから，今回から <a href="https://www.graxpert.com/">GraXpert</a> というソフトを使ってみました．PI の DBE と同じようなことができるソフトです．なかなかいい感じです．</p><p>長方形にクロップして7200万画素，FSQ-85+APS-C 冷却 CMOS による圧巻のハート胎児ができた！と自画自賛してとても満足しているのですがいかがでしょうか．<br>ぜひ <a href="https://www.astrobin.com/v0qgy4/">AstroBin</a> などで拡大してご覧になってください（容量が大きいので注意！）．<br>赤城では時間も余ったので，おまけでカリフォルニア星雲も撮ってきました．子午線反転は今回カリフォルニアに行く前に挟んだので，厳密な構図合わせはせずに済みました．</p><p><img src="/images/00000068-asagiri-akagi/work02.jpg" alt="カリフォルニア星雲"></p><div style="text-align: center;">「NGC1499 カリフォルニア星雲」<br>2022年10月29日～10月30日 群馬県 赤城山 新坂平駐車場<br>FSQ-85EDP+Flattener 1.01X<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*49<br>Optolong UV/IR Cut 2''<br>Total: 147min<br>EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Photoshop CC / GraXpert / PixInsight<br><a href="https://www.astrobin.com/wogl20/">AstroBin</a><br><br></div><p>こちらも美しく，いい感じです．余った時間で NGC1333+IC348 周辺も考えましたが，またモザイクする羽目になるのでまた今度ということにしました笑．こちらはより露光時間が必要でしょうか．いつか撮ってみたいです．</p><p><img src="/images/00000068-asagiri-akagi/05.jpg" alt="友人の車と"><br><img src="/images/00000068-asagiri-akagi/06.jpg" alt="星仲間たちと"></p><p>群馬在住の友人，Ramb くん，けーたろさんと記念写真．この日も一晩良い空でした！</p><p><img src="/images/00000068-asagiri-akagi/07.jpg" alt="EFDelta2"><br>そうそう，帰宅後しばらくしたらこいつ（EFDelta2）が来ました．次回以降の出撃で電子レンジや（もしかしたらケトルも）使えるかもしれません！</p><p>次の出撃機会は月食でしょうか．今のところ関東は天気良さそうなので，楽しみです！<br>それでは！</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>天リフ超会議「ガチ天2022」に出演しました</title>
      <link href="/2022/10/28/00000067-gachiten2022/"/>
      <url>/2022/10/28/00000067-gachiten2022/</url>
      
        <content type="html"><![CDATA[<h3 id="ガチ天に出演"><a href="#ガチ天に出演" class="headerlink" title="ガチ天に出演"></a>ガチ天に出演</h3><p>今月頭に Youtube 上で配信されました 天リフ超会議拡大版「ガチ天2022」2日目に出演してきました．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/55yLCvr47mM" frameborder="0" loading="lazy" allowfullscreen></iframe></div><span id="more"></span><p>以下に私のパートのアーカイブも公開されていますので未視聴の方はぜひ笑．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/8cLKa4sQOqk" frameborder="0" loading="lazy" allowfullscreen></iframe></div><p>以前自分の撮った写真を紹介する天リフさんの生配信で数分お話させてもらったことはあるのですが，今回は20分程度トークしました．<br>お題は「1人1人の『ガチ天』に向き合う態度」ということで，なかなか難しいテーマです．自分の態度を語るとなると自分語りは避けられません．前回のトーク時のアンケートで「自分語りばっかじゃねぇか」みたいなコメントがあったのを私は覚えています()．かといって自分の態度くらいしか語ることがないのもまた事実なので，なんとか自分の話は半分程度にとどめつつ，残り半分でテイクホームメッセージのある内容を話せればいいかなと考えました．<br>構成としては，前半に自分の研究の話をし（よく「何の研究をしてるんですか？」と聞かれて私が答えに詰まることがある），後半は天体写真に向き合う態度のなかで，自分が普段考えていることを主に話させていただきました．<br>特に「視野を広げる」「軸をおいて考えてみる」の2点は大事で，どちらも研究を数年続けて得た態度なのかなと思います．軸を置いて関連研究をプロットすると，どこに穴があるのか見えてくる＝新規性を発見するということに繋がるわけですね．もちろん，他にも軸がないかというのを探してみたり，相関性のある軸を選ぶと意味がないので（プロットした時に直線で並んだら相関性のある軸をとっていないか疑いましょう），ちゃんと独立した軸を選んでいるのかを検証しながら考えていくことも重要になってきます．</p><p><img src="/images/00000067-gachiten2022/01.jpg" alt="発表中の様子"></p><p>（「軸起き」ではなく「軸置き」です…一晩で作ったクオリティなのがバレます）</p><p>以下アンケートでいただいたコメントです．</p><blockquote><p>視野がぱっと開くような感じのお話でした。ありがとうございました。近い将来、天文写真の一分野とか自然現象を、観測データセットをVRゴーグルで自由に3次元インタラクティブ視（プラス動画要素も入れて）して楽しむようになるかもしれないなーなどど妄想いたしました。</p></blockquote><p>VR も楽しいですが、AR でリアルタイムの星空に情報を投影できるようになると絶対楽しいだろうなあと私も考えています．最近発売されたアストロイドなんかも天文×AR の先駆けになりそうですよね．</p><blockquote><p>何事も研究者の視点ですね。思考の仕方がとても興味深かったです。</p></blockquote><p>伝わる人には伝わったようで安心しました．</p><p>直接アンケート結果のフォームを見たわけではなく天リフさんから教えていただいたので，ネガティブなものはもしかしたらフィルターされていたりするのかもしれませんが，とにかくフィードバックをいただけると励みになります．<br>天リフさん，見ていただいた方，コメントいただいた方，どうもありがとうございました．また機会がありましたら参加してみようと思います．<br>それでは！</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9月しらびそ，10月前半五合目</title>
      <link href="/2022/10/04/00000066-2022-09-10/"/>
      <url>/2022/10/04/00000066-2022-09-10/</url>
      
        <content type="html"><![CDATA[<h3 id="9月-しらびそ"><a href="#9月-しらびそ" class="headerlink" title="9月 しらびそ"></a>9月 しらびそ</h3><p>今年の目標はしらびそ or 浄土平往復でした．</p><span id="more"></span><p>どちらも家からの距離は 300km を軽く超えてくるので，なかなか行こうという踏ん切りがつきませんでしたが，もう逃すと冬場は厳しくなってしまうので，今回はしらびそへ．<br>前日に王滝でキャンプをする予定でしたが，台風15号の影響でキャンセル．いつか王滝も往復したいです．<br>中央道をひた走ってしらびそ高原天の川へ．山道自体は意外と短い印象でしたが，山道に到達するまでが長いんですよね…．登っていると途中から雲に突入し，視界は 10m ほどに．大丈夫かこりゃ．</p><p><img src="/images/00000066-2022-09-10/01.jpg" alt="霧の中の宿というのもなかなか幻想的です"></p><p>色々と問題があったようで，ハイランドしらびそから経営母体が変わってからどうなったんだろうと，そもそも変わる前を知らないのに少し観察してみましたが，スタッフの方々はやはり星が好きな人が多く，ホスピタリティが高い印象を受けました．従業員の方を観察しても，多分意味は無いのでしょうが…．夕飯も美味しい…が，メニューを見てもどれがどれかわからない笑．メニューが変更になって，存在しないメニューが記載されていることもあるとか．まあ山の上にありますからね．<br>夜20時頃になると，星空解説会が開かれます．外に出ると，なんと晴れているではありませんか．とはいえ晴れたりガスったりなので，眼視機材だけ出します．どこかから小学生くらいの団体も来ていたみたいで，近くにいた何人かに覗いてもらいました．なんだかんだでちゃんと宿に泊まって星空観察会に参加したのは初めてな気がするので，少しテンションが上がります．<br>ガスが出ていたというのもあるかもしれませんが，やはり乗鞍同様しらびその空は暗いです．関東のそこらの星空とは一段違いますね．ずっと眺めていたかったですが，お風呂が22時までで入るのを忘れていたので，泣く泣く観測会を抜け出してお風呂へ．お湯はかなり熱かった．戻ってくると，観測会も終了し，撮影している何人か以外は宿に戻っています．まだ晴れているので撮影の機材も出してみます．<br>風も少なく，快適な気温でしたが，とにかく結露がひどい．フードがあればなんとかなると思っていましたが全くそんなことはなく，FSQ も TOA も秒で曇ってしまいました．TOA の方は<a href="https://twitter.com/ShonanAstroPhot">けーたろさん</a>に専用ヒーターを作っていただいたのですが，こちらを使っていてもあえなく撃沈．それだけひどい結露だったということですね．</p><p><img src="/images/00000066-2022-09-10/02.jpg" alt="本体セルにヒーターが巻いてあります"></p><p>撮影は M33 を狙ってみました．APS-C だともうちょい焦点距離がほしいかなーと思いますが，赤ポチせずとも中央に向かった構造が面白い天体です．しらびそくらいの暗い空では，ファインダーでもしっかり見えます．</p><p><img src="/images/00000066-2022-09-10/work01.jpg" alt="M33"></p><div style="text-align: center;">「M33 さんかく座銀河」<br>2022年9月24日～9月25日 長野県 しらびそ高原<br>FSQ-85EDP+Flattener 1.01X<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*46<br>Optolong UV/IR Cut 2''<br>Total: 138min<br>タカハシ EM-11 Temma2 Jr. + MGEN-3<br>Adobe Lightroom CC / Photoshop CC / PixInsight<br><br></div><p>結露がひどい中撮影した &amp; フラットを撮らずトリミングしたので，こんな感じで．<br>一眼も出せばよかったですが，宿でぬくぬくしていて色々撮り逃しました．まあまた行けばいいか．<br>そんなこんなで帰りにはシーズン終わりの彼岸花を．こちらもまともに見たのは初めてな気がします．綺麗ですね．</p><p><img src="/images/00000066-2022-09-10/02-1.jpg" alt="彼岸花"><br><img src="/images/00000066-2022-09-10/02-2.jpg" alt="綺麗ですね"></p><p>運転感覚を覚えるために行ったしらびそ．結局寄り道を含め2日で 850km 運転しました．帰宅後は疲労で視界を動かすと残像に黒いもやが見えました．<br>色々できなかったことも多かったので，また行きたいと思います．</p><h3 id="10月初め-五合目"><a href="#10月初め-五合目" class="headerlink" title="10月初め 五合目"></a>10月初め 五合目</h3><p>10月初めは記録的快晴に恵まれましたね．<br>僕はというと……</p><p>体調を崩しました．マヂ病み．しらびその疲れが出たのでしょうか．<br>38度ちょいくらいの発熱にお腹を下すという，なんか昨年末も似たような症状に見舞われたんですがなんなんですかね．ちなみに簡易検査キットで流行り病は陰性でした．</p><p>自分はこんななのに，知り合いの方々がみんな遠征に出ている．悔しくないわけがなかろう．ということでまずはなんとか病を気力で治します．ちなみに記録的快晴が終了した日にかなり回復しました．神も仏もないものか．<br>だがここで Windy を確認すると，月-火で富士山～伊豆半島周辺に晴れ間があるではありませんか．火曜に大事な発表も控えていましたが，資料をサクッと作って早速準備をします．直前の ECMWF17時更新でやはり五合目がいい感じなので，荷物をまとめて出発．これでだめだと本当に凹むので，あまり期待はせずに向かいます．<br>道中，小動物が5匹くらい，山の主みたいな鹿を3頭，普通の鹿を2頭くらい見ました．あんな立派な鹿が富士山周辺にいるとは思っていませんでしたので意外でした．<br>道中も雲が多く，到着しても雲多し．Windy 外したかぁと思いながらのんびり赤道儀を組み立てていたら，少しずつ雲がなくなっていきます．</p><p><img src="/images/00000066-2022-09-10/03.jpg" alt="月没待ち"></p><p>狙おうと思っていた M45 も見えてきました．本当は今年は狙わんでもいいかなと思っていたのですが，月没後から子午線通過までちょうどいいタイミングで狙える天体だった &amp; せっかく来たのに難しい天体で躓いてもつらいので，今回はこちらを撮ってみます．なんだかんだで冷却で撮ったこともなかったしね．</p><p><img src="/images/00000066-2022-09-10/04.jpg" alt="露光開始！"></p><p>時々ちぎれ雲が飛んできますが，前半は昴にはあまりかからず．しかし一時間ちょいたった頃にピントをチェックするためにバーティノフマスクをつけたところズレています．どうやら最初からズレていたようです．何やってんだ．<br>ピントを修正して気を取り直します．</p><p><img src="/images/00000066-2022-09-10/05.jpg" alt="天の川も見えてきました"></p><p>そんなこんなしていたら月も沈んで天の川もしっかり見えてきました．南の対象を狙っておいて何ですが，五合目の北の暗さはイイです．<br>ただ今回は富士山から吹き下ろしの強風が吹いていました．自分が機材を広げたところは木々のおかげか風向き的に絶妙に避けられていたのか微風程度でガイドにも全く影響がありませんでしたが，北を狙うために一番上で撮影していたら辛いことになっていたと思います．</p><p><img src="/images/00000066-2022-09-10/06.jpg" alt="家車"><br>オリオンがいい感じに上ってきたので，愛車(家の車です)ともパシャリ．僕が遠征に出るようになって一気に走行距離が増えましたが，それでもまだ11年でようやく5万キロに到達しました．</p><p>2時頃になると，やばそうな筋状の高層雲に襲われました．3時まで粘ってだめだったら帰ろうと思ったのが運のツキ．いざ3時頃になると，また雲もなくなり先程以上に良い空になってしまい，薄明まで撮影コースとなりました．<br>手前(富士宮市街？)だけだったようですが，低層には雲海も出ていたようです．</p><p><img src="/images/00000066-2022-09-10/07.jpg" alt="雲海"><br>街明かり全部ではありませんが，光をある程度遮ってくれていました．</p><p><img src="/images/00000066-2022-09-10/08.jpg" alt="最後に一枚"><br>動画を見たりしながらゆったり過ごしていると昴もとうに子午線を超え，オリオンもあんなに高く．道路も混むので，急いで撤収して7時頃に帰宅となりました．<br>帰りに鹿は1頭も見ませんでした．</p><p>肝心の M45 を最後に載せておきます．</p><p><img src="/images/00000066-2022-09-10/work02.jpg" alt="M45 昴"></p><div style="text-align: center;">「M45 昴」<br>2022年10月03日～10月04日 静岡県 富士宮口五合目<br>FSQ-85EDP+Flattener 1.01X<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*89<br>Optolong UV/IR Cut 2''<br>Total: 267min<br>タカハシ EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Lightroom CC / Photoshop CC / PixInsight<br><a href="https://www.astrobin.com/u7k1ii/">AstroBin</a><br><br></div><p>貴重な記録的快晴を無駄にしましたが，転んでもただでは起きぬです．<br>北側の分子雲が好きなので，こんな感じの構図にしてみましたがいかがでしょうか．<br>最近話題になっている「PSF Signal Weight」も使ってみました．詳しくは<a href="https://masahiko.me/integration-new-method/">丹羽さんブログ</a>や<a href="https://snct-astro.hatenadiary.jp/entry/2022/09/17/232845">だいこもんさんブログ</a>を参照ください．微妙なフレームでもソフト側でしっかり活用してくれるのは嬉しいですね．おかげで像やS&#x2F;Nの悪化等はあれど4時間半近いデータを利用できました．</p><p><img src="/images/00000066-2022-09-10/comp.jpg" alt="前回のと比較"></p><p>前回 6D で撮ったものと比較してみました．前回のも好きですが，今回のほうが周辺の分子雲の色が青と分離していて冷却 CMOS っぽいイメージになったのかなと思います．<br>皆さんはどちらが良いと思いますか，良ければコメントくださいね（定期）</p><p>それでは，また新月期に．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>星ナビ掲載，キャンプと久々乗鞍</title>
      <link href="/2022/09/04/00000065-2022-07-08/"/>
      <url>/2022/09/04/00000065-2022-07-08/</url>
      
        <content type="html"><![CDATA[<h3 id="星ナビ「ネットよ今夜もありがとう」コラムに弊ブログが紹介されました"><a href="#星ナビ「ネットよ今夜もありがとう」コラムに弊ブログが紹介されました" class="headerlink" title="星ナビ「ネットよ今夜もありがとう」コラムに弊ブログが紹介されました"></a>星ナビ「ネットよ今夜もありがとう」コラムに弊ブログが紹介されました</h3><p>9月5日発売の星ナビ2022年10月号に掲載させていただきました．投稿写真ではなく，「<a href="http://www.astroarts.co.jp/hoshinavi/magazine/hiroba/net/index-j.shtml">ネットよ今夜もありがとう</a>」という天文を楽しむ人のブログやホームページを紹介するコラムです．毎度お世話になっている<a href="http://morio.way-nifty.com/blog/2022/07/post-d023ea.html">M&amp;Mさん</a>からのバトンです．もともと天体写真界隈（ネット）ではそこまで親密な友人関係を作ったり，特定のグループに所属しないように心がけていたことや，Twitter などで見かける方々はすでに紹介されているだろう（バトンを渡す相手を見つけるのが大変だろう）という勝手な思い込みがあったので，正直載ることはない，仮に指名があったとしても断るだろうと最初は思っていました．が，M&amp;Mさんからの指名とあってはそのご厚意を無下にするわけにはいきませんし，よくよく見てみると自分を含め意外と紹介されてない人はいるみたいなので，バトンを引き受けることにしました．とはいっても300字程度の紹介文を書いて，あとは先方の方がよしなにやってくれるので，大変なことは全くありませんでした．</p><span id="more"></span><p><img src="/images/00000065-2022-07-08/h01.jpg" alt="ブログ紹介コラムです"></p><p>このように載せていただけるのは大変ありがたいことです，M&amp;Mさん，アストロアーツさん，ありがとうございました．<br>次回（12月号）に誰を指名したかはお楽しみに．</p><h3 id="7月-ふもとっぱらでキャンプデビュー"><a href="#7月-ふもとっぱらでキャンプデビュー" class="headerlink" title="7月 ふもとっぱらでキャンプデビュー"></a>7月 ふもとっぱらでキャンプデビュー</h3><p>さて，7月は星見をサボってキャンプデビューへ．テントの墓場と名高いふもとっぱらキャンプ場です．もともと昨年12月に行く予定があったのですが，体調を崩したので夏にデビューとなりました．</p><p><img src="/images/00000065-2022-07-08/01.jpg" alt="不動さんのほうとう"></p><p>当日までに最低限のキャンプギアを揃え，厚木で友人を拾って向かいます．河口湖でお昼と買い出しをして，ワイナリーで夕飯のお供を選んでいたらだいぶ遅くなってしまいました．日月で利用しましたが，利用客はかなり多いように思えました．コロナで入場制限をしていそうですが，制限前はどれだけぎゅうぎゅうだったんだろう…．利用される場合は早めにチェックインして，お昼は現地で作って食べるくらいがちょうどいいのかもしれません．とはいえ自分は今のところ料理に自信が皆無なので，慣れてからですね…．<br>到着後，サクッと設営（大嘘，タープを立てるのに1時間くらい溶かしました）をして，焚火と夕飯準備です．</p><p><img src="/images/00000065-2022-07-08/02.jpg" alt="テントとタープ設営後"><br>…タープしなしなじゃねえか．</p><p>夕飯は買ってきたソーセージをグリルで焼いたり，初心者おすすめメニューのアヒージョを食らったり…まあまあうまくいったのではないかと思います．焚火はまだまだ素人，バトニングちゃんとできるようになりたい…薪割り用の斧も持ってないのでほしいですね．</p><p><img src="/images/00000065-2022-07-08/03.jpg" alt="B6君デビュー"><br><img src="/images/00000065-2022-07-08/04.jpg" alt="アヒーーーーー"></p><p>夜の天気は微妙でしたが，薄雲越しの惑星や星団，登ってくる細めの月を楽しむことができました．</p><p><img src="/images/00000065-2022-07-08/05.jpg" alt="木星を眺めるの図"><br>テントの中の音が外に漏れるというのは本当で，周りの人のいびきやら子どもの声やらがめちゃくちゃ聞こえてきました．<br>そんなこんなであまり寝ずに夜が明け，朝は朝食とコーヒーを楽しみつつ，高原の気温とは思えぬ暑さにヘロヘロになりながら撤収しましたとさ．</p><p><img src="/images/00000065-2022-07-08/06.jpg" alt="朝コーヒー"><br><img src="/images/00000065-2022-07-08/07.jpg" alt="薪を頑張って燃やしてるの図，暑いです"><br><img src="/images/00000065-2022-07-08/08.jpg" alt="撤収後，お疲れ様でした"></p><p>その後はお昼食べて温泉入って帰宅．特に大きな問題もなく，良いキャンプデビューとなりました！</p><h3 id="8月-3年ぶりの乗鞍"><a href="#8月-3年ぶりの乗鞍" class="headerlink" title="8月 3年ぶりの乗鞍"></a>8月 3年ぶりの乗鞍</h3><p>8月は，3年ぶりの乗鞍に行きました．冒頭でお話した星ナビの当ブログ紹介コラムに，大学に入学して最初に見た本格的な星空が白布峠と乗鞍岳の星空だということを書かせていただきました，思い入れの強い聖地です．大学一年生にして，現地ではほとんどの人が初対面であることに緊張しながら，一抱えの荷物と一緒に一人で新島々駅まで青春18切符で行ったことを思い出します．あの時も，一晩素晴らしい星空に恵まれ，友人の望遠鏡で直焦点撮影体験をさせてもらいました．<br>それからも毎年，夏には当時お世話になった団体で乗鞍に行っていましたが，コロナ禍では団体公式で乗鞍遠征は開催されていませんでした．しかし今年は行動制限が緩和されているということで，感染対策を十分に3年ぶり6回目に足を運ぶことになりました．今ではもちろん団体の人はほとんど顔見知りの友人で，バスを都内からチャーターすることで，大量の機材を持つようになった自分でもずいぶんと快適に行けるようになりました．</p><p>都内を10時頃に出発し，畳平には16時頃に到着．雲の中という感じで，夏とは思えない寒さ．ああ例年こんな感じだったなと懐かしい思いに浸りながら機材を宿に搬入します．</p><p><img src="/images/00000065-2022-07-08/09.jpg" alt="3年ぶりの乗鞍！"></p><p>しばらくするとある程度視界は確保されましたが，夜まで快晴とはなりませんでした．とはいえ，一時的に天頂付近の雲がなくなり，標高2700mの天の川が見えました．スーパーワイドビノで見ると天の川の中の星がまあ見える見える．以前美ヶ原で見たものより一段よく見えるといったところでしょうか．また，途中天の川が薄雲を貫通して光って見えたのがとても印象的で，これが乗鞍の星空だ！ということを改めて思い出しました．<br>望遠鏡もセッティングしていたものの，日付が変わった頃から雨が降り出したためビニール袋をかぶせてテープと紐で固定，そのまま次の晩まで置いておきました．今年は翌日に乗鞍ヒルクライムを控えており，白雲荘から少し歩いたところのコンクリートの広いスペースは使えなかったので，宿の人にお願いして宿の前の坂に，なるべく邪魔にならないように機材を置いておくことができました．機材運搬の労力がかからず，とてもありがたかったです．<br>翌日は朝から剣ヶ峰へ．以前夜に登ってヘトヘトになり，もう登りたくないと思っていましたが，まあ昼間だったらいいかということで仲間についていくことにしました．</p><p><img src="/images/00000065-2022-07-08/10.jpg" alt="乗鞍ヒルクライムの自転車列，すごい数です"><br><img src="/images/00000065-2022-07-08/11.jpg" alt="富士見岳の麓から．降りていく人も大勢いるみたい"></p><p>富士見岳の麓まで歩くと，乗鞍ヒルクライムでゴール&#x2F;帰っていくものすごい数の自転車が．いつも観測している場所も自転車やら人やらでごった返していて，こんなのは見たことないという光景でした．こりゃ機材出しとけないよね．…この乗鞍ヒルクライムですが，上位陣は観光センター？から1時間足らずで畳平まで上がってくるみたいです，たぶんバスより全然速いと思います，すげー．</p><p><img src="/images/00000065-2022-07-08/12.jpg" alt="一番手前が僕，山をナメた装備です"><br><img src="/images/00000065-2022-07-08/13.jpg" alt="途中の岩場で休憩"></p><p>肩の小屋までのんびり歩き，本格？登山開始です．乗鞍は北アルプス群の中では最も簡単なので，僕のようにバカみたいな装備でも怪我に気をつけつつ山頂まで上がることができます．…とはいえ友人が持ってきた飴やらには大変お世話になったのですが…．</p><p><img src="/images/00000065-2022-07-08/14.jpg" alt="雲間から覗く北アルプス（槍，奥穂，前穂）"><br><img src="/images/00000065-2022-07-08/15.jpg" alt="権現池，火口池？になります"><br><img src="/images/00000065-2022-07-08/16.jpg" alt="御嶽山"></p><p>息は上がりますが，それでもだんだんと晴れてくる景色が素晴らしい．雲間から高難易度の北アルプス（槍，奥穂高，前穂高）や御嶽山が見えます．父がよく登山をしているので，あそこに登ったのかぁと勝手に想像したり．権現池もいい感じです．</p><p><img src="/images/00000065-2022-07-08/17.jpg" alt="乗鞍剣ヶ峰 山頂にて"></p><p>そんなこんなで山頂に到着し，記念撮影．山頂の神社で今晩の晴れを祈願し，ゆっくり降りていく頃には祈りが通じたのか青空が見え始めます．これは今晩期待できるんじゃないの？！</p><p><img src="/images/00000065-2022-07-08/18.jpg" alt="山頂売店で売ってるホットレモン，うまい！"><br><img src="/images/00000065-2022-07-08/19.jpg" alt="東大の観測所がよく見えます"><br><img src="/images/00000065-2022-07-08/20.jpg" alt="標高2800mで枝に刺さっている，カードキャプターさくらのあいつ"><br><img src="/images/00000065-2022-07-08/21.jpg" alt="肩の小屋まで降りてきました"></p><p>そして下山後は当然お昼を食べます．これがまた旨い．たぶんこのために登山してるんだと思う．</p><p><img src="/images/00000065-2022-07-08/22.jpg" alt="下山後の至福のカレーうどん"></p><p>カレーうどん．ビールも注文できたが，流石に我慢(笑)<br>その後は雷鳥を探しながら宿に戻りましたが，残念ながら今年は会うことはできませんでした．その代わり，よくわからない種類の鳥が飛んでいるのを以前より多く見た気がします．<br>お昼にビールを我慢しておきながら，宿に戻ってからは夕飯の時間までお酒を飲みながらのんびりと過ごします．その間も空の雲は昨日と比べ明らかに少なく，「あれ，もしかして今晩本当にいける…？」という空気に．</p><p><img src="/images/00000065-2022-07-08/23.jpg" alt="晴れそう！"></p><p>お風呂に入り，夜が更けます．<br>結論，大勝利と相成りました．薄明終了前から見えてはいけないレベルの天の川が見えています．素晴らしすぎる！！</p><p><img src="/images/00000065-2022-07-08/24.jpg" alt="21時半頃の天の川中心部付近"></p><p>早速撮影機材を動かします．色々と問題がありましたが，周りの助けもあってなんとか露光をかけることができました．今回は北アメリカ星雲&#x2F;ペリカン星雲をブロードバンドで露光．先日よっちゃん師の「<a href="https://www.youtube.com/watch?v=dnpL8PmTjuw">天体写真作品 評価・鑑賞会</a>」の動画で指摘されていた，星雲のRGBが交錯するような部分の透明感を表現するための素材が欲しかったためです．</p><p><img src="/images/00000065-2022-07-08/work2022-08.jpg" alt="北アメリカ星雲&#x2F;ペリカン星雲 周辺"></p><div style="text-align: center;">「北アメリカ星雲/ペリカン星雲 周辺」<br>2022年8月28日～8月29日 岐阜県高山市 乗鞍岳畳平<br>FSQ-85EDP+Flattener 1.01X<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*(51(NGC7000)+18(IC5070))<br>Optolong UV/IR Cut 2''<br>Total: 207min<br>タカハシ EM-11 Temma2 Jr. + MGEN-3<br>Adobe Lightroom CC / Photoshop CC / PixInsight/ Astro Pixel Processor<br><a href="https://www.astrobin.com/lay7c1/">AstroBin</a><br><br></div><p>北アメリカ星雲と，ペリカン星雲で上下にモザイクしています．モザイクには <a href="https://www.astropixelprocessor.com/">APP</a> を初めて使ってみました．<a href="https://so-nano-car.com/astro-pixel-processor">そーなのかーさんのブログ記事</a>が大変役に立ちました，ありがとうございます．<br>露光時間がかなり違っていたり，北アメリカ星雲が少しボケ気味になってしまったりと不完全な部分は多々ありますが，個人的には満足の行く仕上がりになったと思います．特に北アメリカ星雲の中の色の濃淡やペリカン星雲との色の差，ペリカン星雲周辺の淡く茶色っぽい領域などを表現できた気がします．何よりも，6回目の乗鞍で初めて直焦点作例を撮影できたというのが嬉しいですね．改めて乗鞍の空の素晴らしさがよくわかりました．</p><p>撮影のほうが安定してからは，坂の下のコンクリート部分（こちらも邪魔にならないよう）に TOA を出して眼視を楽しみます．</p><p><img src="/images/00000065-2022-07-08/25.jpg" alt="木星を見る"></p><p>今回は残念ながら，惑星にはあまりシーイングが良いとはいえず，止まったような惑星はなかなか見えませんでした．以下に見たものをメモしておきます．</p><ul><li><p>木星<br>あまり細かい模様は見えませんでしたが，とにかく明るい．地元で見るよりもコントラストが高いです．明るすぎて，逆に地元の方が見やすいまである笑．でもシーイングが良い時に見たら素晴らしいんだろうなあ．</p></li><li><p>土星<br>木星と違って星本体に細かい模様が少ない分こちらの方が見やすい印象．カッシーニの間隙まではバッチリ見えます．</p></li><li><p>天王星<br>初めて導入．双眼鏡でも見えるんですね．というかなんで導入したんだ()．TOA-130 + TAK3.3-UW で確かに恒星でないことがわかります．海王星も見てみたかったが，導入はしませんでした．</p></li><li><p>アルビレオ<br>50倍くらいで山の中に沈みかけの時間に見ました．やっぱ美しいです．</p></li><li><p>リゲル<br>初めて伴星の分離に成功しました．そこそこ離れていて，なるほどこんな感じに見えるのかと一つ勉強になりました．</p></li><li><p>M31<br>50倍で．あまりじっくりとは見ませんでしたが，馴染みのある感じ．</p></li><li><p>M45<br>LE50mm があったので広角で見てみました．これくらい広角だとすばる全体が見渡せて良いです．</p></li><li><p>M42（Quad BP フィルター使用）<br>電子観望してるような感じ．正立ミラーを入れているので写真通りの向きに見え，すごいリアリティ．</p></li><li><p>M27（Quad BP フィルター使用）<br>フィルターを入れても入れなくてもそこまで変わらない印象を受けました．りんごの芯がよく見えます．</p></li><li><p>h-χ<br>50倍で．シャープな光学系で広がった星団を見るのは至福のひと時です．</p></li><li><p>網状星雲（Quad BP フィルター使用）<br>TOAで一番見たかったやつ．LE50mm で見ましたが本当に素晴らしかった．以前40cmドブソニアンで見た際はもっときついフィルターを入れていたためか，あまり星が多くなく星雲だけがドン！と見えている印象でしたが，こちらはシャープな星々の海の中に，巨大で微細構造をもった星雲が確かに存在しているという臨場感がすさまじい．ほのかにHαとOIIIの違いもわかったような気もしました．</p></li><li><p>M57（Ninja400 + OIII フィルターで観望）<br>人様の機材で見ました．リングの外側のうねうねもなんとなく見えたような気がする．</p></li><li><p>らせん星雲（Ninja400 + OIII フィルターで観望）<br>こちらも自分の機材ではありません．中抜きの構造がわかりました．パイン飴みたいな感じ．</p></li></ul><p>以上です．M31 や h-χ，惑星は宿に宿泊していた他のお客さんにも見てもらいました．特に土星に感動しておられて，よかったなあと思います．一般の方は300倍程度で見ることもあまりないですからね．<br>そうそう，M13 を見忘れるという大失態に（沈んでから）気づいて頭を抱えました．他にも見忘れたものがあるかもしれませんが，登山の疲れもあったので致し方なし．それにしても QBP フィルターと LE アイピースが今回いい仕事をしてくれました．自分では持ってないので買おうかな…と思います．特にアイピースは買えるうちに…．</p><p>そんなこんなで薄明が始まってきたので眼視機材は撤収し，撮影機材もある程度片付けて1時間ほど仮眠をとりました．ガチの高山地だと片付けをするにもすぐ息があがるのでいつもの倍は疲れます．来年は体力つけないと…という気持ちになりました．<br>6時に朝飯を食べ再度少し仮眠．残りの機材も片付けて，撤収．疲れで帰りのバスの中では何度気絶したかわかりませんが，3年ぶり6回目の乗鞍．大変満足度の高い遠征となりました．</p><p><img src="/images/00000065-2022-07-08/26.jpg" alt="鶴ヶ池の前で"><br><img src="/images/00000065-2022-07-08/27.jpg" alt="白雲荘の前で"></p><p>大変お世話になりました．また来年も行くぞ！</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022年前半の遠征を振り返る（その2）</title>
      <link href="/2022/09/02/00000064-2022-05-06/"/>
      <url>/2022/09/02/00000064-2022-05-06/</url>
      
        <content type="html"><![CDATA[<h3 id="こんにちは"><a href="#こんにちは" class="headerlink" title="こんにちは"></a>こんにちは</h3><p>またまた久々の更新となります．<br>今年はだいたい月一くらいのペースで星見に遠征しています．5月は，前回の記事で清里原村に行った際の記事を書きましたが，後半は栃木県の育樹祭記念広場へ，6月は戦場ヶ原へ行きました．普段はあまり遠征で訪れない北関東のシーズン(？)です．</p><span id="more"></span><h3 id="5月-栃木県育樹祭記念広場"><a href="#5月-栃木県育樹祭記念広場" class="headerlink" title="5月 栃木県育樹祭記念広場"></a>5月 栃木県育樹祭記念広場</h3><p>育樹祭記念広場というと最初に思い浮かぶのは前回の記事でも行こうとした山梨県にある全国育樹祭記念広場ですが，どうやら栃木県にもあるらしい．当初福島県某所に行こうかと思っていたのですが，普段お世話になっている<a href="http://morio.way-nifty.com/blog/2022/06/post-b5df5b.html">M&amp;M さん</a>と，彼のご友人の<a href="https://twitter.com/UFK58Hworld">風の民さん</a>も来られるということで，そちらに進路を切り替えました．道中東京に出るついでにこんなものを借りてみました．</p><p><img src="/images/00000064-2022-05-06/01.jpg" alt="Milvus 1.4&#x2F;85"></p><p>前々から気になっていた Zeiss Milvus 1.4&#x2F;85 です．星に良いという話を聞いていたのですが，ネットに作例がほとんどないので，レンタルショップで借りてみました．レンタル日→利用日→返却日と借りることができて，レンタル料は￥4,000也．曇るとつらいですが覚悟の上です．外装は傷だらけですが，レンズ自体はキレイに見えます．<br>やはり北関東となると一人で出るのはなかなかに疲れます．途中のコンビニで夕飯を買ってサクッと現地入り．M&amp;M さんは久喜白岡JCTでの大渋滞にハマってなかなかたどり着かないようで，先に着いていた風の民さんとはじめましての挨拶をして，テキトーに機材を展開します．<br>この近くの八方ヶ原に，大学入学当初訪れた経験がありますが，その時は晴れなかったのでどのような空かはちっともわかりません．<br>薄明も終わるかという頃，最初来た時にあった薄雲もとれてきました．</p><p><img src="/images/00000064-2022-05-06/02.jpg" alt="お弁当（食べかけですみません）"><br><img src="/images/00000064-2022-05-06/03.jpg" alt="うどんが沸くのにいい季節です"></p><p>おなかがすいてきたので夕飯を………夕飯をテキトーに買いすぎました．うどんがなければ餓死するところでした．<br>今回はM8&#x2F;M20を露光．といっても，北は暗いですが南はだいぶ明るく，理想的な環境であるかは疑問です．</p><p><img src="/images/00000064-2022-05-06/work2022-05.jpg" alt="M8干潟星雲&#x2F;M20三裂星雲 周辺"></p><div style="text-align: center;">「M8干潟星雲/M20三裂星雲 周辺」<br>2022年5月28日～5月29日 栃木県矢板市 育樹祭記念広場<br>FSQ-85EDP+Flattener 1.01X<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*46<br>Optolong UV/IR Cut 2''Total: 138min<br>タカハシ EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Lightroom CC / Photoshop CC / PixInsight<br><a href="https://www.astrobin.com/ehovvn/">AstroBin</a><br><br></div><p>…とはいえ，なかなかいいんじゃないでしょうか．前回のブログで Baby-Q の一様な色ズレについて指摘しましたが，フィルターを UV&#x2F;IR Cut としても変わりませんでしたので，光学系かなあと思っています．深刻度としては，PixInsight 上で容易に補正（チャンネル分解→StarAlignment→再合成）して個人的に問題ないレベルになりますので，気が向いたら工場で見てもらおうかな，くらいの軽い問題意識で落ち着いています．</p><p>EM-200を撮影に回していたので眼視は夜明け前に少しだけ，惑星を見ました．このときは木星と土星がかなり近く，50倍で同一視野に入っていたかと思います．<br>その後はのんびりと帰宅．C2をひた走って3～4時間くらいで帰宅となりました．<br>Milvus 85ですが，フルサイズ周辺では非点収差が見られ，またパープル～赤のフリンジが出てしまい，なかなかに難しいレンズだなあというのが率直な感想です．</p><p><img src="/images/00000064-2022-05-06/05_milvus_mosaic.jpg" alt="Milvus 1.4&#x2F;85 のフルサイズ周辺切出し"><br><img src="/images/00000064-2022-05-06/06.jpg" alt="バンビ付近も露光してみました"></p><p>上の通りバンビ付近も撮ってみましたが，光害がひどく僕の処理では救いようがありません．北側によくわからない縞状のアーティファクトも出てきました，これはレンズではなくカメラの問題だと思う，なんじゃこりゃ．<br>星撮りにはなんとも難しいですが，少なくとも普段撮りではかなり好みな写りをするので，予算が無限にあったら買っていたかもしれません．</p><p><img src="/images/00000064-2022-05-06/07.jpg" alt="Milvus 1.4&#x2F;85 の通常撮影テスト"><br>こういうアンダーめなシーンでの写りが個人的にすごく好きです．ミラーレスが台頭してきていますので，移行してから似たようなレンズが出てきてからかなあという気持ちもあります．</p><h3 id="6月-戦場ヶ原"><a href="#6月-戦場ヶ原" class="headerlink" title="6月 戦場ヶ原"></a>6月 戦場ヶ原</h3><p>6月は戦場ヶ原へ．調べたら2018年ぶりでした．予報が相変わらず良くなく，富士山五合目と迷いこちらに決めました．日光に行くと春曉庭ゆりんさんというかわいい猫がいる温泉をよく利用させていただいていたのですが，ちょうどコロナ禍の頃からずっと休業していて，いつまた入れるのかなと思っています．今回は別の入浴施設 ほの香 さんを利用．宿泊施設に付随？しているようで，無人で営業されています（入浴券を入口前の自販機で買うスタイル）．</p><p><img src="/images/00000064-2022-05-06/08.jpg" alt="きりふり温泉 ほの香 さん"></p><p>疲れていたのか，マスクをしたままシャワーをかぶるという謎の失態を犯しました．浴室内にほとんど人がいなかったのが救い…．</p><p><img src="/images/00000064-2022-05-06/09.jpg" alt="もうこの旅はここで終わりで良いんではないだろうか…"></p><p>温泉後はレストランで（ノンアル）ビールを飲み，いろは坂を登って三本松園地へ．現地には<a href="https://twitter.com/sasurai4649">さすらいさん</a>が先に到着していました．道中<a href="https://twitter.com/sasurai4649/status/1540771070629650433">彼も見たという鹿</a>に遭遇したりもしました．<br>もともと天気予報が芳しくなかったので，FSQ は家でお休みで眼視機材だけを持ってきていました．天気は晴れたりドン曇りになったりでしたが，最終的には天の川がしっかり見えるくらいにはなってくれました．</p><p><img src="/images/00000064-2022-05-06/10.jpg" alt="やはり北側の空は良いですね"><br>戦場ヶ原で直焦撮影するならやはり天頂～北の空になるでしょう．</p><p><img src="/images/00000064-2022-05-06/11.jpg" alt="同乗者と天の川を礼賛 写っている流星はゆっくり流れるのが見えました"><br>今回は眼視に集中していたので流星も割とたくさん見た気がします．</p><p>惑星や今シーズン初の M31，h-χ などを眼視で楽しみました．今回から EZM も導入していたので，快適な眼視環境を得ることができました．</p><p><img src="/images/00000064-2022-05-06/12.jpg" alt="EZM (自宅での使用例です)"></p><p>戦場ヶ原の締めは久々に行きたかった板橋のピノキオでホットケーキをば．朝イチで行ったので人気店ですが2番手ぐらいで入ることができました．その後は特に何事もなく帰宅．</p><p><img src="/images/00000064-2022-05-06/13.jpg" alt="ピノキオのホットケーキ"></p><p>今回のところはこんな感じで．それでは！</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 機材 </tag>
            
            <tag> レンズ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022年前半の遠征を振り返る（その1）</title>
      <link href="/2022/05/15/00000063-2022-first-half-lookback01/"/>
      <url>/2022/05/15/00000063-2022-first-half-lookback01/</url>
      
        <content type="html"><![CDATA[<h3 id="お久しぶりです"><a href="#お久しぶりです" class="headerlink" title="お久しぶりです"></a>お久しぶりです</h3><p>今年に入ってから，遠征記を全く書いていないことに気づきました．原因は TOA を使うようになったことでしょう．眼視というのはメシエマラソンのような修行をしない限り，また機材重量を特に気にしなければひじょうに楽なもので，観望地に着けば機材をドンと置いて，極軸はなんとなく極望にポラリスが入るように合わせ，ケーブルも電源とコントローラの二本のみです．自分で好きな天体を眺めるもよし，一緒に居合わせた人に見てもらうもよし．TOA のような収差の限りなく少ない光学系では月をみただけでもすごいすごいと言ってくれる．まあ気持ちが良いですよね．別に僕がすごいことをしているわけでもなんでもないんですが，それでもその場にいる人たちとリアルな星空の光の感動体験を共有できるのは，Twitter に写真を上げていいねが付くことに比べて代えがたい充実感を得ることができます．<br>要するに，ネット上の交友関係より星空の下のリアルな人間関係，人間関係よりは花鳥風月というメンタルになってしまったのです．「最近の人間が何に幸福を感じるのかということは人間関係のトピックばかりであるが，それは危険なことでもある」というのは有名な某中高の大先輩の言葉ですが，自分はおそらく周りの人間よりも花鳥風月に振りすぎた結果，そのメリットとデメリットの両方を受けているということになるのでしょう．ブログ執筆をするまでもなく，動画を作るまでもなく，趣味として満足してしまっているということです．天文趣味を続けることとそれを発信し続けることは，自分の中では全く別のモチベーションなんだと思います．ただそう捉えるのは逃げでしかない，これではいけないという思いもあるので，これからも気が向いたときにのんびりやっていきます．特に動画は全然やれてないですし．</p><span id="more"></span><h3 id="2022年1月-九十九谷展望公園"><a href="#2022年1月-九十九谷展望公園" class="headerlink" title="2022年1月　九十九谷展望公園"></a>2022年1月　九十九谷展望公園</h3><p>蛇足(？)はこれくらいにして，そろそろ梅雨入りということで，今年のこれまでの遠征をまとめてつらつらと書いていきます．<br>2022年観測初めは千葉県の九十九谷展望公園でした．ノーマルタイヤな家の車ではこの時期大した観望地には行くことができませんので，千葉県の凍結の少なそうな場所で．この時期はまだレナード彗星が比較的大きなトピックとなっていた頃で，夕暮れにそれを撮りに来る方もいらっしゃった気がします．<br>眼視のために買った TOA ですが，撮影テストをしてみようと思い，某補正レンズを借りて M42 を撮影していました．この日は<a href="https://twitter.com/astroryojin">りょーじん</a>さんがいらしており，FSQ-85 から回転装置についている薄い接続環を外すために軍手をお借りしました．改めてありがとうございました．前述の通り借り物の機材を使っていたので SNS やブログ以外への掲載はしていませんが，ほしい方にデータは公開していました．</p><p><img src="/images/00000063-2022-first-half-lookback01/work2022-01.jpg" alt="M42 オリオン大星雲"></p><div style="text-align: center;">「M42 オリオン大星雲」<br>2022年1月3日 19時40分 千葉県 九十九谷展望公園<br>TOA-130NS+某フラットナー<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*65<br>Total: 195min<br>タカハシ EM-200 TemmaPC Jr. + MGEN-3<br>Adobe Lightroom CC / Photoshop CC / PixInsight<br><br></div><p>星像も申し分なく，美しいのですが，某補正レンズ + APS-C のおかげでフラット補正は全くの不要．これは一つ撮影時のストレスが減っていいなあと思います．<br>またこの日はしぶんぎ座流星群のピークでもあり，カメラをしかけてはいましたがあまり大した流星は写りませんでした．目ではいくつか見えたんですけどね．</p><p><video src="https://dabokun.github.io/images/00000063-2022-first-half-lookback01/timelapse01.mp4" width="720" height="720" controls></video><br>動画だとわかりにくいかもしれませんが、最初に2つほど流星が写っているのが確認できます．<br>観望地としてトイレも使えたのはこの時期とてもありがたかったです．トイレ前には自販機もあります．ただ人気スポットなのか，明け方は流星群目当てで多くの車が集まりました．酔っぱらいのにいちゃんにも絡まれました(TOA，しまった後でよかった)．<br>帰りは<a href="https://www.youtube.com/watch?v=-lSCmI9lP08&t=249s">坂本真綾ファンならわかる某スポット</a>に立ち寄って帰宅．海ほたるでは行きと帰りで夕焼け朝焼け両方見ることができました．<br><img src="/images/00000063-2022-first-half-lookback01/01.jpg" alt="千葉県某所"><br><img src="/images/00000063-2022-first-half-lookback01/tw01.jpg" alt="海ほたるからの夕日"><br><img src="/images/00000063-2022-first-half-lookback01/tw02.jpg" alt="海ほたるからの朝日"></p><h3 id="2022年3月-西湖-星の村"><a href="#2022年3月-西湖-星の村" class="headerlink" title="2022年3月　西湖&#x2F;星の村"></a>2022年3月　西湖&#x2F;星の村</h3><p>2月は月を眺めたくらいで遠征はせず．三月に入り河口湖くらいになら行ってもいいかなと思い育樹祭記念広場を目指しました．ところが近づくについれて残っている雪の量も多く，夜間は凍結するだろうなという場所が増えていきます．こういった事態は予め想定して日の入り前に判断することにしていましたが，着いてみるとラスト数百m は完全に凍っていて怖いです，スタックしたら明らかに終わりなのは見えています．<br><img src="/images/00000063-2022-first-half-lookback01/02.jpg" alt="育樹祭記念広場手前"><br>どうやらここは普段からあまり整備はされていないようです．残念ですが育樹祭記念広場は別の機会に諦め，西湖近くの駐車場に決めました．ここもトイレがあって良いです．<br><img src="/images/00000063-2022-first-half-lookback01/03.jpg" alt="西湖からの富士山"><br>が，1時頃には曇ってしまい，機材を片付けても晴れてこなかったので早めに帰宅．高速降りてからは車も少なくほぼノンストップで帰宅することができて感動．<br>西湖で不完全燃焼だったので，よく一緒に観測に行くH君と<a href="https://twitter.com/Watanabe_3010">渡部君</a>を誘って星の村へ．<br>到着して撮影を始めるも，EM-11 の追尾がうまくいきません．なんか赤経方向に振動しているような挙動をします．クランプを締めたり，電源系統を変えてみたり色々やってみましたが原因は不明．春はよく機材トラブルに見舞われる僕です．僕は機材と奮闘しつつ，TOA は他の二人に丸投げして色々見てもらいました()．結局帰宅後地元でやり直したらそこそこうまくいった（というか，星の村での僕が追尾に厳しすぎた？あるいは後述のように色ズレが追尾エラーに見えただけ）ので，本当に原因はよくわかりません．EM-11 はカメラレンズ用にして，EM-200クラスの赤道儀もう一台あってもいいかなとは正直思っています．<br>僕の地元からレンタカーにしたらめちゃくちゃお金かかってしまい（特にまだ学生の渡部君には）申し訳なさ．晴れたからまだ良かったですけどね．<br><img src="/images/00000063-2022-first-half-lookback01/tw03.jpg" alt="撮影の様子"><br>僕が意気消沈しているなか，渡部くんが撮影の様子を写してくれていました．ありがたや．<br>この月はクラゲ星雲やマルカリアンのあたりを撮影していましたが，前述の通りで出せるクオリティにはならなかったので諦め．ちーん．</p><h3 id="2022年4月-大洗-朝霧-原村連泊"><a href="#2022年4月-大洗-朝霧-原村連泊" class="headerlink" title="2022年4月　大洗&#x2F;朝霧-原村連泊"></a>2022年4月　大洗&#x2F;朝霧-原村連泊</h3><p>4月初めは所属していたサークルの後輩と大洗へ．曇りました（完）．でも途中に寄った福岡堰の桜がとてもきれいで，本当に2年ぶりくらいに 135mm が稼働しました．この日は観測ではなく桜を見に来たんや．<br><img src="/images/00000063-2022-first-half-lookback01/tw04.jpg" alt="桜写真"><br><a href="https://twitter.com/astrodabo/status/1510917882766528514">(元ツイート)</a></p><p>とはいいつつ途中眼視をやるくらいには晴れてくれました．M13 や上ってくるアルビレオなどを見たり．惑星ランデブーも見ることができました．<br>帰りに牛久大仏にも寄りました．想像以上に大きい．<br><img src="/images/00000063-2022-first-half-lookback01/04.jpg" alt="牛久大仏くん"><br>ビームを撃たれて車を破壊されそう．</p><p>翌週はリベンジを果たすため一人で連泊．初日は朝霧です．天道（いつもの）に寄って夕飯をとり到着すると，なんか大きな車がたくさん，それと犬の鳴き声がすごい．どうやら翌日土曜日と日曜日にドッグイベントがあるそうです，全然気付かなかった…．まあライトに常時照らされるとかがなければ別段文句もありませんが，今度からはちゃんと調べるようにします．こちらも駐車スペースを取ってしまいますからね．朝霧には<a href="https://twitter.com/N_Tosh2045">N_tosh</a>さんや<a href="https://twitter.com/AstronomyPisuke">ピースケ</a>さん，<a href="https://twitter.com/7oY10">トニー</a>さんなどがいらっしゃっており，少しお話などさせていただきました．N_tosh さんはたまたま近くに停められたので，色々見ていただきました．お付き合いいただきありがとうございました．<br>撮影の方は前半はM64，後半はアンタレス付近です．月が上弦だったので前半はゆるゆると．アンタレス付近は翌夜の原村でも撮影予定でした．晴天の暗い空で改めて M13 を見てみましたが，素晴らしく見応えがあります．ピントリングを合わせてから振動が収まったあとの球状星団を構成する星々の粒子感，TAK3.3-UWでもしっかりと中心付近の星々が分離して見え，まるで星の海に飛び込んだようで思わず声が漏れます．M27, M57 などの星雲もひじょうによく見えます．本撮影中の暇な時間に眼視に興じるのは QOL が爆上がりです．<br><img src="/images/00000063-2022-first-half-lookback01/05.jpg" alt="朝霧での観望風景"><br>そんなこんなで朝になると，駐車場の外でドッグイベントのための車列とワンちゃんの鳴き声が凄まじいことになっていました．このままいても迷惑だろうと思い片付けて撤収．精進湖から358号，36号と通って南アルプス方面へと向かいます．</p><p>やまなみの湯で温泉をキメて，ネカフェで充電．すっかり連泊スタイルが板についてきた気がします．<br><img src="/images/00000063-2022-first-half-lookback01/tw05.jpg" alt="やまなみの湯"><br><img src="/images/00000063-2022-first-half-lookback01/tw06.jpg" alt="実家のような安心感"><br>この日は充電器を忘れてしまいましたが，ケーブルはあったのでなんとかなりました．危うく二泊目の原村を諦めるハメになるところでした．<br>夕方頃まで寝られたので，コンビニに寄って原村へ．到着すると，月齢も渋いからか人は全然いません．<br><img src="/images/00000063-2022-first-half-lookback01/tw07.jpg" alt="貸し切り原村"><br>途中からH君ら御一行が現地合流してくれると連絡があったので，コンビニで買い忘れたサラダをパシってのんびり過ごします．</p><p><img src="/images/00000063-2022-first-half-lookback01/06.jpg" alt="原村での観望風景"><br>連泊で疲れていたので，撮影機材は温度順応で出しつつも月が沈むまでは眼視のみ．アンタレス付近が撮影できるようになったあたりで撮影開始．途中，原村在住の町おこし団体のスタッフさん的な方がお子さんたちといらして，TOA で月を見てもらいました．小学生に（ほぼ）無収差を見せつけるという大変教育によろしくないことをしたような気がしますが，少しでも宇宙分野に興味をもってもらえたら嬉しいですね．</p><p><img src="/images/00000063-2022-first-half-lookback01/work2022-02.jpg" alt="へびつかい座ロー星付近"></p><div style="text-align: center;">「へびつかい座ロー星付近」<br>2022年4月9日～4月11日 静岡県朝霧高原，長野県原村まるやち湖駐車場<br>FSQ-85EDP+Flattener 1.01X<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*107<br>Optolong L-ProTotal: 321min<br>タカハシ EM-11 Temma2 Jr. + MGEN-3<br>Adobe Lightroom CC / Photoshop CC / PixInsight<br><a href="https://www.astrobin.com/wnm4uv/C/">AstroBin</a><br><br></div><p>というわけで二晩の星果はこんな感じ．原村ではピントを合わせた際に固定ネジを締め忘れ，なんならカメラ回転装置の固定ねじすら締め忘れているというグダグダっぷりで，星の周りに赤っぽいハロが盛大に出てしまいました．QHY カメラを APT で速いフレームレートでライブビューする手段は（ソフトを調べてみましたが）今のところなさそうなので，毎回 SharpCap に移動しているのですが，普通に考えて一つのソフトで完結させたほうが絶対良いよなあという気がします．ソフト切り替えは毎回ミスの温床です．まだ使ったことないソフト（NINAとか？）に手を出してみようかなあとも思っています．<br>薄明開始と同時にサクッと帰宅開始．中央道では毎回初狩手前あたりで眠気の限界を迎えるんですが分かる人いますか？特に機材フル稼働で二連泊だと腰もイカれててなかなかキツイ．安全第一です．</p><h3 id="2022年5月-清里-原村連泊"><a href="#2022年5月-清里-原村連泊" class="headerlink" title="2022年5月　清里-原村連泊"></a>2022年5月　清里-原村連泊</h3><p>5月は心の奥底に眠っていたS字星雲を取りたい気持ちが復活してきたので連泊でこれを撮りに行きたいと思います．東京と群馬で友人を拾って関越道経由で野辺山方面に向かいます．<br>萌木の村でカレーを食べて，初日は清里美し森です．</p><p><img src="/images/00000063-2022-first-half-lookback01/07.jpg" alt="やっぱこれだね"></p><p>到着すると星はなんとなく見えていますが雪が舞っています．止んだので TOA を出したらまた舞い始めます，嫌がらせか．結局12時頃まで待機していたらすっかり晴れて，この日の露光は完遂．</p><p><img src="/images/00000063-2022-first-half-lookback01/tw08.jpg" alt="美し森での観望風景"></p><p>そうそう，FSQ 撮影の微光星に一様な色ズレが出てしまうのが最近の悩みなのですが，個人的に鏡筒以降のスケアリングが合ってないのかなあと勝手に考えています．カメラかフィルターが光軸に対して斜めになっているとか．正直ガチ撮影からはもう身を引きたいのであまり考えないようにはしているのですが，この日は二泊を使って試しにフィルターありとなしで撮影してみることにしました．<br>清里では青白いきれいな流星を見ることができました．他の場所でも何人か見ている方がいらしたようです．<br><img src="/images/00000063-2022-first-half-lookback01/tw09.jpg" alt="流星観測報告"></p><p>翌朝は花いずみの湯で温泉に入り（ここはサウナはそこそこで水風呂が冷たい），中村農場で親子丼を食べ，諏訪のネカフェで充電です．<br><img src="/images/00000063-2022-first-half-lookback01/08.jpg" alt="やっぱこれだね"><br><img src="/images/00000063-2022-first-half-lookback01/09.jpg" alt="デジャブ"><br><a href="https://twitter.com/haya_astronomy">Ramb</a>君とどこかで落ち合えたらいいね～という話をしていたのですが，目が覚めると彼はもう原村に到着しているようです．しかも4月の時と違って先客が多いみたいです．そりゃ新月期の GW ですからねぇ．寝ている仲間を叩き起こして急いで向かいます．なんとか日の入り前に到着．車と撮影場所を確保できました．<br><img src="/images/00000063-2022-first-half-lookback01/10.jpg" alt="この日の原村は人が多かった"><br>この日は Ramb くんの他に 渡部君，<a href="https://twitter.com/antales">流れ星君</a>もいらしていました．せっかくなので 135mm を使ってもらいました．どうせ僕は使う予定もありませんでしたので．<br><img src="/images/00000063-2022-first-half-lookback01/tw10.jpg" alt="135mm使ってもらったヨ"><br><a href="https://twitter.com/Watanabe_3010/status/1523558987878191104">(元ツイート)</a><br>日付も変わり，本撮影開始後1時間あまりで体力の限界がきたので薄明前まで全機材を放置して寝てしまっていました．<br>起きてのんびり撤収．帰りは 299 号を使って小海リエックスの温泉に寄ります（ここはサウナがめちゃめちゃ暑くて水風呂がそこそこ温くて心地よい）．去年の星祭りぶりですね．食べ物を取ると眠くなるので食べ物を取らずに群馬方面に向かいつつ，途中で妙義に寄りました．中之嶽神社と妙義神社の本殿まで登らされました．なんか食べてから行けばよかった（）．</p><p>撮ったものの紹介を忘れていました．S字状暗黒星雲のあたりです．ぶっちゃけこのあたりは中途半端な焦点距離で撮ってもあまり面白くないかもしれません()．でも <a href="https://sorae.info/astronomy/20201130-barnard68-vlt.html">Barnard 68</a> などの存在も確認できるのでそれは面白いかも．</p><p><img src="/images/00000063-2022-first-half-lookback01/work2022-03.jpg" alt="S字状暗黒星雲周辺"></p><div style="text-align: center;">「S字状暗黒星雲周辺」<br>2022年5月3日～5月5日 山梨県美し森駐車場，長野県原村まるやち湖駐車場<br>FSQ-85EDP+Flattener 1.01X<br>QHY268C<br>Gain 26/Offset 50/-20℃/180s*113<br>Optolong L-Pro(56 frames)Total: 339min<br>タカハシ EM-11 Temma2 Jr. + MGEN-3<br>Adobe Lightroom CC / Photoshop CC / PixInsight<br><a href="https://www.astrobin.com/n8rwxf/">AstroBin</a><br><br></div>色ズレについては先程フィルターが原因？ということで書いたのですが，改めてフィルターなしの画像を見ても若干ズレている感じがします．![色ズレの様子](images/00000063-2022-first-half-lookback01/11.jpg)これは光学系か～？と思いつつ，一様な色ズレっぽく今のところソフト的に補正できる（RGBごとに Star Align して再合成）ので入院は時間がある時にしたいと思います()．5月後半は栃木県へ行きましたが，記事がめちゃくちゃ長くなってきたので分けたいと思います．それではまた次回．]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> カメラ </tag>
            
            <tag> 機材 </tag>
            
            <tag> レンズ </tag>
            
            <tag> 鏡筒 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初めての（？）月面撮影</title>
      <link href="/2022/02/19/00000062-lunar-photo/"/>
      <url>/2022/02/19/00000062-lunar-photo/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>最近本業の研究が佳境に入っていますが，たまには望遠鏡を出して息抜きしようということで，自宅前でも簡単に撮れる月を撮ってみることにしました．<br>動画で撮って，スタック処理するのは初めてです．</p><span id="more"></span><h3 id="TOAで撮影"><a href="#TOAで撮影" class="headerlink" title="TOAで撮影"></a>TOAで撮影</h3><p>せっかく TOA があるので，これで撮りたいと思ったのですが，そもそも直焦点での撮影システムを考えることからスタートです（※別機会で以前に僕がM42を撮影していたことをご存じの方がいらっしゃるかと思いますが，その際には借り物の補正レンズを使用していたため，直焦点ではありませんでした）．<br>さて，TOA のシステムチャートを眺めてみると，直焦点撮影は</p><p>TOAドローチューブ→50.8アダプタ屈折用(TOA に付属)→CA-35(50.8)→カメラマウント DX-WR (EOS) (EF マウントの場合)</p><p>となります．CA-35(50.8)が手元にないのでダメかと思いましたが，FSQ-85 の付属パーツでもいけるのではないかということに気づき，実験してみることにしました．</p><p>TOAドローチューブ→フィルターボックス補助リング(TSA-102)→CA-35(TSA-102)→カメラマウント DX-WR (EOS)</p><p>という感じです．</p><p><img src="/images/00000062-lunar-photo/01.jpg" alt="TOA に FSQ の付属パーツをつけてみる"></p><h3 id="早速撮影"><a href="#早速撮影" class="headerlink" title="早速撮影"></a>早速撮影</h3><p>月がのぼってきたので早速試してみます．カメラはQHY-268C (フランジバックは Canon EF 44mmに調整)です．結論から述べると「少し延長すれば月撮影は問題ない」ということになりました．延長がないと，ドローチューブを最も繰り出した状態でジャスピンかどうか判断に困るような状態になります．<br>カメラ側に厚さ 4mm のリングを追加で取り付けて、確実にピントが出ることは確認できました．一眼ではこうはいかないかもしれません．また，ケラレ等も目立ったものはありませんでしたが，淡いものを同じシステムで撮影し強調した際にどうなるかは別途検証が必要かもしれません．機会があったらやってみます．</p><p><img src="/images/00000062-lunar-photo/02.jpg" alt="ピントが出るように調整後"></p><p>SharpCap での動画撮影にもあまり慣れていなかったので1時間ほど奮闘し，なんとか動画撮影に成功．AVI ファイルは重いです．6秒ほどの動画ですが，8GB くらいあります笑．月を動画で真面目に撮影する場合は空き容量の多い PC が必須ですね．</p><p><img src="/images/00000062-lunar-photo/03.jpg" alt="AVI はファイルサイズが大きい"></p><p>AutoStakkert!3 で動画解析とスタッキングをして，PixInsight で処理した結果以下のようになりました．</p><p><img src="/images/00000062-lunar-photo/work.jpg" alt="月齢18くらいの月"></p><div style="text-align: center;">「月齢18くらいの月」<br>2022年2月18日 23時53分 神奈川県 鎌倉市<br>TOA-130NS 直焦点<br>QHY268C<br>Gain 80/Offset 20/-20℃/SharpCap動画 6秒<br>タカハシ EM-200 TemmaPC Jr.<br>AutoStakkert!3 / PixInsight / Photoshop CC<br><br></div><p>解像感を高めるために Deconvolution を2回ほどかけてみています．彩度もマシマシ．露光時間を誤ったためか，一部の明るい構造の階調が少し飛んでしまっていますが，なかなかいいのではないかと思います．<br>AutoStakkert! も初めて使ってみました．使い方についてはブログ記事が豊富にあり，それを見ながらであればあまり頭を使わなくてもちゃんと処理してくれる印象がありましたが，Drizzleも入れていたせいか処理に少し時間がかかりました（10分くらい？）．<br>好シーイングの時に，もっと拡大構図で撮影できたら楽しいんだろうなあと思いますが，またの機会にということで，それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 天体写真 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> 機材 </tag>
            
            <tag> 鏡筒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PJSR (PixInsight Script) コーディングTips</title>
      <link href="/2022/02/05/00000061-pjsr-coding-tips/"/>
      <url>/2022/02/05/00000061-pjsr-coding-tips/</url>
      
        <content type="html"><![CDATA[<h3 id="前置き"><a href="#前置き" class="headerlink" title="前置き"></a>前置き</h3><p><a href="https://twitter.com/PG1wvzio4yvwFXW">あぷらなーと氏</a>発案の「クールファイル補正法」を行う PixInsight スクリプトを書いてみました．スクリプトの導入方法や使い方の詳細は，<a href="https://snct-astro.hatenadiary.jp/entry/2022/02/05/172636">本件言い出しっぺのだいこもん氏の記事</a>をご覧ください．<br>GitHub は<a href="https://github.com/snagahiro/CPI_script">こちら</a>．バグなどを見つけた方は Pull Request を出すか Issue にスレ立てをお願いいたします．<br>本記事では，PixInsight スクリプト（PJSR）を書く上で気づいたことを短くまとめておきます．これから PJSR を触る人の参考になると良いかなと思います．</p><span id="more"></span><h3 id="GUI-とか"><a href="#GUI-とか" class="headerlink" title="GUI とか"></a>GUI とか</h3><p>PJSR には未だドキュメントがなく，正直とっつきにくい印象を受けます．基本的には PI のObject Explorer で型や名前を見たり，既存のスクリプトを読んだりして理解していくことになるかと思います．<br>GUI については，以下の Youtube の動画が参考になるようですが，正直 Sizer の概念など，完全に理解しきれていない部分もあります．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/aMwMOGpKE_k" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h3 id="Image-View-ImageWindow"><a href="#Image-View-ImageWindow" class="headerlink" title="Image, View, ImageWindow"></a>Image, View, ImageWindow</h3><p>PJSR で画像処理スクリプトを書く上で触れる概念として Image, View, ImageWindow があるようです．Image &lt; View &lt; ImageWindow の順で大きなオブジェクトであり，View は image (Image型，read-only) を，ImageWindow は mainView (View型，read-only) と currentView (View型，read-only でない) の2つをプロパティオブジェクトとしてもっています．currentView は画面表示のために使う View なので，オリジナルのデータに処理を施す場合は使いません．<br>ファイルから開く場合は，ImageWindow でとりあえず開くっぽいです．</p><pre><code class="hljs JavaScript"><span class="hljs-keyword">var</span> imageWindow = <span class="hljs-title class_">ImageWindow</span>.<span class="hljs-title function_">open</span>(filePath)[<span class="hljs-number">0</span>];</code></pre><p>こんな感じ，何故か配列で返ってくるようで先頭を取り出すとうまくいきます．<br>PI でこの imageWindow を見るには，</p><pre><code class="hljs JavaScript">imageWindow.<span class="hljs-title function_">show</span>();</code></pre><p>とするだけです．よゆーですね．<br>イメージデータにアクセスするのも簡単です．</p><pre><code class="hljs JavaScript"><span class="hljs-keyword">var</span> image = imageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-property">image</span>;</code></pre><p>ここまではいいのですが，問題は Image から ImageWindow を作り出すことです．<br>画像の演算自体は Image オブジェクトでやります．クールファイル補正法ではスタック画像（Image オブジェクト）が新しく生成されるわけですから，これをなんとか ImageWindow にしたい．しかし，ImageWindow.mainView.image は read-only です．単純な代入などによる改変はうまくいきません．<br>そこで，以下のようなコードで解決しました．</p><pre><code class="hljs JavaScript"><span class="hljs-keyword">var</span> someImage = <span class="hljs-title class_">Image</span>(width, height);<span class="hljs-comment">/* some process to someImage */</span><span class="hljs-keyword">var</span> someImageWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageWindow</span>(someImage.<span class="hljs-property">width</span>, someImage.<span class="hljs-property">height</span>);someImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-title function_">beginProcess</span>();someImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-property">image</span>.<span class="hljs-title function_">assign</span>(someImage);someImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-title function_">endProcess</span>();</code></pre><p>beginProcess と endProcess で挟むことと，代入演算子 &#x3D; ではなく assign メソッドを使うことがミソみたいです．<br>これで someImageWindow の image プロパティに someImage をぶちこむことができるので，show などを呼べば内容を確認したり，外部ファイルに出力したりできます．</p><pre><code class="hljs JavaScript">someImageWindow.<span class="hljs-title function_">show</span>();someImageWindow.<span class="hljs-title function_">saveAs</span>(outputFilePath, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);</code></pre><p>こんなふうにね．今回ココが分かるまでに一番時間を使った…．</p><h3 id="Image-の演算"><a href="#Image-の演算" class="headerlink" title="Image の演算"></a>Image の演算</h3><p>Image 型の画像を演算するには Image.apply を使います．</p><pre><code class="hljs JavaScript">#include&lt;pjsr/<span class="hljs-title class_">ImageOp</span>.<span class="hljs-property">jsh</span>&gt;<span class="hljs-keyword">var</span> lhsImage = <span class="hljs-title class_">Image</span>(width, height);<span class="hljs-keyword">var</span> rhsImage = <span class="hljs-title class_">Image</span>(width, height);<span class="hljs-keyword">var</span> n = someNumber;lhsImage.<span class="hljs-title function_">apply</span>(rhsImage, <span class="hljs-title class_">ImageOp</span>_Type); <span class="hljs-comment">//画像同士の演算</span>lhsImage.<span class="hljs-title function_">apply</span>(n, <span class="hljs-title class_">ImageOp</span>_Type);        <span class="hljs-comment">//画像と定数の演算</span></code></pre><p>ImageOp_Type には，単純な四則演算（ImageOp_Add, ImageOp_Sub, ImageOp_Mul, ImageOp_Div）に加えて，累乗（ImageOp_Pow）やビット演算なんかもあります．詳しくは Object Explorer→Image→Constants を見てね．画像同士の演算の場合，サイズが違うとどうなるのかは試していませんが，たぶんエラーが返ってくるんじゃないかなと思います．<br>これまでのことを組み合わせれば，ファイルリストから位置合わせなしの加算平均は例えば以下のように書けます．</p><pre><code class="hljs JavaScript"><span class="hljs-keyword">var</span> currentImageWindow = <span class="hljs-literal">null</span>;<span class="hljs-keyword">var</span> stackedImage = <span class="hljs-literal">null</span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputFiles</span>.<span class="hljs-property">length</span>; ++i) &#123;  currentImageWindow = <span class="hljs-title class_">ImageWindow</span>.<span class="hljs-title function_">open</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputFiles</span>[i])[<span class="hljs-number">0</span>];  <span class="hljs-keyword">if</span> (stackedImage == <span class="hljs-literal">null</span>) &#123;    stackedImage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>(currentImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-property">image</span>.<span class="hljs-property">width</span>, currentImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-property">image</span>.<span class="hljs-property">height</span>);  &#125;  <span class="hljs-comment">//stacking</span>  currentImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-title function_">beginProcess</span>();  <span class="hljs-keyword">var</span> image = currentImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-property">image</span>;  image.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputFiles</span>.<span class="hljs-property">length</span>, <span class="hljs-title class_">ImageOp</span>_Div); <span class="hljs-comment">//divide current image</span>  stackedImage.<span class="hljs-title function_">apply</span>(image, <span class="hljs-title class_">ImageOp</span>_Add);           <span class="hljs-comment">//and add</span>  currentImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-title function_">endProcess</span>();&#125;<span class="hljs-comment">//Convert to ImageWindow Object</span><span class="hljs-keyword">var</span> stackedImageWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageWindow</span>(stackedImage.<span class="hljs-property">width</span>, stackedImage.<span class="hljs-property">height</span>);stackedImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-title function_">beginProcess</span>();stackedImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-property">image</span>.<span class="hljs-title function_">assign</span>(stackedImage);stackedImageWindow.<span class="hljs-property">mainView</span>.<span class="hljs-title function_">endProcess</span>();stackedImageWindow.<span class="hljs-title function_">show</span>();</code></pre><p>currentImageWindow.mainView.image に対して破壊的操作をするので，beginProcess と endProcess で挟んでいたりするところにご注目いただければ．<br>位置合わせなしのこれくらいの内容であれば，ImageIntegration を使ってパラメタを指定して書くよりもスッキリするんじゃないかと思いますが，そこは個人によるということで…．</p><p>今回は以上です．PI スクリプトを書く人の参考になればいいなと思います．<br>では皆様，よいコーディングライフを！</p><h3 id="2022-02-20-追記-engine-部分の記述位置"><a href="#2022-02-20-追記-engine-部分の記述位置" class="headerlink" title="2022.02.20 追記 engine 部分の記述位置"></a>2022.02.20 追記 engine 部分の記述位置</h3>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STF, HT, DBE を実装する</title>
      <link href="/2022/01/23/00000060-stf-ht-dbe/"/>
      <url>/2022/01/23/00000060-stf-ht-dbe/</url>
      
        <content type="html"><![CDATA[<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>久々のブログ更新になります．<br>自作ソフトウェアに PixInsight (以下PI) における STF, HT, DBE 相当の機能を追加しました．</p><span id="more"></span><h3 id="STF"><a href="#STF" class="headerlink" title="STF"></a>STF</h3><p>ScreenTransferFunction（STF）は，PI をお使いの方であればお馴染みかと思います．<br>画像のデータではなく，伝達関数（Transfer Function，データを色や透明度などの(主に)視覚情報へ伝達するための関数）を変更することで，画像の色味などを変えるプロセスです．<br>本来伝達関数は大変奥の深い概念ではありますが，普通の RGB 画像やモノクロ画像でやることは基本的にシャドウ，中間調，ハイライトの3つのパラメタ値を変更し，それら値を元にできる Midtone Transfer Function (MTF) を変更することになります．<br>MTF は <a href="https://pixinsight.com/doc/tools/HistogramTransformation/HistogramTransformation.html">PI のドキュメント</a>や<a href="https://www.youtube.com/watch?time_continue=606&v=bugdgOojxJc&feature=emb_logo">蒼月城さんの解説動画</a>にあるように，データの値が中間調と等しい時にちょうど0.5となるようにいい感じにストレッチする関数で，次のような式で計算されます．</p><p>$$ \rm{MTF}(\it{x}\rm{;} \it{m}\rm{)} &#x3D; \begin{cases}<br>0 \hspace{40px} (x &#x3D; 0) \<br>\frac{1}{2} \hspace{40px} (x &#x3D; m)\<br>1 \hspace{40px} (x &#x3D; 1)\<br>\frac{(m-1)x}{(2m - 1)x - m} \hspace{40px} (\rm{otherwise})<br>\end{cases} $$<br><a href="https://pixinsight.com/doc/tools/HistogramTransformation/HistogramTransformation.html">PI のドキュメント</a>より</p><p>というわけで，現在のソフトに RGB それぞれのカラーバーを追加，中間調の変更機能も追加して，MTF で変換するようにしました．<br>また，PI の STF プロセスにはいい感じに画像を見やすくオートストレッチする機能もあります．中で何をやっているのかは蒼月城さんが Twitter に書いてくれていました．</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/astroimageproc/status/1472872287104016385"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>これと，<a href="https://gitlab.com/pixinsight/PCL/-/blob/master/src/modules/processes/IntensityTransformations/ScreenTransferFunctionInterface.cpp#L1068">PCL のソースコード</a>を参考にすれば，ぶっちゃけ実装することは可能になります．<br><video src="https://dabokun.github.io/images/00000060-stf-ht-dbe/01.mp4" width="720" height="720" controls></video><br>できました．M42 が一気に見やすくなったところは，オートストレッチをかけているところになります．</p><h3 id="HT"><a href="#HT" class="headerlink" title="HT"></a>HT</h3><p>Histogram Transformation（HT） は STF と密接に関係しています．STF では伝達関数を変更しましたが，HT では STF での結果になるようにデータの方を変更します．基本的な考え方は STF での伝達関数の適用と同じと言っていいです．<br>PI ではもう少しパラメタがありますが，今回はそれらは無視して，RGB チャネルそれぞれのシャドウ，中間調，ハイライトの合計9つのパラメタ値をもとにデータを変更します．<br><video src="https://dabokun.github.io/images/00000060-stf-ht-dbe/02.mp4" width="720" height="720" controls></video><br>完成形はこのようになります．左下のウィンドウでは先ほどと同様に STF で伝達関数を変更するのみですが，右下のウィンドウでは実際のデータのほうが STF の変更に沿うように変換されています．右下のウィンドウのヒストグラムがちゃんと変更されているところに注目していただければ，データが変わっているということがおわかりかと思います．ユーザは9つのパラメタ値と連動する変数を上のビジュアルプログラム上に追加し，それを HT のノードに渡すようにすることで，このような処理を実現します．<br>STF と HT については変更箇所が多いのでソースコードを載せることはしません．</p><h3 id="DBE"><a href="#DBE" class="headerlink" title="DBE"></a>DBE</h3><p>DynamicBackgroundEstimation (DBE) は STF や HT とは毛色が違うものの，よく使われるプロセスです．以前 <a href="https://twitter.com/Mazic_tell_Arts">takashi さん</a>が <a href="https://github.com/takashi-154/DynamicBackgroundEstimation">Python で DBE するプログラム</a>を作られていたので，似た感じの処理ができるものを自分も作ることにしました．<br>本質的にやることは比較的単純で，</p><ol><li>ユーザ指定の点群から付近の20*20くらいのボックスを切り出してボックス内の中央値を計算する</li><li>中央値に合うように画像を曲面フィッティングしてバックグラウンドモデルとする</li><li>背景を元画像から引く（または割る）</li></ol><p>となります．<br>フィッティングはシンプルに最小二乗法を使っています．<a href="https://inak-eng.jp/2020/06/04/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%97%E6%B3%95%E3%81%AB%E3%82%88%E3%82%8B2%E6%AC%A1%E5%85%83%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E6%9B%B2%E9%9D%A2%E8%BF%91%E4%BC%BC/">こちらのブログ</a>が詳しいです．<br>以下のようなコードで実装しました．</p><pre><code class="hljs Rust">dynamic_background_extraction&lt;IOValue, IOErr&gt;(    image: Image, points: Roi,    function_degree: Integer = <span class="hljs-number">1</span>) <span class="hljs-punctuation">-&gt;</span> Image, Image &#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">tag</span> = image.<span class="hljs-title function_ invoke__">tag</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">dim</span> = image.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">dim</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">dim</span> = dim.<span class="hljs-title function_ invoke__">as_array_view</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">func_plus_one</span> = (*function_degree + <span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;    <span class="hljs-keyword">let</span> <span class="hljs-variable">params_right_num</span> = func_plus_one * func_plus_one;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">params_right</span> = <span class="hljs-type">Vec</span>::&lt;<span class="hljs-type">f32</span>&gt;::<span class="hljs-title function_ invoke__">with_capacity</span>(params_right_num * dim[<span class="hljs-number">0</span>]);    params_right.<span class="hljs-title function_ invoke__">resize</span>(params_right_num * dim[<span class="hljs-number">0</span>], <span class="hljs-number">0.0</span>);    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">params_right</span> = Array::<span class="hljs-title function_ invoke__">from_vec</span>(params_right).<span class="hljs-title function_ invoke__">into_shape</span>(      (dim[<span class="hljs-number">0</span>], func_plus_one, func_plus_one)).<span class="hljs-title function_ invoke__">unwrap</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">params_left_num</span> = params_right_num * params_right_num;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">params_left</span> = <span class="hljs-type">Vec</span>::&lt;<span class="hljs-type">f32</span>&gt;::<span class="hljs-title function_ invoke__">with_capacity</span>(params_left_num * dim[<span class="hljs-number">0</span>]);    params_left.<span class="hljs-title function_ invoke__">resize</span>(params_left_num * dim[<span class="hljs-number">0</span>], <span class="hljs-number">0.0</span>);    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">params_left</span> = Array::<span class="hljs-title function_ invoke__">from_vec</span>(params_left).<span class="hljs-title function_ invoke__">into_shape</span>(      (dim[<span class="hljs-number">0</span>], func_plus_one, func_plus_one, func_plus_one, func_plus_one)).<span class="hljs-title function_ invoke__">unwrap</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">model</span> = image.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">clone</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">out</span> = image.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">clone</span>();    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..dim[<span class="hljs-number">0</span>] &#123;        <span class="hljs-keyword">for</span> <span class="hljs-variable">takes_y</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..func_plus_one &#123;            <span class="hljs-keyword">for</span> <span class="hljs-variable">takes_x</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..func_plus_one &#123;                <span class="hljs-keyword">for</span> <span class="hljs-variable">inner_takes_y</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..func_plus_one &#123;                    <span class="hljs-keyword">for</span> <span class="hljs-variable">inner_takes_x</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..func_plus_one &#123;                        <span class="hljs-keyword">let</span> <span class="hljs-variable">data</span> = points.<span class="hljs-title function_ invoke__">filterx</span>(image.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">slice</span>(s![i, .., ..]));                        <span class="hljs-keyword">for</span> ((x, y), _) <span class="hljs-keyword">in</span> data &#123;                            <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = x <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> / dim[<span class="hljs-number">2</span>] <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;                            <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = y <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> / dim[<span class="hljs-number">1</span>] <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;                            params_left[[i, takes_y, takes_x,                               inner_takes_y, inner_takes_x]] +=                               <span class="hljs-number">1.0</span>                               * (x <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>).<span class="hljs-title function_ invoke__">powf</span>((takes_x + inner_takes_x) <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>)                              * (y <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>).<span class="hljs-title function_ invoke__">powf</span>((takes_y + inner_takes_y) <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>);                        &#125;                    &#125;                &#125;                <span class="hljs-keyword">let</span> <span class="hljs-variable">data</span> = points.<span class="hljs-title function_ invoke__">filterx</span>(image.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">slice</span>(s![i, .., ..]));                <span class="hljs-keyword">for</span> ((x, y), _) <span class="hljs-keyword">in</span> data &#123;                    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">boxdata</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();                    <span class="hljs-keyword">for</span> <span class="hljs-variable">xx</span> <span class="hljs-keyword">in</span> (x-<span class="hljs-number">10</span>).<span class="hljs-title function_ invoke__">max</span>(<span class="hljs-number">0</span>)..(x+<span class="hljs-number">10</span>).<span class="hljs-title function_ invoke__">min</span>(dim[<span class="hljs-number">2</span>]) &#123;                        <span class="hljs-keyword">for</span> <span class="hljs-variable">yy</span> <span class="hljs-keyword">in</span> (y-<span class="hljs-number">10</span>).<span class="hljs-title function_ invoke__">max</span>(<span class="hljs-number">0</span>)..(y+<span class="hljs-number">10</span>).<span class="hljs-title function_ invoke__">min</span>(dim[<span class="hljs-number">1</span>]) &#123;                            boxdata.<span class="hljs-title function_ invoke__">push</span>(model[[i, yy, xx]]);                        &#125;                    &#125;                    boxdata.<span class="hljs-title function_ invoke__">sort_by</span>(|a, b| a.<span class="hljs-title function_ invoke__">partial_cmp</span>(b).<span class="hljs-title function_ invoke__">unwrap</span>());                    <span class="hljs-keyword">let</span> <span class="hljs-variable">mid</span> = boxdata.<span class="hljs-title function_ invoke__">len</span>() / <span class="hljs-number">2</span>;                    <span class="hljs-keyword">let</span> <span class="hljs-variable">med</span> = <span class="hljs-keyword">if</span> boxdata.<span class="hljs-title function_ invoke__">len</span>() % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &#123;                        (boxdata[mid] + boxdata[mid - <span class="hljs-number">1</span>]) / <span class="hljs-number">2.0</span>                    &#125; <span class="hljs-keyword">else</span> &#123;                        boxdata[mid]                    &#125;;                    boxdata.<span class="hljs-title function_ invoke__">clear</span>();                    <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = x <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> / dim[<span class="hljs-number">2</span>] <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;                    <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = y <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> / dim[<span class="hljs-number">1</span>] <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;                    params_right[[i, takes_y, takes_x]] +=                       med                       * (x <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>).<span class="hljs-title function_ invoke__">powf</span>(takes_x <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>)                      * (y <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>).<span class="hljs-title function_ invoke__">powf</span>(takes_y <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>);                &#125;            &#125;        &#125;        <span class="hljs-keyword">let</span> <span class="hljs-variable">params_left_vec</span> = params_left.<span class="hljs-title function_ invoke__">index_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>), i)                                          .<span class="hljs-title function_ invoke__">to_owned</span>().<span class="hljs-title function_ invoke__">into_raw_vec</span>();        <span class="hljs-keyword">let</span> <span class="hljs-variable">params_right_vec</span> = params_right.<span class="hljs-title function_ invoke__">index_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>), i)                                          .<span class="hljs-title function_ invoke__">to_owned</span>().<span class="hljs-title function_ invoke__">into_raw_vec</span>();        <span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = DMatrix::<span class="hljs-title function_ invoke__">from_vec</span>(params_right_num, params_right_num, params_left_vec);        <span class="hljs-keyword">let</span> <span class="hljs-variable">b</span> = DVector::<span class="hljs-title function_ invoke__">from</span>(params_right_vec.<span class="hljs-title function_ invoke__">clone</span>());        <span class="hljs-keyword">let</span> <span class="hljs-variable">decomp</span> = a.<span class="hljs-title function_ invoke__">lu</span>();        <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = decomp.<span class="hljs-title function_ invoke__">solve</span>(&amp;b);        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">sol</span> = DVector::<span class="hljs-title function_ invoke__">from</span>(params_right_vec);        <span class="hljs-keyword">match</span> x &#123;            <span class="hljs-title function_ invoke__">Some</span>(vector) =&gt; sol = vector,            <span class="hljs-literal">None</span> =&gt; &#123;                <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;failure&quot;</span>);            &#125;,        &#125;;        <span class="hljs-keyword">for</span> <span class="hljs-variable">y</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..dim[<span class="hljs-number">1</span>] &#123;            <span class="hljs-keyword">for</span> <span class="hljs-variable">x</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..dim[<span class="hljs-number">2</span>] &#123;                <span class="hljs-keyword">let</span> <span class="hljs-variable">xx</span> = x <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> / dim[<span class="hljs-number">2</span>] <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;                <span class="hljs-keyword">let</span> <span class="hljs-variable">yy</span> = y <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> / dim[<span class="hljs-number">1</span>] <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;                model[[i, y, x]] = <span class="hljs-number">0.0</span>;                <span class="hljs-keyword">for</span> <span class="hljs-variable">takes_x</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..func_plus_one &#123;                    <span class="hljs-keyword">for</span> <span class="hljs-variable">takes_y</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..func_plus_one &#123;                        model[[i, y, x]] +=                           sol[takes_y * func_plus_one + takes_x]                          * (xx.<span class="hljs-title function_ invoke__">powf</span>(takes_x <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>))                          * yy.<span class="hljs-title function_ invoke__">powf</span>(takes_y <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>);                    &#125;                &#125;                out[[i, y, x]] -= model[[i, y, x]];            &#125;        &#125;    &#125;                        <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array_and_tag</span>(Dimensioned::<span class="hljs-title function_ invoke__">new</span>(        out,        Unit::<span class="hljs-literal">None</span>,    ), tag.<span class="hljs-title function_ invoke__">clone</span>()))),         <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array_and_tag</span>(Dimensioned::<span class="hljs-title function_ invoke__">new</span>(        model,        Unit::<span class="hljs-literal">None</span>,    ), tag.<span class="hljs-title function_ invoke__">clone</span>())))]&#125;</code></pre><p>実際に動かしてみると以下のようになります．</p><p><img src="/images/00000060-stf-ht-dbe/dbe.png" alt="DBE"></p><p>画像は <a href="https://github.com/takashi-154/DynamicBackgroundEstimation/blob/8720542afcc79cf825d3869f4d1c750d3a3215f1/image.fts">takashi さんのデータ</a>を無許可でお借りしています．ごめんなさいm(_ _)m（Github で MIT ライセンスで公開されているデータなのできっと許してくれるはず）まだビジュアルプログラムのノードにオーサーシップを明示することはしていないのですが，その暁には彼の名前は必ず含めるつもりです．他にもテスト用の、被りがあるデータを提供してくださる方を募集しております。^^<br>上の例では点群は <a href="https://github.com/takashi-154/DynamicBackgroundEstimation/blob/5a59a2e52de35ae9c99caf73b484a0c82f791bbf/pointlist.npy">takashi さんのもの</a>と同様で，二次曲面でフィッティングしています．左下が元画像，右上が推定されたバックグラウンドモデル，右下がモデルを引き算した結果です．元画像よりも強調していますが，明るさの勾配は除去できているのではないでしょうか．</p><h3 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h3><p>さて，今回は後処理における三種類のプロセスを作ってみました．まだまだデータを仕上げるには必要なプロセスがたくさんありますが，その中身についてちまちま勉強して追実装するのはなかなか楽しいので今後も続けていきたいと思います．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【やってしまった！】TOA-130NS 導入の裏？話</title>
      <link href="/2021/11/10/00000059-toa130ns/"/>
      <url>/2021/11/10/00000059-toa130ns/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは、書きたい遠征記など色々溜まってはいるのですが，この度なんと TOA を導入してしまったので，先にご報告として書いておきます．</p><span id="more"></span><h3 id="動画で報告"><a href="#動画で報告" class="headerlink" title="動画で報告"></a>動画で報告</h3><p>あいさつから動画一発目が開封動画ですまない…という感じなのですが，一生に一度あるかないかの大物！ということで動画にしました．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/QHfbwZOFI2Y" frameborder="0" loading="lazy" allowfullscreen></iframe></div><p>動画でも述べていますが，バンドは純正ではなく MoreBlue さんの 156mm に（現在リンクが見当たりません），<a href="http://www.moreblue.co.jp/shopdetail/000000000599/">ロスマンディ規格のドデカいアリガタ</a>で，<a href="https://www.starbase.co.jp/SHOP/SB-A135.html">赤道儀側にこれまたデカいアリミゾ</a>を利用しています．重心が赤道儀側に下がるばかりでなく，鏡筒上側にスペーサーを挟んでトッププレートを入れることで，頑張れば片手でも持てるようになります．<br>試しに乗せてみましたが，筋力のない自分でもそれなりに楽に乗せることができました．</p><p><img src="/images/00000059-toa130ns/01.jpg" alt="EM-200 + TOA-130NS"><br><img src="/images/00000059-toa130ns/02.jpg" alt="TOA-130NSの前玉"><br>かっこいい…</p><p>アイピースも TAK3.3-UW に NAV7-SW と，抜かりない感じにできたのではないかと思います．本気で眼視やりてー！という意気込みです．<br><a href="/2020/08/22/00000037-2020-08-hoshinomura/">昨年8月に TOA で色々見させてもらった</a>時から（あの時は双眼でしたけど笑）ずっと，いつか手にすることは心のなかで決めていたので，まさかこんな早いとは思いませんでしたが，入手できて良かったと思います．<br>天文人口分布の中ではまだギリ（？）若手であろうという自負はありますので，まだ目が衰えないうちにこれでたくさんの天体を見て知り，マニアックな天体の撮影にも繋げていくことで充実した天文ライフを送れればいいかなと勝手に思っています。</p><p>小海で開催される星と自然のフェスタは現状晴れそうなので行こうと思います．ここで月などを眺めるのが TOA のファーストライトになるかと思います．アイドリング禁止がつらいので夜間は会場とは別の場所に移動するかもしれませんが，知り合いやはじめましての方にお会いできるのも含め，今からとても楽しみです～</p><p>ではでは！</p>]]></content>
      
      
      <categories>
          
          <category> 機材 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 機材 </tag>
            
            <tag> 鏡筒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PixInsight Class Library を自作プログラムから呼び出してみる</title>
      <link href="/2021/07/17/00000058-call-pcl/"/>
      <url>/2021/07/17/00000058-call-pcl/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．突然ですが，皆さんは PixInsight Class Library（PCL）をご存知でしょうか．PixInsight 内部の機能がプログラムの形で提供されています．</p><blockquote><p>The PixInsight Class Library (PCL) is a C++ development framework to build PixInsight modules.<br>PixInsight modules are special shared libraries (.so files on FreeBSD and Linux; .dylib under macOS; .dll files on Windows) that communicate with the PixInsight core application through a high-level API provided by PCL. Along with a core communication API, PCL includes a comprehensive set of image processing algorithms, ranging from geometrical transformations to multiscale analysis algorithms, most of them available as multithreaded parallel implementations. PCL provides also rigorous and efficient implementations of essential astronomical algorithms, including state-of-the-art solar system ephemerides, vector astrometry, and reduction of positions of solar system and stellar objects.<br><a href="https://pixinsight.com/developer/pcl/">PixInsight Class Library</a>― by Pleiades Astrophoto S.L.</p></blockquote><p>私は普段 Rust と呼ばれるちょっとモダンなプログラミング言語を使っているのですが，C++ との Foreign Function Interface（FFI）を学んでいるうちに，あれ，これ PCL も呼べるんじゃね？ということに気づいたので，せっかくならやってみることにしました．</p><span id="more"></span><h3 id="やり方"><a href="#やり方" class="headerlink" title="やり方"></a>やり方</h3><p>PCL には Hello World のようなサンプルがないので，PCL から Version を表示する機能を呼んでやることを目標にします．<br><img src="/images/00000058-call-pcl/01.jpg" alt="このへんのコードを呼び出したい">↑のような PCL のコードを呼び出したいです．</p><p>以下にやり方をつらつらと書いていきます．<br>OS は Windows 10 で，Git と Rust コンパイラ，CMake，Visual Studio（2019 Community）がインストールされていることが前提です．<br>Rust から C++ を呼ぶのは若干めんどくさく，</p><ol><li><p>呼び出したい機能が格納されたスタティックライブラリを用意する．</p></li><li><p>C++ 側のインタフェースを用意して，1.のライブラリとリンクしてビルドする．（今回はCMakeを使います）</p></li><li><p>C++ 側のヘッダーから Rust のバインディングを自動生成する．（bindgen crate を使います）</p></li><li><p>Rust の本番アプリケーションから呼び出す．</p></li></ol><p>みたいな流れになります．<br>2，3については，Rust の build script を使ってビルド時によしなにやってくれるようにします．<br>順番にやっていきましょう．</p><h4 id="呼び出したい機能が格納されたスタティックライブラリを用意"><a href="#呼び出したい機能が格納されたスタティックライブラリを用意" class="headerlink" title="呼び出したい機能が格納されたスタティックライブラリを用意"></a>呼び出したい機能が格納されたスタティックライブラリを用意</h4><p>呼び出したい機能が格納されたスタティックライブラリとは，PCL のことです．ただ，PCL はソースコードの形で提供されているため，頑張ってビルドします．<br>まず PCL リポジトリをクローン（ローカルにダウンロード）</p><pre><code class="hljs plaintext">$ git clone https://gitlab.com/pixinsight/PCL/</code></pre><p>PCLDIR, PCLBINDIR64, PCLLIBDIR64, PCLINCDIR, PCLSRCDIRにパスを設定．（<a href="https://gitlab.com/pixinsight/PCL/">こちら</a>を参考に）<br>Visual Studio 2019 を開き，\PCL\src\pcl\windows\vc16\PCL.vcxproj を開く．ビルドの設定をRelease, x64にします．そのままやるとこの後エラーが出るので，以下のコードをちょっと修正しました．</p><pre><code class="hljs c++"><span class="hljs-comment">//DrizzleData.cpp 481行目あたり，</span>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( element.<span class="hljs-built_in">Name</span>() == <span class="hljs-string">&quot;CFASourceImage&quot;</span> )  &#123;    <span class="hljs-comment">// optional</span>    m_cfaSourceFilePath = element.<span class="hljs-built_in">Text</span>().<span class="hljs-built_in">Trimmed</span>();    m_cfaSourcePattern = element.<span class="hljs-built_in">AttributeValue</span>( <span class="hljs-string">&quot;pattern&quot;</span> );    String channel = element.<span class="hljs-built_in">AttributeValue</span>( <span class="hljs-string">&quot;channel&quot;</span> );    <span class="hljs-keyword">if</span> ( !channel.<span class="hljs-built_in">IsEmpty</span>() )      <span class="hljs-comment">//intへのキャストを追加，たぶんオーバーロードがうまくいってない</span>      m_cfaSourceChannel = <span class="hljs-built_in">Range</span>( (<span class="hljs-type">int</span>)channel.<span class="hljs-built_in">ToInt</span>(), <span class="hljs-number">-1</span>, int32_max );  &#125;</code></pre><p>コンパイラによってはうまく動くのかもしれませんが，少なくとも自分の環境では無理でしたので，今のとここのような修正になっています．<br>ビルドすると，PCLLIBDIR64 に設定したパスにスタティックライブラリができます．</p><p><img src="/images/00000058-call-pcl/02.jpg" alt="PCLのスタティックライブラリができた！"></p><h4 id="C-側のインタフェースを用意，PCL-とリンク，Rust-バインディングの自動生成"><a href="#C-側のインタフェースを用意，PCL-とリンク，Rust-バインディングの自動生成" class="headerlink" title="C++ 側のインタフェースを用意，PCL とリンク，Rust バインディングの自動生成"></a>C++ 側のインタフェースを用意，PCL とリンク，Rust バインディングの自動生成</h4><p>次に，C++ 側のインタフェースを用意します．</p><pre><code class="hljs c++"><span class="hljs-comment">//pcl_cpp.hpp</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pcl_rs</span>&#123;<span class="hljs-keyword">public</span>:    <span class="hljs-built_in">Pcl_rs</span>();    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_pcl_version</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;&#125;;</code></pre><pre><code class="hljs c++"><span class="hljs-comment">//pcl_cpp.cpp</span><span class="hljs-meta">#<span class="hljs-keyword">define</span> __PCL_WINDOWS</span><span class="hljs-comment">// include the local headers</span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcl/Version.h&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;pcl_cpp.hpp&quot;</span></span>Pcl_rs::<span class="hljs-built_in">Pcl_rs</span>() &#123;&#125;<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Pcl_rs::print_pcl_version</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span><span class="hljs-function"></span>&#123;  <span class="hljs-comment">//ここでpclの機能を実際に呼んでます</span>  std::cout &lt;&lt; pcl::Version::<span class="hljs-built_in">AsString</span>() &lt;&lt; std::endl;  <span class="hljs-keyword">return</span>;&#125;</code></pre><p>pcl_cpp.cpp は CMake を使ってビルドするので，CMakeList.txtを用意します．</p><pre><code class="hljs CMake"><span class="hljs-comment">#CMakeList.txt</span><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.5</span>)<span class="hljs-keyword">project</span>(pcl_cpp)<span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">11</span>)<span class="hljs-keyword">set</span>(<span class="hljs-keyword">TARGET</span> pcl_cpp)<span class="hljs-comment">#自身の環境によって変更してください</span><span class="hljs-keyword">include_directories</span>(/path/to/PCLINCDIR)<span class="hljs-keyword">add_library</span>(<span class="hljs-variable">$&#123;TARGET&#125;</span>  STATIC    pcl_cpp.cpp)<span class="hljs-keyword">target_link_libraries</span>(<span class="hljs-variable">$&#123;TARGET&#125;</span>  PRIVATE)<span class="hljs-keyword">install</span> (TARGETS <span class="hljs-variable">$&#123;TARGET&#125;</span> DESTINATION .)</code></pre><p>Rust の ライブラリプロジェクトを用意します．これが本番アプリケーションという体です．<br>ライブラリプロジェクトなので，別のプログラムに移植することは簡単です．</p><pre><code class="hljs plaintext">$ cargo new pcl-rs --lib //ライブラリプロジェクトを作る</code></pre><p>上に書いた3つを以下のように配置します．</p><pre><code class="hljs plaintext">├─pcl-rs│  │  build.rs│  │  Cargo.toml│  ││  ├─src│  │  │  lib.rs│  │  │  main.rs│  │  │  │  │  └─pcl_cpp│  │          CMakeLists.txt│  │          pcl_cpp.cpp│  │          pcl_cpp.hpp</code></pre><p>触れていないファイルがいつかありますが後述します．<br>build.rs が 本番アプリケーションのビルド時に走るスクリプトです．ここでCMake，bindgenを使って，Rust から pcl_cpp.cpp の機能を使えるようにします．<br>まず Cargo.toml に依存ライブラリを記載．</p><pre><code class="hljs plaintext"># Cargo.toml[dependencies]libc = &quot;0.2.51&quot;[build-dependencies]cc = &quot;1.0.35&quot;bindgen = &quot;0.52&quot;libc = &quot;0.2.51&quot;cmake = &quot;0.1&quot;</code></pre><p>ビルドスクリプトを書いていきます．</p><pre><code class="hljs Rust"><span class="hljs-comment">//build.rs</span><span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> bindgen;<span class="hljs-keyword">use</span> cmake;<span class="hljs-keyword">use</span> std::env;<span class="hljs-keyword">use</span> std::path::PathBuf;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;    <span class="hljs-comment">//pcl_cpp.cppかpcl_hpp.cppが変更された場合に走る</span>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;cargo:rerun-if-changed=src/pcl_cpp/pcl_cpp.cpp&quot;</span>);    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;cargo:rerun-if-changed=src/pcl_cpp/pcl_cpp.hpp&quot;</span>);        <span class="hljs-keyword">let</span> <span class="hljs-variable">out_path</span> = PathBuf::<span class="hljs-title function_ invoke__">from</span>(env::<span class="hljs-title function_ invoke__">var</span>(<span class="hljs-string">&quot;OUT_DIR&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>());    <span class="hljs-keyword">let</span> <span class="hljs-variable">out_path</span> = out_path.<span class="hljs-title function_ invoke__">to_str</span>().<span class="hljs-title function_ invoke__">unwrap</span>();    <span class="hljs-comment">//リンクするライブラリを探すパス</span>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;cargo:rustc-link-search=&#123;&#125;/build/Release/&quot;</span>, out_path);    <span class="hljs-comment">//自身の環境によって変更してください</span>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;cargo:rustc-link-search=native=/path/to/PCLLIBDIR64&quot;</span>);    <span class="hljs-comment">//Windows でビルドする場合に必要</span>    <span class="hljs-comment">//User32.Lib の場所を指定</span>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;cargo:rustc-link-search=native=C:/Program Files (x86)/Windows Kits/10/Lib/10.0.19041.0/um/x64&quot;</span>);        <span class="hljs-comment">//リンクするライブラリ</span>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;cargo:rustc-link-lib=static=pcl_cpp&quot;</span>);    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;cargo:rustc-link-lib=static=PCL-pxi&quot;</span>);    <span class="hljs-comment">//Windows でビルドする場合に必要</span>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;cargo:rustc-link-lib=static=User32&quot;</span>);    <span class="hljs-keyword">let</span> <span class="hljs-variable">out_path</span> = PathBuf::<span class="hljs-title function_ invoke__">from</span>(env::<span class="hljs-title function_ invoke__">var</span>(<span class="hljs-string">&quot;OUT_DIR&quot;</span>).<span class="hljs-title function_ invoke__">unwrap</span>());    <span class="hljs-keyword">let</span> <span class="hljs-variable">_dst</span> = cmake::Config::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;src/pcl_cpp&quot;</span>).<span class="hljs-title function_ invoke__">generator</span>(<span class="hljs-string">&quot;Visual Studio 16 2019&quot;</span>).<span class="hljs-title function_ invoke__">build</span>();         <span class="hljs-comment">//pcl_cpp.hpp からバインディング生成</span>    <span class="hljs-keyword">let</span> <span class="hljs-variable">bindings</span> = bindgen::Builder::<span class="hljs-title function_ invoke__">default</span>()        .<span class="hljs-title function_ invoke__">clang_arg</span>(<span class="hljs-string">&quot;-x&quot;</span>)        .<span class="hljs-title function_ invoke__">clang_arg</span>(<span class="hljs-string">&quot;c++&quot;</span>)        .<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&quot;src/pcl_cpp/pcl_cpp.hpp&quot;</span>)        .<span class="hljs-title function_ invoke__">parse_callbacks</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(bindgen::CargoCallbacks))        .<span class="hljs-title function_ invoke__">generate</span>()        .<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">&quot;Unable to generate bindings&quot;</span>);    bindings        .<span class="hljs-title function_ invoke__">write_to_file</span>(out_path.<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">&quot;pcl_cpp.rs&quot;</span>))        .<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">&quot;Couldn&#x27;t write bindings!&quot;</span>);&#125;</code></pre><p>スクリプトの細かい説明は省きますが，ビルドスクリプトが走ると，OUT_DIR で設定されたパス以下に pcl_cpp.rs バインディングが自動生成されます．<br>ここに，C++側のクラス，メソッドの情報などが入っています．</p><h4 id="Rust-の本番アプリケーションから呼出し"><a href="#Rust-の本番アプリケーションから呼出し" class="headerlink" title="Rust の本番アプリケーションから呼出し"></a>Rust の本番アプリケーションから呼出し</h4><p>あとは Rust 側のライブラリでこのバインディングを読み込めばOKです．<br>lib.rs に以下を書いて，</p><pre><code class="hljs Rust"><span class="hljs-comment">//lib.rs</span><span class="hljs-meta">#![allow(non_upper_case_globals)]</span><span class="hljs-meta">#![allow(non_camel_case_types)]</span><span class="hljs-meta">#![allow(non_snake_case)]</span><span class="hljs-meta">#![allow(dead_code)]</span>include!(<span class="hljs-built_in">concat!</span>(<span class="hljs-built_in">env!</span>(<span class="hljs-string">&quot;OUT_DIR&quot;</span>), <span class="hljs-string">&quot;/pcl_cpp.rs&quot;</span>));<span class="hljs-comment">//自動生成されたバインディングを読み込む</span></code></pre><p>main アプリケーションで実際に使ってみます．</p><pre><code class="hljs Rust"><span class="hljs-comment">//main.rs</span><span class="hljs-keyword">use</span> pcl_rs::Pcl_rs;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;  <span class="hljs-comment">//本番アプリケーションではこのように unsafe ブロックで囲んで使う</span>  <span class="hljs-keyword">unsafe</span> &#123;      <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">my_pcl</span> = Pcl_rs::<span class="hljs-title function_ invoke__">new</span>();      my_pcl.<span class="hljs-title function_ invoke__">print_pcl_version</span>();  &#125;&#125;</code></pre><p>Rust でビルドすると…</p><p><img src="/images/00000058-call-pcl/03.jpg" alt="PCL のバージョンが出た！"></p><p>Rust で作ったライブラリから PCL を呼び出して，バージョンが出ました！めでたしめでたし．</p><h3 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h3><p>まだ PCL でどれだけのことができるのかわかっていませんが，Rust 側とのデータのコミュニケーションができれば，PCL で提供されている数多くの機能を自作プログラムから呼び出して利用することができるようになりました．<br>これは実質 PixInsight のすべての力を手に入れたと言っても過言ではない…？<br>今回のテクニックは，PCL 以外にも C++ で書かれたライブラリを利用する時に有用です．<br>また何か発展があればブログに書きたいと思います！<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 画像処理 </tag>
            
            <tag> Rust </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>動画投稿デビュー（のちょっと裏話）</title>
      <link href="/2021/06/27/00000057-douga-01/"/>
      <url>/2021/06/27/00000057-douga-01/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは，突然ですが Youtube に動画投稿してみました．<br>もともと，「観測遠征×ボイロ（ボイスロイドの略）って誰もやってなさそうだしやりたいな…」と思っていたので，その第一歩として簡単な動画を作ってみました．</p><span id="more"></span><h3 id="作ってみる"><a href="#作ってみる" class="headerlink" title="作ってみる"></a>作ってみる</h3><p>Aviutl を使った動画作成の経験は何度かあったので，ボイロくらいだったら一日もあれば作れるやろ！と思いましたが，素材を集めたり，ちゃんとしたものを作ろうと思うと一分のものを作るだけでも一苦労．<br><img src="/images/00000057-douga-01/01.jpg" alt="編集画面">編集画面，使いこなせてないのでごちゃごちゃｗ<br>まだ慣れていないソフトがあったりもして，結局2日くらいのうち暇な時間をかけて一本目を作ることができましたが，扱いやすい素材などがたくさん転がっていて，ありがたい時代になったものです…(？)．</p><div class="video-container"><iframe src="https://www.youtube.com/embed/2E9TI3p3N8E" frameborder="0" loading="lazy" allowfullscreen></iframe></div><p>なんのこともないただの自己紹介動画です．次回から本格的に車載や撮影の模様をお届けできればいいなと思っています．</p><p>あまり頻繁に更新できないかもしれませんが（目指せ月１更新），もしよければチャンネル登録，高評価をよろしくお願いいたします！m(_ _)m</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArcsinhStretch について調べて，追実装してみる</title>
      <link href="/2021/06/16/00000056-aflak-improc-03/"/>
      <url>/2021/06/16/00000056-aflak-improc-03/</url>
      
        <content type="html"><![CDATA[<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>最近 PixInsight を導入して使い始めました．このソフトには ArcsinhStretch というストレッチ機能があり，結局どういうことをやっているのか少し気になったので調べてみました．</p><span id="more"></span><h3 id="「色を保つ」とは"><a href="#「色を保つ」とは" class="headerlink" title="「色を保つ」とは"></a>「色を保つ」とは</h3><p>よく ArcsinhStretch では色が保持されるといいます．これはどういうことでしょうか．<br>まずは普通のストレッチを考えてみましょう．普通は次のようなアルゴリズムでストレッチをします．<br>変換前を$$r, g, b$$，変換後を$$R, G, B$$とおきましょう．</p><p>$$R &#x3D; f(r),  G &#x3D; f(g),  B &#x3D; f(b)$$<br>$$<br>f(x) &#x3D; \begin{cases}<br>    0 &amp; (x &lt; m) \<br>    \frac{F(x - m)}{F(M - m)} &amp; (m \le x \le M) \<br>    1 &amp; (x &gt; M)<br>  \end{cases}<br>$$</p><p>関数$$F$$は通常$$\log$$や√，線形関数などがありますが，色が保持されるとは，変換後の$$R, G, B$$の比率が変換前の$$r, g, b$$と変わらないことを言います．<br>このことは，色相と彩度が変わらないということです．これらを式で見てみると，<br>$$Max &#x3D; \max(R, G, B), Min &#x3D; \min(R, G, B)$$<br>$$H &#x3D; \begin{cases}<br>  60 * ((G - B) &#x2F; (Max - Min)) ,; \max(R, G, B) &#x3D; R \<br>  60 * ((B - R) &#x2F; (Max - Min)) + 120 ,; \max(R, G, B) &#x3D; G \<br>  60 * ((R - G) &#x2F; (Max - Min)) + 240 ,; \max(R, G, B) &#x3D; B<br>    \end{cases}<br>$$<br>$$S &#x3D; (Max - Min) &#x2F; Max$$<br>であることから，たとえば，$$R’ &#x3D; k \cdot R, G’ &#x3D; k \cdot G, B’ &#x3D; k \cdot B (k &gt; 0)$$であるような変換であれば，三色の値の大小関係も保たれ（最大値は$$Max’ &#x3D; k \cdot Max$$，最小値は$$Min’ &#x3D; k \cdot Min$$），色相と彩度が基本的に保たれる，つまり色が保たれるということになります．<br>$$H: \frac{60 * (G’ - B’)}{Max’ - Min’} &#x3D; \frac{60 * (k \cdot G - k \cdot B)}{k \cdot Max - k \cdot Min} &#x3D; \frac{60 * (G - B)}{Max - Min}$$<br>（上の式については他のケースについても同様）<br>$$S: \frac{Max’ - Min’}{Max’} &#x3D; \frac{k \cdot Max - k \cdot Min}{k \cdot Max} &#x3D; \frac{Max - Min}{Max}$$<br>この$$k$$（ストレッチファクターとも呼びます）を決めるときに，Arcsinh関数を使うことで，ArcsinhStretchが実現できます．したがって，（自分は勘違いしていたのですが）Arcsinh関数を使うことと色が保持されることは特に関係はありません．<br>どの画素に対しても$$R, G, B$$に対して同じ$$k$$を掛け算するようなストレッチ方法であれば，必ず色は保持されます．</p><blockquote><p>The key point is that to preserve color the calculated pixel multiplier must be simultaneously applied to all channels (R,G,B) in the pixel.<br><a href="https://pixinsight.com/doc/tools/ArcsinhStretch/ArcsinhStretch.html#__Possible_Future_Work__">ArcsinhStretch</a>― by Mark Shelley</p></blockquote><h3 id="どう計算するか"><a href="#どう計算するか" class="headerlink" title="どう計算するか"></a>どう計算するか</h3><p>実際に$$k$$を決めるのは，次のような式で決めます．<br>$$L &#x3D; \mathrm{Luminance}(R, G, B)$$<br>$$k &#x3D; \frac{\mathrm{arcsinh}(\beta \cdot L)}{L \cdot \mathrm{arcsinh}(\beta)}$$<br>画素ごとにストレッチファクターを一意に決めるため，輝度の値を使っています．前述したように，上の式の Arcsinh 関数は，別に他の関数でも問題ありません．実際，PixInsight でも他の関数でもできるようにしたいという Future Work が書かれています．<br>輝度―$$k$$のグラフを書くと，こんな感じの概形になります．<br><img src="/images/00000056-aflak-improc-03/01.jpg" alt="輝度―kのグラフ"><br>上では$$\beta &#x3D; 10$$としてみました．この値が大きくなればなるほど，$$x &#x3D; 0$$での値も大きくなるように変化します．この値は$$\frac{\beta}{\mathrm{arcsinh}(\beta)}$$となるようです．<br>暗い画素ほどより大きい値で，明るい画素ほど$$1$$に近い値でスケーリングされます．これにより，明るい星まわりの階調をなるべく保存しつつ，暗い部分を持ち上げていることになりますね．<br>直観的な操作を提供するため，PixInsight では0から1000までの値で$$k$$の最大値（上のグラフで言うところの$$x &#x3D; 0$$での値だと思われます）をユーザ入力としています．</p><h3 id="実際に実装してみる"><a href="#実際に実装してみる" class="headerlink" title="実際に実装してみる"></a>実際に実装してみる</h3><p>上の$$k$$を決める式を$$\beta$$について解く方法は少なくとも僕にはわかりませんでしたので，とりあえず$$\beta$$をユーザ入力とするような ArcsinhStretch を実装してみたいと思います．<br>コードはこんな感じ…．</p><pre><code class="hljs Rust"><span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> libm;<span class="hljs-comment">/*省略*/</span><span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_apply_arcsinh_stretch</span>(    image: &amp;WcsArray,    beta: <span class="hljs-type">f32</span>,) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    dim_is!(image, <span class="hljs-number">3</span>)?;    <span class="hljs-keyword">let</span> <span class="hljs-variable">image</span> = image.<span class="hljs-title function_ invoke__">scalar</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">out</span> = image.<span class="hljs-title function_ invoke__">clone</span>();    <span class="hljs-keyword">for</span> (j, slice) <span class="hljs-keyword">in</span> image.<span class="hljs-title function_ invoke__">axis_iter</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)).<span class="hljs-title function_ invoke__">enumerate</span>() &#123;        <span class="hljs-keyword">for</span> (i, data) <span class="hljs-keyword">in</span> slice.<span class="hljs-title function_ invoke__">axis_iter</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)).<span class="hljs-title function_ invoke__">enumerate</span>() &#123;            <span class="hljs-comment">//R, G, B値は予め[0, 1]の範囲で正規化されているものとする</span>            <span class="hljs-comment">//画素の輝度値を求める．</span>            <span class="hljs-keyword">let</span> <span class="hljs-variable">l</span> = (data[<span class="hljs-number">0</span>] + data[<span class="hljs-number">1</span>] + data[<span class="hljs-number">2</span>]) / <span class="hljs-number">3.0</span>;            <span class="hljs-comment">//画素のk（ストレッチファクター）の値を決める</span>            <span class="hljs-keyword">let</span> <span class="hljs-variable">s_fact</span> = libm::<span class="hljs-title function_ invoke__">asinh</span>((l * beta) <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>) / (l <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> * libm::<span class="hljs-title function_ invoke__">asinh</span>(beta <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>));            <span class="hljs-keyword">let</span> <span class="hljs-variable">s_fact</span> = s_fact <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;                        out[[<span class="hljs-number">0</span>, j, i]] = s_fact * data[<span class="hljs-number">0</span>];            out[[<span class="hljs-number">1</span>, j, i]] = s_fact * data[<span class="hljs-number">1</span>];            out[[<span class="hljs-number">2</span>, j, i]] = s_fact * data[<span class="hljs-number">2</span>];        &#125;    &#125;    <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array</span>(Dimensioned::<span class="hljs-title function_ invoke__">new</span>(        out,        Unit::<span class="hljs-literal">None</span>,    ))))&#125;</code></pre><p><img src="/images/00000056-aflak-improc-03/02.jpg" alt="それっぽい">それっぽく持ち上がっています．</p><p>いかがでしたでしょうか？まとめると</p><ul><li>色を保つような変換の一つとして，画素の各RGBを同じ値だけ定数倍するような変換がある．この値は画素ごとに違う分には当然問題ない．</li><li>この定数として輝度の Arcsinh（をスケーリングしたもの）を利用すると，ArcsinhStretch を実現できる．</li><li>必ずしも Arcsinh を利用しなければ色を保てないわけではない．logやsqrtを利用しても何か面白い結果が得られるかも．</li></ul><p>ということがわかりました．arcsinh 以外の関数でストレッチした場合にどうなるかも見ていきたいと思いますが，今回のところはこれまで．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 画像処理 </tag>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2021年6月 天城（L-eXtreme デビュー）</title>
      <link href="/2021/06/11/00000055-2021-06-amagi/"/>
      <url>/2021/06/11/00000055-2021-06-amagi/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは，ようやく先月までの遠征記を書くことができました．<br>先日も梅雨入り前最後の晴れ間を利用してソロで天城高原に行ってきました．<br>今回は少し前に購入していた Optolong L-eXtreme filter のデビューが目的でした．</p><span id="more"></span><h3 id="天城へ"><a href="#天城へ" class="headerlink" title="天城へ"></a>天城へ</h3><p>天気も上々だったので16時頃に自宅を出発，薄明終わりも遅いので海沿いの有料道路（真鶴道路，熱海ビーチライン）は使わずに天城へ直行．<br>途中遅めの昼ごはんを食べつつ行ったので3時間くらいかかりましたが，それでも20時前には駐車場に到着できました．<br>今回は道中鹿が目立ちました．暖かいので活発になっているのでしょうか．</p><h4 id="到着！ところが…"><a href="#到着！ところが…" class="headerlink" title="到着！ところが…"></a>到着！ところが…</h4><p>テキトーな駐車スペースに停めて機材を下ろし始めましたが，しばらくして</p><p>「あれ？もしかしてここ北極星見えない…？」</p><p>ということに気づきました．駐車場の一番下（奥）の列の北は高い木が生い茂っています．空はまだ少し明るかったので自信がなかったのですが，おそらく木の隙間からなんとか見えるはず！と思いそのまま赤道儀を組みました．<br>すると今度は極望の蓋がガッチガチにねじ込まれていて回してもうんともすんともいいません．10分ほど格闘してなんとか外せました．こういうときに非力な自分がつらい．<br>覗くと本当に木の隙間からギリギリ北極星が顔をのぞかせています，一安心．</p><p>今回狙う天体は網状星雲でしたが，まだ木の陰に隠れていたので上ってくるまでの間夕飯をいただき，撮影開始．</p><p>ところが！今回も冷却 CMOS が繋がりません！ｗ<br>行く前に PC との接続だけは確認したのですが，ソフトと連携してライブビュー撮影するということはしていませんでした．これが言ってしまえば今回の敗因．<br>PC はちょくちょくカメラを認識する（それでもちょくちょくなのだが…）のですが，普段使っているAstroPhotography Tool（APT）との連携が全くうまくいきません．<br>来る際に研究室の友人とのんきに通話していてスマホの通信量を食っていたのも大きな仇になりました．通信制限？で調べごとができないｗ<br>結局，1時間強格闘した後，安定版のドライバーをインストールしてなんとかカメラの制御には至りましたが，<a href="/2021/04/25/00000051-mgen-3-resolved/">MGEN との連携</a>がうまくいかず，ディザリング撮影ができませんでした．MGEN.APP経由でカメラも認識しているはずなのに，なぜかMGENとの連携が切れてもカメラは使えるという不思議な状態で撮影するハメに…ちなみに MGEN でのオートガイド自体はカメラとの連携を必要としないので，しっかりできている模様．．とりあえずディザは諦めて，縮緬ノイズが出たらやむなしと思って露光時間を稼ぐことに専念しました．<br>ここまでじゃじゃ馬だともうなんか諦めがつくというものです．流石にディザのテストまで直前にやるわけにはいかないですが，ライブビュー見られて安定して繋がるかは最低限チェックしてから遠征に出るように次回から心がけるしかないと思われます．</p><h4 id="L-eXtreme-デビュー"><a href="#L-eXtreme-デビュー" class="headerlink" title="L-eXtreme デビュー"></a>L-eXtreme デビュー</h4><p>てんやわんやあったのですが，本撮影でプレビュー画面に網状星雲が出てきたときはやはりテンションが上がります．<br><img src="/images/00000055-2021-06-amagi/tw01.jpg" alt="うぉー！">めっちゃ淡いところまで見えてますやん…（鼻血）<br>結局，合計で2時間程度の撮影となりました．Offset の値をきちんと設定しないまま撮影したり（しかもバグで値が FITS に記録されないという罠）などのトラブルは他にもありましたが，ナローバンドデビューはなんとか成功したと言って良いでしょう．  </p><p><img src="/images/00000055-2021-06-amagi/work.jpg" alt="網状星雲"></p><div style="text-align: center;">「NGC 6960 網状星雲 Veil Nebula」<br>2021年6月10日 0時19分～ 静岡県 天城高原にて<br>FSQ-85EDP + フラットナー1.01X F5.4<br>QHY268C + Optolong L-eXtreme filter<br>Gain 56/Offset 76/-10℃/480s*6<br>Gain 56/Offset 106/-10℃/480s*10<br>Total: 128min<br>タカハシ EM-11 Temma2 Jr. + MGEN-3<br>Adobe Lightroom CC / Photoshop CC / PixInsight<br><br></div>いつかこういう網状撮ってみたい～と思っていたようなものに仕上がったのでとても満足です．今回は大部分の処理をPixInsight でやってみました．PCC も ArcsinhStretch もある程度うまくいってくれた感じがあります．前回と違って星を小さく処理も少しかけてみています．ArcsinhStretch は正直赤が鮮やかになりすぎてしまう感じがあります．．これは好みの問題ですが…．![BPPを終えたとこ](tw02.jpg)BPP までを終えたところです．Integration が終わって STF を適用して星雲がめちゃめちゃ見えた瞬間が一番気持ちがいい（至言）．キャリブレーションは結構（特にライトダークは Offset 106 のものを3枚現地で撮って当ててるだけ）テキトーです．ちゃんとやれば結果は向上するのかな．今後やってみたいと思います．<h4 id="タイムラプスも"><a href="#タイムラプスも" class="headerlink" title="タイムラプスも"></a>タイムラプスも</h4><p>今回も撮影風景を撮っておきました．現地には <a href="https://twitter.com/Mazic_tell_Arts">takashi さん</a>もいらしていたので1時過ぎから薄明開始くらいまで少しお話させていただきました．</p><p><video src="https://dabokun.github.io/images/00000055-2021-06-amagi/timelaps.mp4" width="720" height="720" controls></video>takashi さんも写ってらっしゃいます（なんか自分だけ座って撮影作業してる図が申し訳ないな…）．</p><p><img src="/images/00000055-2021-06-amagi/self.jpg" alt="地鶏">それから今回撮った自撮り．結構気に入りました．</p><p>夜中，上の駐車場から若そうな人たちの話し声が聞こえたので話しかけてみたらどこかの天文部の方でした．この晴れ間を逃すまいといらしたそうで，皆さん考えることは同じようです．<br>朝になって，また上の駐車場にいた（別の）若い人たちにその天文部の人たちと間違えて話しかけてしまったのですが，どうやら星見はあまりやったことがないらしく，わざわざ下の駐車場にいた僕のところまでやってきて機材について色々と聞いてくれました．ウイルス禍の中でもなるべく人に迷惑をかけない形で同世代の人が活発に天文活動したり，星見に興味をもってくれているということがわかった嬉しい一日でした．</p><p><img src="/images/00000055-2021-06-amagi/tw03.jpg" alt="遠笠山道路からの富士山">梅雨明けはいっぱい星見したいのでたくさん晴れてください（祈願）．<br>それでは！</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2021年5月 美ヶ原</title>
      <link href="/2021/06/11/00000054-2021-05-utsukushi/"/>
      <url>/2021/06/11/00000054-2021-05-utsukushi/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>前回に引き続き，5月にも美ヶ原に行ってきました．<br>またかよと思われるかもしれませんが，他にチャンスのありそうな場所がなかったのです…（´・ω・｀）</p><span id="more"></span><h3 id="一晩目"><a href="#一晩目" class="headerlink" title="一晩目"></a>一晩目</h3><p>以前から一緒に星見に行こう行こうと話していた坂本真綾ファン2名をどうしても連れて行きたかったので，一晩目は土日に設定．<br>といっても前回同様天気予報は微妙…　夜半すぎから晴れるかも，という予報であった分前回のほうがマシという有様でしたが，これを逃したら月齢的に厳しいし，次月の6月は梅雨入り，次はないぞと思ったので強行することに．<br>連れていく人のうち一人は東京在住だったので八王子まで出てきてもらって拾いましたが，もう一人は群馬在住ということで，久々に関越道を使って北側から攻めることにします．こちらを通って美ヶ原に行くのは初めてのことです．<br>行こうとしていた佐久の蕎麦屋がウイルスの影響か閉まっていたので別の店を探して家系ラーメンを食べ，4月にも来た麓のコンビニで少し買い出しをしてから山道を登り，途中立派なカモシカの歓迎を受けつつ21時頃に美ヶ原に到着．<br><img src="/images/00000054-2021-05-utsukushi/s01.jpg" alt="とんこつ塩ラーメン"><br>案の定の曇り，というか風，強い．</p><p>現地では観測地開拓に<a href="https://twitter.com/656nm_freak">M&amp;Mさん</a>もいらしており，少しだけお話できました．<br>やることもないので行ったことがない美術館の方に足を運んでみましたが，こちらのほうが開けている分，上田市や小諸市の方へ吹き下ろす風がさらに強く，車のドアを開けた瞬間風でドアがもげるかというレベルで勢いよく開くなど…．M&amp;Mさんも来ていましたが美術館の周りを歩いているときに彼の車の防風警報(？)が鳴るという始末（台風のときですら鳴ったことがなかったらしい…）．彫刻などがある場所にも立ち入れなさそうだったので，こりゃダメだと思いふるさと館のいつもの駐車場に戻りました．<br>チラチラと現れる晴れ間に一瞬星が見えることもありましたが，基本的にずっと曇りっぱなしで本当にやることもなくなったので，古のオタクトーク(？)をしながら仮眠をとったりしていたところ，ちょうど薄明が始まった頃，3時過ぎになんと天の川が見えるくらいには晴れてきました．<br>風も強く，雲も高速で流れていくような環境下で体力的に満身創痍な我々でしたが，なんとか記念写真を撮影したので，愚民天文部の5月の活動記録として報告しておきます（たぶん真綾ファンにしか伝わらない）．</p><p><img src="/images/00000054-2021-05-utsukushi/01.jpg" alt="愚民天文部，2021年5月の活動報告"></p><p>その後8時くらいまで仮眠し，軽井沢→横川鉄道博物館あたりを巡って富岡あたりまで帰還．途中温泉に寄って釜飯を食べました．この辺りが自分は一番眠かった()．<br><img src="/images/00000054-2021-05-utsukushi/s02.jpg" alt="釜飯"><br><img src="/images/00000054-2021-05-utsukushi/s03.jpg" alt="デゴイチ">横川駅にいたデゴイチというやつ．鉄道にはあまり興味がないのですが，初めてSLの汽笛の音を聞けた気がする．<br><img src="/images/00000054-2021-05-utsukushi/s04.jpg" alt="とうげの湯までの路線">とうげの湯駅？まで伸びているっぽい路線です．LiSAの「炎」のジャケットはここで撮影されたらしいです．</p><p>本当は快晴予報の日月に連れて行きたかったのですが，社会人を連れていくわけにもいかず…ちゃんとした晴れの夜はまた梅雨明けに，ということでとある神社で二人とは分かれました．</p><h3 id="二晩目"><a href="#二晩目" class="headerlink" title="二晩目"></a>二晩目</h3><p>自分はというと富岡でガソリンを補充し再度美ヶ原へ．風も昨晩よりは弱いだろうということで夕飯も現地で湯を沸かしてとることに．<br>現地に到着したのは日の入り前だったので，のんびり設営．ファインダー合わせだけして少し休憩．<br><img src="/images/00000054-2021-05-utsukushi/s05.jpg" alt="約10時間ぶりに帰ってきました()"><br>日が暮れても撮りたい対象が登ってくるまで極軸合わせたりはしつつものんびり動いていました．この日はふる里館も営業しており，天気も良かったので，宿の方が解説しているところをこっそり覗いたりしていました．<br>撮影したのは前回撮れなかった青い馬頭です．カメラも問題なく繋がり，ガイドもしっかり機能してくれました．<br>ノーフィルター，片ボケがあったりと粗はありますが，とりあえずそれなりのが撮れたので満足です．</p><p><img src="/images/00000054-2021-05-utsukushi/work.jpg" alt="青い馬頭星雲"></p><div style="text-align: center;">「青い馬頭星雲～ちょいクローズアップ～」<br>2021年5月9日 23時18分～ 長野県 美ヶ原にて<br>FSQ-85EDP + フラットナー1.01X F5.4<br>QHY268C<br>Gain 26/Offset 25/-15℃/360s*32=192min<br>タカハシ EM-11 Temma2 Jr. + MGEN-3<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC / PixInsight<br><br></div><p>そうそう，処理にはPixInsightも使ってみました．蒼月城さんやM&amp;Mさんの動画である程度流れはつかめましたが，まだまだ勉強することが多そうです．特に後処理でマスクとか使ったりする部分…．<br>ついでに撮っていたタイムラプスも置いておきます．冷却 CMOS に直焦撮影を任せるとこのように撮影風景が撮れるのがおトクです．</p><p><video src="https://dabokun.github.io/images/00000054-2021-05-utsukushi/timelaps.mp4" width="720" height="720" controls></video></p><p>この晴れがなぜ昨晩に来なかったのか…とも思いますが後悔しても仕方ありません，星空は逃げない（´・ω・｀）<br>翌朝もきれいに晴れ，カフェラテをキメて諏訪で1時間ほど仮眠をとり，まっすぐ帰りました．<br><img src="/images/00000054-2021-05-utsukushi/s06.jpg" alt="富士山">霧ヶ峰や八ヶ岳などの山々の向こうに顔を覗かせる富士山もバッチリ．</p><p><img src="/images/00000054-2021-05-utsukushi/s07.jpg" alt="カフェラテ"><br><img src="/images/00000054-2021-05-utsukushi/s08.jpg" alt="カモシカ">カモシカ，なぜかこの遠征では普通の鹿を一匹も見てないのにカモシカは三回も見ました．どうなってるんだ…．</p><p><img src="/images/00000054-2021-05-utsukushi/s09.jpg" alt="ビーナスライン">久々にビーナスラインも走れて気持ちよかった．</p><p>また秋くらいに来たいな，美ヶ原．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2021年4月 美ヶ原</title>
      <link href="/2021/06/07/00000053-2021-04-utsukushi/"/>
      <url>/2021/06/07/00000053-2021-04-utsukushi/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>前回の記事と時間が前後してしまいますが，4月に星仲間を連れて美ヶ原まで行ってきた話を少し書いておきます．</p><span id="more"></span><h3 id="美ヶ原へ"><a href="#美ヶ原へ" class="headerlink" title="美ヶ原へ"></a>美ヶ原へ</h3><p>天気予報は正直微妙で，夜になってから晴れるかどうかという雰囲気でした．お昼頃という早めの時間に出発し，星仲間を都内で拾います．彼はなんとEM-200の中古を購入したそうで，そのテストをするらしく，羨ましいことこの上なし．時間はあったので，下道でのんびり甲州街道を勝沼まで走り，勝沼からは高速を使いました．<br>途中ずっと行きたかった萌木の村でカレーを食べ，「次はベーコン乗せて食べたいなあ」などと思いつつ片倉館で湯船に浸かりました．片倉館は閉館ギリギリで，上がるころには受付が閉まっており，風呂上がりのコーヒー牛乳が買えないのでは！？という憂き目にあいましたが，ちょうど締めの作業をしていたっぽい関係者の方がその場で購入させてくれました．ありがたい．</p><p><img src="/images/00000053-2021-04-utsukushi/01.jpg" alt="道中で摂取したもの"></p><p>美ヶ原には21時に到着．ビーナスラインが冬季封鎖だったため，岡谷方面から142号→178号と回り道する必要があります．山道直前にコンビニがあるのはありがたいですが，片道600円程度の有料道を走るので注意が必要です．このあと5月に群馬県経由で美ヶ原に行くことになるのですが，その時は有料道は使用しないことになります．<br>山道ではそこそこ晴れているように見えましたが，着いてみると霧の真っ只中…．ふる里館も改修工事中で人もいるようには見えず，なかなかに怖い状況（実際には管理人の方はいらっしゃるようでした）．ふる里館から歩いて10分くらいのところにある山本小屋は営業していましたが，ロビーには人っ子一人いませんでした．晴れるのをじっと待っていると，細かい氷の粒が舞ってパラパラと窓に当たる音が聞こえます．おいおい，ノーマルだし後輪はけっこうすり減ってるんだけどなあ，朝は大丈夫だろうか，と思いつつ，積もりはしなさそうだったので諦めて駐車場に留まっていると，夜半すぎ，不意に晴れてきました．</p><p>不思議なことに，晴れるのにかかった時間は本当に一瞬に感じられました．標高が低いところも見渡せるところから眺めても，霧が下に滞留している様子もなく，一体どこに霧消してしまったのやら，狐につままれたような気分です．<br>急いで機材を組み立て，露光開始．ついでに星空記念写真も撮影．</p><p><img src="/images/00000053-2021-04-utsukushi/02.jpg" alt="お仲間と星空記念写真"></p><p>青い馬頭を撮っていましたが，このときはまだMGENを正しく使えていなかったのと，寒さと眠さで頭が半分しか動いていなかったというのもあり，当時でいう「謎の追尾エラー」が発生し特に直焦の成果はありませんでした．<br>まあ天の川中心部見えたから良し！<br><a href="/2021/03/25/00000049-super-wide-bino-live/">こちらの記事</a>で主にライブ鑑賞用途として紹介してしまっていたスーパーワイドビノで始めて本格的な星空のもと色々と眺めてみましたが，天の川中心付近のスタークラウドやM8あたりは全く問題なく見え，一段天の川がこちらに近づいたかのような錯覚を覚えました．また天頂付近に近づいていた夏の天の川の星の粒子感もたまらないものがあります．北アメリカ星雲もメキシコ湾と星雲の間の輝度差は逸らし目ではっきりと確認できました．また夏にじっくり使ってみたいと思います．</p><p><img src="/images/00000053-2021-04-utsukushi/03.jpg" alt="機材とぼく"></p><p>朝に撤収し，星仲間が持ってきたジェットボイルでカップ麺を食べ，8時頃まで爆睡．<br>明け方には木々には霜が降りて冬景色が広がり，夜の寒さを物語っていました．たぶん-10℃くらいはいってたと思います．</p><p><img src="/images/00000053-2021-04-utsukushi/04.jpg" alt="明け方の様子">ピンボケしてますけど…</p><p>その後は起きてのんびり北杜市まで戻り，中村農場で親子丼を食べ，たかねの湯という温泉に浸かり，仲間を都内まで送ってから帰宅しました．<br><img src="/images/00000053-2021-04-utsukushi/05.jpg" alt="中村農場の親子丼，ほろほろ鶏…！">朝九時にお店に到着するという…整理券番号は一番でした．</p><p><img src="/images/00000053-2021-04-utsukushi/06.jpg" alt="道の駅南清里，ちょうど鯉のぼりシーズンだった">南清里はちょうど鯉のぼりシーズンでした．ここまで大規模な鯉のぼりあげは初めて見たので圧巻．</p><p><img src="/images/00000053-2021-04-utsukushi/07.jpg" alt="たかねの湯もいいスポットだったのでまた行きたい">たかねの湯，これまで見逃していた良スポットでした．清里の帰りなどに寄れます．</p><p>総運転距離600km．二日間で運転した記録としては最長を更新しました．</p><p><img src="/images/00000053-2021-04-utsukushi/08.jpg" alt="長距離運転記録"></p><p>観光メインな遠征になってしまいましたが，一緒に行く仲間がいればやはり楽しいってもんです．肉体的疲労はありましたが，600kmも苦ではありませんでした．<br>5月にも遠征できたのでまた別記事で．</p><p>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MGEN-3 でのガイドについて</title>
      <link href="/2021/04/25/00000051-mgen-3-resolved/"/>
      <url>/2021/04/25/00000051-mgen-3-resolved/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>前回の冷却CMOSファーストライトでは色々と課題が出てきたのですが，そのうちMGEN については進展がありましたので書いておきます．</p><span id="more"></span><h3 id="MGEN-3-でのガイド"><a href="#MGEN-3-でのガイド" class="headerlink" title="MGEN-3 でのガイド"></a>MGEN-3 でのガイド</h3><p>さて，MGEN がこれまでうまくガイドをしなかった理由は本当にしょうもないものでした．<br>ある時，自宅近辺でガイドのテストをしたい（この直前に美ヶ原で生じた追尾エラーの検証，この遠征についてはまた別記事で）と思い，家から車で30秒の公園で機材を広げて練習していたところ，やはりガイドはうまくいきません．</p><p><img src="/images/00000051-mgen-3-resolved/tw01.jpg" alt="オートガイド失敗の様子">毎回こんな感じです．</p><p>ガイドはじめの数10秒～1,2分はグラフも特に問題ないように見えるのですが，しばらくするとガイド星が吹き飛んでいきガイドをやめてしまいます．<br>うまくいかねーと愚痴りながらTL 上でいろいろな方と話していたとき，私がこのような写真を上げたところ，M&amp;M さんが本質情報を叩き込んでくれました．</p><p><img src="/images/00000051-mgen-3-resolved/tw02.jpg" alt="そもそもキャリブレーションに失敗の様子"></p><p>上のツイッターにも上げた添付画像に問題があります．<br>さあ，どこが問題かわかりますでしょうか？<br>そう！ここです！！<br>。<br>。<br>。<br>。<br>。<br>。<br>。<br>。<br>。<br>。</p><p><img src="/images/00000051-mgen-3-resolved/04.jpg" alt="問題の原因"></p><p>私や M&amp;M さんが使用しているタカハシ EM 赤道儀にはこのようなコントローラがついています．よく見るとライトがついているのがお分かりかと思いますが，ここが赤だとモータを高速で駆動するモード，緑だと低速で駆動するモードなのです．これを見つけた M&amp;M さんが次のように指摘．</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/656nm_freak/status/1383780262174093315"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>よくよく考えれば，高速モードでガイドがうまくいかないのは当然です．高速モードなので動かし始めに注目すると最初はゆっくり，だんだんと高速になります．そのような信号→モータ駆動の精度でキャリブレーションがうまくいくはずがなかったのです．オートガイド初心者の私はこのことに全く気づきませんでした．<br>このようなミスはオートガイドあるあるだそうで，M&amp;M さんや他のリアル知り合いの人でも同じミスをした経験のある方が数名いらっしゃいました．<br>低速モードにしてやり直したところ無事ガイドもうまくいき，8分ほぼ点像を成し遂げました．めでたしめでたし．</p><p><img src="/images/00000051-mgen-3-resolved/tw03.jpg" alt="8分点像を達成．">M&amp;M さんには足を向けて寝られない…．</p><p>本当にしょうもない理由でしたが，もう絶対に忘れることはなさそうです．<br><strong>凄まじい観察眼でミスを発見し指摘していただいた M&amp;M さんには本当に感謝しかありません，ありがとうございました．<br>それから，散々 MGEN がうまくいかないと TL で愚痴ってしまって Lacerta さんごめんなさい．私の MGEN はどこも悪くありませんでした．</strong><br>教訓：<font color=red><b>EM シリーズ赤道儀でのキャリブレーション，オートガイド時は絶対低速モードにすること！</b></font></p><h3 id="MGEN-3-でのディザリング"><a href="#MGEN-3-でのディザリング" class="headerlink" title="MGEN-3 でのディザリング"></a>MGEN-3 でのディザリング</h3><p>オートガイドはとりあえずこれでうまくいくことがわかりましたが，次に生じた疑問は「そういえば今の自分の環境でディザリングってどうやるんだろう？そもそもできるんだろうか？」ということです．<br>MGEN の場合，一眼レフであれば専用のカメラケーブルを使うとディザリングを利用したシャッターコントロールまでできるようになるようですが，冷却 CMOS の場合なにかうまいやり方があるのでしょうか．<br>結論から言うと，ありました．</p><p>参考になったのは以下の記事です．</p><p><a href="https://hiroooo000-blog.hatenablog.com/entry/2020/12/30/001210">20201229 MGEN.APPでPHD2を使ってPCとMGEN3を接続し、リモート操作できました！</a></p><p><a href="https://mgen.app/">MGEN.APP</a> という ASCOM ドライバを利用することで，MGEN を PC から制御できるようになります．PC から制御できるということは，同じく PC から制御している冷却 CMOS ともコミュニケーションできるんじゃないか？と推測できます．<br>上記の記事では PHD2 を利用していますが，私が利用している APT でもやり方は同じです．<br>以下に手順を書いておきます．</p><h4 id="ディザリングの利用手順"><a href="#ディザリングの利用手順" class="headerlink" title="ディザリングの利用手順"></a>ディザリングの利用手順</h4><ol><li>MGEN-3 と冷却 CMOS の電源を入れ，両方とも PC に接続します（MGEN-3は電源ケーブルの USB を PC の USB ポートに繋げばOK）．<br><img src="/images/00000051-mgen-3-resolved/01.jpg" alt="ディザリングの利用手順1"></li><li>APT の「Connect」から「CCD:ASCOM Camera」を選択します．</li><li>OK を選択します．<br><img src="/images/00000051-mgen-3-resolved/02.jpg" alt="ディザリングの利用手順2"></li><li>ドライバの選択画面から「MGEN.APP」を選択します．ここでは冷却 CMOS のドライバはまだ選択しません．</li><li>MGEN.APP の Properties 画面を開きます．</li><li>一番下の Choose から制御したい本撮影用カメラのドライバを選択画面を開きます．</li><li>ここで QHYCCD-Cameras2-Capture を選択します．この画面での Properties からは，いつものようにカメラの設定をいじることもできます．</li><li>OK を選択して 本撮影用の ASCOM Camera Chooser を閉じます．</li><li>Choose の横に選択したカメラドライバ名が出ているはずですので，OK を選択して MGEN.APP Setup を閉じます．</li><li>OK を選択して MGEN.APP 用の ASCOM Camera Chooser を閉じます．接続が試行されます．<br><img src="/images/00000051-mgen-3-resolved/03.jpg" alt="ディザリングの利用手順3"></li><li>接続に成功すると，APT の本画面の他に MGEN-3 のエミュレータ画面とログ画面も開かれます．PC に表示されている MGEN-3 の画面と MGEN-3 本体は同期しています．どちらからでもいいのでディザリングの設定を開いて，Enable にチェックを入れて適当なパラメタ値を設定します．</li><li>これで APT から 露光を Start します．以上です．</li></ol><p>こんなんでできるのか（APT から追加の設定などはいらないのか）と思いましたが，無事にディザリングできていることを確認できました．</p><p><video src="https://dabokun.github.io/images/00000051-mgen-3-resolved/tw01.mp4" width="640" height="360" controls></video><br><img src="/images/00000051-mgen-3-resolved/tw04.jpg" alt="30枚でディザリング">30枚でディザリングした結果の比較明合成です．完璧ですね．</p><p>これでガイドについては自分が思いつく限りでは完全な撮影体制が整ったと思います．やったぜ．<br>ただ，残念ながらいまのところ「ある枠の中でランダムに散らす」設定しかできないように見えます．以前の MGEN では Square Snake（星を矩形の渦巻状になるように散らす）といった設定も可能でしたが，MGEN-3 ではできないようです．今後のファームウェアアップデートなどで追加されるかもしれません（今のファームウェアバージョンは1.10.2です）．<br>それから，ディザリングもうまくいかないこと（確かに散らしてはいるのですが単一方向にしか動いていないように見える）があるようです．</p><p><img src="/images/00000051-mgen-3-resolved/tw05.jpg" alt="ディザリングに失敗したときの結果"></p><p>MGEN の問題ではないかもしれませんが，MGEN-3 ではこれまでどのように星を散らしてきたかの履歴が見れるのでそれを現地で確認したり，コンポジットしてちゃんとできているか確認するのが安全策として有効だと思います．</p><p>以上です，それでは！</p>]]></content>
      
      
      <categories>
          
          <category> 天体写真 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> カメラ </tag>
            
            <tag> 機材 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QHY268C ファーストライト</title>
      <link href="/2021/03/28/00000050-qhy268c-first/"/>
      <url>/2021/03/28/00000050-qhy268c-first/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>先日，届いた QHY268C のファーストをしてきました．<br>このカメラですがかなりのじゃじゃ馬で，一度失敗をしたのですが，とりあえずなんとか使うことができましたという顛末になります．</p><span id="more"></span><h3 id="清里で大失敗"><a href="#清里で大失敗" class="headerlink" title="清里で大失敗"></a>清里で大失敗</h3><p>ファーストライトのつもりで，3月10日～11日で清里に行きました．目標はマルカリアンチェーンを撮ることでした．<br>ほうとうを食べてから20時頃に現地入り．</p><p><img src="/images/00000050-qhy268c-first/tw01.jpg" alt="やけくそほうとう"></p><p>のんびりと組立ててから撮影を…と思ったのですが，まず<strong>ガイドに問題が発生</strong>．オートガイドには MGEN-3 を使っているのですが，キャリブレーションまでは通っているものの，実際にガイドを開始すると導入対象が吹き飛んでいくレベルで暴れまわります．<br>パラメタ値を変えたりして何度か試したもののうまくいかず，放棄．キャリブレーション時に（どちらかの軸か忘れましたが）ガイド信号を少し長めに送っていたことや，直交率を示す Ortho. の値が全然ダメ（20～40%くらい）なのが気になりました．今のところ鏡筒の前後バランスが出ていないので，これを改善してどうなるかといったところです．また，向いている方向の相性があったりするのかもしれません．オリオンの方向に向けるとうまくいきましたが，マルカリアンチェーンではうまくいきませんでした．全く困ったものですが，とりあえずバランスを出してみて直らなければ，別の策を練らねばなりません．<br>仕方がないのでカメラの接続を試みると今度は **PC がカメラを全く認識しません．**接続すると，本来は以下のように_IOの接尾辞がついたデバイス名が表示されるのですが，_FW（これはフィルタホイールのドライバか？）しか表示されません．それも「表示」から「非表示のデバイスの表示」を有効にして初めて表示されます．とにかく，デバイスが正しく認識されていないのは確かです．</p><p><img src="/images/00000050-qhy268c-first/dm.jpg" alt="デバイスマネージャの問題"></p><p>これもQHY関係のドライバの再インストールや PC 再起動，全 USB 接続機器の取外しなど，考えられるありとあらゆることを数時間試してみたものの全くうまくいかず，寒さの中泣きたくなりながらバッテリとカメラとPCを車に撤退してふてくされていました．すると車内で突然 PC がカメラを認識しました．「まさか温度か…？（冷却カメラでそんな事があるのか？）」などと思いつつ時間はすでに2時頃．薄明までまだ2時間ほどありましたが，対象も子午線を越えようかという段階で気力もなく今回は諦めることにしました．一応 6D に変えていたのですが，疲れからか ISO-25600 のままで撮っていたことに気づき見なかったことにしました．<br>ちなみに現地では<a href="https://twitter.com/antales">流れ星さん</a>と合流しており，上記問題について色々と相談したり話を聞いてもらいました．ありがとうございました．<br>また，カメラを認識しなくなる現象はこの後自宅でも発生し，もうこれは今のところ運なのではとしか考えられません（少なくとも温度ではなさそう）．出発前に Windows Update を走らせたことなど色々考えましたが，全ては憶測の域を出ず，はっきりとした原因はわかりませんでした．PC との相性とかもあるかもしれません．運でカメラが使えるか使えないかというのは大変困ったものです．<br>…とまあ散々な結果で，ボーズで帰ってからしばらくめちゃくちゃ落ち込んでいたのですが，いつまでもくよくよしてはいられず，その週の土日月に再チャレンジすることにしました．</p><h3 id="爪木崎からの朝霧"><a href="#爪木崎からの朝霧" class="headerlink" title="爪木崎からの朝霧"></a>爪木崎からの朝霧</h3><p>まず，設営の順番，ガイド，PC からのカメラ操作など不慣れなことが多すぎたので，手順という大枠だけは確定させておいたほうが楽だろうと考え，撮影の手順を徹底的に文書に書き出し，Google ドキュメントにまとめました．そして出発前にカメラとの接続を必ず確認するようにしました．<br>リベンジということでしたが，初日は知り合いのポートレートカメラマンと合流し，直焦はやりませんでした．暴風のユウスゲ公園でしばらく星を見ながら一時間ほど駄弁り，爪木崎に移動．爪木崎に行くのは初めてでしたが，灯台前は本当に人が多かったです．灯台から少し離れたところに良さげなベンチがあったので，そこで何枚かポトレを撮影しました．</p><p><img src="/images/00000050-qhy268c-first/p01.jpg" alt="一緒に行った方々と"><br><img src="/images/00000050-qhy268c-first/p02.jpg" alt="自撮り"><br>（※二枚目の私は見苦しいので目線を入れています）</p><p>ストロボは一緒に行ってくれた方の提供です．みんな灯台の方に行くので手前の広場は人が少なく，穴場な感じでした．<br>やっぱり一人で伊豆半島南端まで行くのは遠いです．5時頃まで下田で仮眠をとり，伊東マリンタウンでいつものように温泉に入って朝ごはんを食べたのですが，その後疲れで11時くらいまで寝てしまいました．この時点で同行者の方々とは解散，再びソロに．</p><p><img src="/images/00000050-qhy268c-first/tw02.jpg" alt="マリンタウンの朝食"></p><p>伊東マリンタウンは朝風呂料金がなくなり1000円になった代わりに，時間制限がなくなったようでした（以前は9時だか10時で朝風呂の人は帰ってくれとアナウンスが入っていた）．</p><p><img src="/images/00000050-qhy268c-first/tw03.jpg" alt="富士宮に到着"></p><p>というわけで目も覚めたので富士宮に移動してきました．昼間はご飯を食べるか観光するくらいしかやることがないので，まずはのんびり，「ゆるキャン」にも登場するお好み食堂伊東さんへ．一時間弱待ちでしぐれ焼きを食べました．焼きそばやお好み焼きというと個人的には味が濃いイメージがあったのですが，ここのはとてもさっぱりしていてとても好きな味で，気づいたら完食していました．</p><p><img src="/images/00000050-qhy268c-first/tw04.jpg" alt="しぐれ焼き-1"><br><img src="/images/00000050-qhy268c-first/tw05.jpg" alt="しぐれ焼き-2"><br><img src="/images/00000050-qhy268c-first/tw06.jpg" alt="しぐれ焼き-3"><br><img src="/images/00000050-qhy268c-first/tw07.jpg" alt="こんな感じになっていた"></p><p>その後は本栖湖畔へ移動．おやつを食べながら少し夕日を眺め，コンビニで買い出しから朝霧アリーナに現地入りしました．</p><p><img src="/images/00000050-qhy268c-first/tw08.jpg" alt="日の入り前に準備">日の入り前から設営するなんて我ながら珍しい…．<br><img src="/images/00000050-qhy268c-first/tw09.jpg" alt="天文なう">撮影開始．</p><p>現地では問題なくカメラがつながり使用できたので，とりあえず問題はガイドだけになりました．結局，オリオン大星雲に向けたときはしっかりとガイドしたのですが，マルカリアンチェーンやカラフルタウン付近に向けたときは機能してくれませんでした．MGEN-3に関して有識者の方がいらっしゃいましたらなにかヒントを教えていただけると幸いです．<br>オリオン大星雲，マルカリアンチェーン，カラフルタウン付近をなんとか撮影できましたので，以下に載せておきます．一応成果が出て安心です．</p><p><img src="/images/00000050-qhy268c-first/w01.jpg" alt="オリオン大星雲"></p><div style="text-align: center;">「オリオン大星雲」<br>2021年3月14日 20時19分～ 静岡県 朝霧アリーナ駐車場にて<br>FSQ-85EDP直焦点F5.3<br>QHY268C<br>Gain 0/Offset 15/-20℃/480s*16=128min<br>タカハシ EM-11 Temma2 Jr.<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p><img src="/images/00000050-qhy268c-first/w02.jpg" alt="マルカリアンチェーン"></p><div style="text-align: center;">「マルカリアンチェーン」<br>2021年3月15日 0時10分～ 静岡県 朝霧アリーナ駐車場にて<br>FSQ-85EDP直焦点F5.3<br>QHY268C<br>Gain 15/Offset 15/-20℃/180s*30=90min<br>タカハシ EM-11 Temma2 Jr.<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p><img src="/images/00000050-qhy268c-first/w03.jpg" alt="カラフルタウン付近"></p><div style="text-align: center;">「カラフルタウン付近」<br>2021年3月15日 2時53分～ 静岡県 朝霧アリーナ駐車場にて<br>FSQ-85EDP直焦点F5.3<br>QHY268C<br>Gain 0/Offset 15/-20℃/300s*18=90min<br>タカハシ EM-11 Temma2 Jr.<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p>モードは全てフォトグラフィックモードです．<br>とりあえずなんか撮れれば良かったので南北とかは全く気にしてません．やはりGain0で大きなフルウェル，16bitの豊かな階調を活かせるというのはとても大きいです．<br>HDR などしなくても，オリオン大星雲の中心部が飽和しにくいです．アンドロメダとか撮ったらどうなるかも試してみたいです．<br>もう少し解像感とかノイズに気を配りたいなあという気持ち．がんばります．<br>カメラやガイドなど，慣れるまでもう少しかかりそうですね．近々鏡筒の前後バランスを出すKBプレートとファインダーを導入するので，少しはやりやすくなるのでないかと思っています．<br>また遠征に行ったらレポートしたいと思います．</p><p><img src="/images/00000050-qhy268c-first/tw10.jpg" alt="今回の旅程">今回の旅程です．ちょうど500kmくらいでした．</p><p>そうそう，上述したポートレートとマルカリアンチェーン，昨年原村で撮影した昴の写真を使用して，<a href="https://fancollection-too-maaya.tumblr.com/post/646369092147806208/18%E3%81%8B%E3%81%99%E3%81%8B%E3%81%AA%E3%83%A1%E3%83%AD%E3%83%87%E3%82%A3-photography-%E3%81%A0%E3%81%BC-%E5%A4%9C%E6%98%8E%E3%81%91%E3%81%A8%E3%81%A8%E3%82%82%E3%81%AB%E5%BF%98%E3%82%8C%E3%81%9F%E3%81%8F%E3%81%AA%E3%81%84%E6%99%AF%E8%89%B2%E3%81%8C%E6%B6%88%E3%81%88%E3%82%8B">坂本真綾25周年を祝うファン企画</a>に参加させていただきました．写真と，彼女の楽曲と絡めた簡単な解説を載せておりますので，よろしければご覧ください．</p><p>それではまた．</p>]]></content>
      
      
      <categories>
          
          <category> 機材 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> カメラ </tag>
            
            <tag> 機材 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>スーパーワイドビノと坂本真綾25周年ライブ</title>
      <link href="/2021/03/25/00000049-super-wide-bino-live/"/>
      <url>/2021/03/25/00000049-super-wide-bino-live/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>先日<a href="https://lp.p.pia.jp/shared/cnt-s/cnt-s-11-02_2_e5df5bca-0ede-4ada-9150-a3dca1884304.html?detail=true">坂本真綾25周年記念ライブ</a>に行ってきたわけですが，そこで<strong>スーパーワイドビノ2×54</strong>という双眼鏡を使ってみたのでレビューを書いていこうと思います．別に製品の回し者というわけではありませんが，これがなかなか良かったのです．</p><p><img src="/images/00000049-super-wide-bino-live/tw01.jpg" alt="ライブでの実力は…">ライブでの実力ははたして…．</p><span id="more"></span><h3 id="スーパーワイドビノとは"><a href="#スーパーワイドビノとは" class="headerlink" title="スーパーワイドビノとは"></a>スーパーワイドビノとは</h3><p>スーパーワイドビノとはなんぞやという話ですが，笠井トレーディングさんから出ている**「超超広角」<strong>星空観賞用双眼鏡です．双眼鏡というと比較的高倍率のものを想像し，見たい対象に寄れれば寄れるだけ良いと考える方が多いかもしれませんが，このスーパーワイドビノはどちらかというと低倍率のオペラグラス寄り，いやむしろ</strong>オペラグラスよりも倍率が低く（2倍）作られている<strong>のが大きな特徴です．ガリレオ式のためずっしりとしており，ガラスの塊を持っているような重厚感があります．<br>倍率が低い代わりに</strong>とても明るく，シャープに像を結ぶ<strong>ため，遠くの対象でも見た目は小さいのに鮮明に観察することができます．また</strong>見口が大きく**，私は眼鏡をかけているのですが，かけたまま使用しても他の双眼鏡ほど視野が狭くなるということがありません．<br>星空で使用してみると，はくちょう座やオリオン座といった大きな星座が視野内にすっぽりと収まります．そして裸眼では見えていなかった細かい星々がグワッと浮かび上がり，<strong>没入度の高い星空を堪能できる</strong>アイテムです．<br>こいつをアーティストのライブでも使ってみようというわけです．</p><h3 id="早速使ってみた"><a href="#早速使ってみた" class="headerlink" title="早速使ってみた"></a>早速使ってみた</h3><p>横浜アリーナの，ステージはセンターパターン，席は1日目はアリーナB12列，2日目はアリーナD8列でした．詳しくは<a href="https://www.yokohama-arena.co.jp/seatguide/cstage.html">こちら</a>をご覧ください．列番号だけ見るとあまり差がないように見えますが，センターステージからの距離は全く違ったので，良い比較になりました．<br>スーパーワイドビノと，VixenさんのジョイフルM（10倍）を持っていきましたので，それぞれがどんな感じの視界で見えたかを以下の画像に示します．<br>初日，アリーナBから眺めた感じ．<br><img src="/images/00000049-super-wide-bino-live/01.jpg" alt="初日，アリーナBから"><br>2日目，アリーナDから眺めた感じ．<br><img src="/images/00000049-super-wide-bino-live/02.jpg" alt="2日目，アリーナDから"><br>（画像引用元：<a href="https://www.yokohama-arena.co.jp/seatguide/cstage.html">https://www.yokohama-arena.co.jp/seatguide/cstage.html</a> パノラマギャラリー）</p><p>赤枠がスーパーワイドビノ，青枠がジョイフルMです．（記憶を頼りにこんなもんかなと書いてるので不正確さはあるかと思います）<br>スーパーワイドビノの圧倒的な視界の広さがおわかりかと思います．1日目の際はステージから上部の画面までがきれいに収まり，かつ像も良く，画面の映像から演者の顔や衣装など全て明るく鮮明に見ることができました．2日目は流石にセンターステージにかなり近づいたので，左右は鳥籠状の画面の幅ギリギリ収まらず，画面も上に行ってしまうと全ては収まりきらないという感じでしたが，ステージ全体だけであればよく見渡すことが可能でした．ステージ全体を見たいときはこれで，各演者に注目したいときはジョイフルで見ることで，ライブや観劇などの楽しさも倍増するのではないかと思います．<br>特に今回のライブではデュエットなどで10倍のジョイフルだと収まりが悪いことがあり，スーパーワイドビノで演出などを楽しむ→ジョイフルで視界いっぱいのルンバ真綾さんや内村さん，土岐さん，堂島さん，原さん，たまんねぇ！　といった楽しみ方をすることができました．<br>スーパーワイドビノの値段は2万円前後しますが，ライブでも星空でも使える楽しい双眼鏡でした．</p><h3 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h3><p>簡単にスーパーワイドビノについてまとめておきますと，値段以外の部分で</p><p>メリット</p><ul><li>倍率は2倍とそこまでではないが，明るくてシャープ．ライブや観劇でも，ステージ全体を見るのにとても良い．</li><li>見口が大きく，眼鏡をかけたままでもあまり問題なく見える．</li><li>本来の星空用途でももちろん使える．</li></ul><p>デメリット</p><ul><li>前玉がわりとしっかり出ていて（いわゆる出目金レンズほどではないが…）重いので，落としたりすると怖い．小さなお子さんなどは長時間持っていると重くて疲れてしまうかも．</li></ul><p>といった感じになります．一家に一台，いかがでしょうか．</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
            <tag> 機材 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ごほーこく</title>
      <link href="/2021/02/09/00000048-fsq-ret-qhy268c/"/>
      <url>/2021/02/09/00000048-fsq-ret-qhy268c/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．研究関係が佳境に入っていてなかなか天文に頭を割けない今日このごろですが，いくつか書きたいことができたのでブログを書いています．</p><span id="more"></span><h3 id="FSQ，帰還．天城へ．"><a href="#FSQ，帰還．天城へ．" class="headerlink" title="FSQ，帰還．天城へ．"></a>FSQ，帰還．天城へ．</h3><p><a href="/2020/12/01/00000042-clean-failure-maaya-alt/">赤道儀から立て続けにやらかした鏡筒</a>ですが，先日無事に復帰となりました．<br><img src="/images/00000048-fsq-ret-qhy268c/tw01.jpg" alt="FSQ 復帰"><br>ちょうど<a href="https://twitter.com/GLASnSCI">ぐらすのすち氏</a>に遠征に誘われていたというのもあり，記念に天城で復帰戦と洒落込もうかと思ったのですが，カメラマウントもアイピースも忘れて置物になるという失態．<br>ぐらすのすち氏と以下のようなやり取りをしていたにも関わらず，送った私が忘れ物をするというね…．途中で忘れ物に気づいたのですが，ほとんど星撮りのやる気がなかったのでまあいいやと諦めました．</p><p><img src="/images/00000048-fsq-ret-qhy268c/01.jpg" alt="ぐらすのすち氏とのDMのやりとり"></p><p>天城ではレンズを使った撮影もできたのですが，結局自撮りをして終わり，椅子に座って星を眺めたり，途中で合流した<a href="https://twitter.com/Mazic_tell_Arts">takashiさん</a>と三人で様々な話題の話をしながら2時半ごろに月が昇るまでの時間を過ごしました．</p><p><img src="/images/00000048-fsq-ret-qhy268c/tw02.jpg" alt="天文なう"></p><p>また，現地ではぐらすのすち氏にコーヒー（とお湯）を，takashiさんにホットサンドメーカーで作ったバター肉まんを頂きました．絶品．</p><p><img src="/images/00000048-fsq-ret-qhy268c/tw03.jpg" alt="鍋すのすち氏">こちらは鍋すのすち氏．</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/Mazic_tell_Arts/status/1358134286445027329"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>私もスマホで肉まんの写真は撮ったのですが，あまり美味しそうではなかったのでここには載せないでおきますｗ（実際は冷えた体に染み渡る旨さでした）<br>お二方には大変お世話になりました．</p><h3 id="冷やCMOS，はじめました．"><a href="#冷やCMOS，はじめました．" class="headerlink" title="冷やCMOS，はじめました．"></a>冷やCMOS，はじめました．</h3><p>それから本日 QHY268C が届きました．本当はもっと遅くなる（4月ぐらい？）はずだったのですが，やりとりをしていた代理店さんが先行入荷してくれたらしく，かなり早く届きました．</p><p><img src="/images/00000048-fsq-ret-qhy268c/tw04.jpg" alt="届いた冷却CMOS"></p><p>最近発表されたモノクロ版 QHY268M も少し悩みましたが，APSC だとフィルターホイールやフィルター自体の大きさが大きくなる可能性もあり，他に回したいコストがかかってしまうなと頭を冷やし，思いとどまりました．後述するように，6Dを直焦撮影中に使えるようにカメラを増やすことが目的だったので，特にモノクロに拘る理由もありませんでした．モノクロはもっと小さなセンサーサイズで，またしばらく経ったらやってみようかと考えています．<br>さてせっかく早く届いてくれたのはありがたいですが，大容量バッテリーもなければフィルターもスティック PC もないので自宅で簡単なテストくらいしかできませんね，3月には本稼働していきたいところです．<br>冷却を導入したというよりも，今まで撮影に使っていた6Dで直焦中に遊べるというのが個人的には大きいです．今までせっかく仲間と来ていても，撮影のやる気があるときは集合写真などを撮らずに終わってしまうこともありましたが，これでその問題はひとまず解消されそうです．<br>冷却だけテストしてみましたが，問題はなさそう．</p><p><img src="/images/00000048-fsq-ret-qhy268c/tw05.jpg" alt="冷却ヨシッ！">冷却ヨシッ！</p><p>少しソフトウェアに慣れが必要そうな雰囲気がありますが，頑張って使いこなしていきたいです．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 機材 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> カメラ </tag>
            
            <tag> 機材 </tag>
            
            <tag> 鏡筒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自作プログラムで画像処理（カラーヒストグラム表示～トーンカーブ作成まで）</title>
      <link href="/2021/01/14/00000047-aflak-improc-02/"/>
      <url>/2021/01/14/00000047-aflak-improc-02/</url>
      
        <content type="html"><![CDATA[<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><h3 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h3><p>今回も<a href="/2021/01/04/00000046-aflak-improc-01/">前回</a>に引き続き自作プログラムでベーシックな画像処理まがいのことをしていきます．<br>今回のお品書きはこちらです．</p><ul><li><strong>カラーヒストグラム表示</strong></li><li><strong>RGB→HSV変換とHSV→RGBのマッピング</strong></li><li><strong>トーンカーブ機能の作成</strong></li></ul><span id="more"></span><h4 id="その1-カラーヒストグラムの表示"><a href="#その1-カラーヒストグラムの表示" class="headerlink" title="その1. カラーヒストグラムの表示"></a>その1. カラーヒストグラムの表示</h4><p>RGB 3チャンネルではなく1チャンネルのみのヒストグラムは既にできていたので，ちょちょっと改造です．カラー画像と認識したデータに対する出力の右側にヒストグラムを表示するようにしました．</p><pre><code class="hljs Rust"><span class="hljs-title function_ invoke__">pub</span>(<span class="hljs-keyword">crate</span>) <span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_hist_color</span>(&amp;<span class="hljs-keyword">self</span>, ui: &amp;Ui, pos: [<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>], size: [<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>]) &#123;  <span class="hljs-keyword">let</span> <span class="hljs-variable">vmin</span> = <span class="hljs-number">0.0</span>;  <span class="hljs-keyword">let</span> <span class="hljs-variable">vmax</span> = <span class="hljs-number">65535.0</span>;  <span class="hljs-keyword">const</span> FILL_COLOR_R: <span class="hljs-type">u32</span> = <span class="hljs-number">0x5500_00FF</span>;  <span class="hljs-keyword">const</span> FILL_COLOR_G: <span class="hljs-type">u32</span> = <span class="hljs-number">0x5500_FF00</span>;  <span class="hljs-keyword">const</span> FILL_COLOR_B: <span class="hljs-type">u32</span> = <span class="hljs-number">0x55FF_0000</span>;  <span class="hljs-keyword">const</span> BORDER_COLOR: <span class="hljs-type">u32</span> = <span class="hljs-number">0xFF00_0000</span>;  <span class="hljs-keyword">let</span> <span class="hljs-variable">hist</span> = <span class="hljs-keyword">self</span>.image.<span class="hljs-title function_ invoke__">hist_color</span>();  <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>((max_count_r, max_count_g, max_count_b)) = hist      .<span class="hljs-title function_ invoke__">iter</span>()      .<span class="hljs-title function_ invoke__">map</span>(|bin| (bin[<span class="hljs-number">0</span>].count, bin[<span class="hljs-number">1</span>].count, bin[<span class="hljs-number">2</span>].count))      .<span class="hljs-title function_ invoke__">max</span>()  &#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">draw_list</span> = ui.<span class="hljs-title function_ invoke__">get_window_draw_list</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">max_count</span> = max_count_r.<span class="hljs-title function_ invoke__">max</span>(max_count_g).<span class="hljs-title function_ invoke__">max</span>(max_count_b);    <span class="hljs-keyword">let</span> <span class="hljs-variable">x_pos</span> = pos[<span class="hljs-number">0</span>];    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">3</span> &#123;      <span class="hljs-keyword">for</span> <span class="hljs-variable">bin</span> <span class="hljs-keyword">in</span> hist &#123;        <span class="hljs-keyword">let</span> <span class="hljs-variable">y_pos</span> = pos[<span class="hljs-number">1</span>] + size[<span class="hljs-number">1</span>] / (vmax - vmin) * (vmax - bin[i].start);        <span class="hljs-keyword">let</span> <span class="hljs-variable">y_pos_end</span> = pos[<span class="hljs-number">1</span>] + size[<span class="hljs-number">1</span>] / (vmax - vmin) * (vmax - bin[i].end);        <span class="hljs-keyword">let</span> <span class="hljs-variable">length</span> = size[<span class="hljs-number">0</span>]          * <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.hist_logscale &#123;            (bin[i].count <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>).<span class="hljs-title function_ invoke__">log10</span>() / (max_count <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>).<span class="hljs-title function_ invoke__">log10</span>()          &#125; <span class="hljs-keyword">else</span> &#123;            (bin[i].count <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>) / (max_count <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>)          &#125;;          draw_list            .<span class="hljs-title function_ invoke__">add_rect</span>(              [x_pos + size[<span class="hljs-number">0</span>] - length, y_pos],              [x_pos + size[<span class="hljs-number">0</span>], y_pos_end],              <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> &#123;                FILL_COLOR_R              &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> i == <span class="hljs-number">1</span> &#123;                FILL_COLOR_G              &#125; <span class="hljs-keyword">else</span> &#123;                FILL_COLOR_B              &#125;,            )            .<span class="hljs-title function_ invoke__">filled</span>(<span class="hljs-literal">true</span>)            .<span class="hljs-title function_ invoke__">build</span>();      &#125;    &#125;    draw_list      .<span class="hljs-title function_ invoke__">add_rect</span>(pos, [pos[<span class="hljs-number">0</span>] + size[<span class="hljs-number">0</span>], pos[<span class="hljs-number">1</span>] + size[<span class="hljs-number">1</span>]], BORDER_COLOR)      .<span class="hljs-title function_ invoke__">build</span>();  &#125;&#125;</code></pre><p>するとこんな感じにカラー画像の横に出てきます．<br><img src="/images/00000047-aflak-improc-02/tw01.jpg" alt="カラーヒストグラムの表示"></p><h4 id="その2-RGB→HSV変換"><a href="#その2-RGB→HSV変換" class="headerlink" title="その2. RGB→HSV変換"></a>その2. RGB→HSV変換</h4><p><a href="https://www.peko-step.com/tool/hsvrgb.html">このサイト</a>によると，画素の RGB それぞれの輝度値$$R, G, B$$として，<br>$$Max &#x3D; \max(R, G, B), Min &#x3D; \min(R, G, B)$$<br>$$H &#x3D; 60 * ((G - B) &#x2F; (Max - Min)) ,; \max(R, G, B) &#x3D; R$$<br>$$H &#x3D; 60 * ((B - R) &#x2F; (Max - Min)) + 120 ,; \max(R, G, B) &#x3D; G$$<br>$$H &#x3D; 60 * ((R - G) &#x2F; (Max - Min)) + 240 ,; \max(R, G, B) &#x3D; B$$<br>$$S &#x3D; (Max - Min) &#x2F; Max$$<br>$$V &#x3D; Max$$<br>と計算できるっぽいのでこれに習っていきます．上の例だと色相は360度で表現してますが，後々 RGB に再マッピングすることを考えて 16bit の範囲に再スケールしておきます．</p><pre><code class="hljs Rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_color_image_to_hsv</span>(image: &amp;WcsArray) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;  dim_is!(image, <span class="hljs-number">3</span>)?;  <span class="hljs-keyword">let</span> <span class="hljs-variable">image</span> = image.<span class="hljs-title function_ invoke__">scalar</span>();  <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">out</span> = image.<span class="hljs-title function_ invoke__">clone</span>();  <span class="hljs-keyword">for</span> (j, slice) <span class="hljs-keyword">in</span> image.<span class="hljs-title function_ invoke__">axis_iter</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)).<span class="hljs-title function_ invoke__">enumerate</span>() &#123;    <span class="hljs-keyword">for</span> (i, data) <span class="hljs-keyword">in</span> slice.<span class="hljs-title function_ invoke__">axis_iter</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)).<span class="hljs-title function_ invoke__">enumerate</span>() &#123;      <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">hue</span> = <span class="hljs-number">0.0</span>;      <span class="hljs-keyword">let</span> <span class="hljs-variable">max</span> = data[<span class="hljs-number">0</span>].<span class="hljs-title function_ invoke__">max</span>(data[<span class="hljs-number">1</span>]).<span class="hljs-title function_ invoke__">max</span>(data[<span class="hljs-number">2</span>]);      <span class="hljs-keyword">let</span> <span class="hljs-variable">min</span> = data[<span class="hljs-number">0</span>].<span class="hljs-title function_ invoke__">min</span>(data[<span class="hljs-number">1</span>]).<span class="hljs-title function_ invoke__">min</span>(data[<span class="hljs-number">2</span>]);      <span class="hljs-keyword">if</span> data[<span class="hljs-number">0</span>] &gt;= data[<span class="hljs-number">1</span>] &amp;&amp; data[<span class="hljs-number">0</span>] &gt;= data[<span class="hljs-number">2</span>] &#123;        hue = <span class="hljs-number">60.0</span> * ((data[<span class="hljs-number">1</span>] - data[<span class="hljs-number">2</span>]) / (max - min));      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> data[<span class="hljs-number">1</span>] &gt;= data[<span class="hljs-number">0</span>] &amp;&amp; data[<span class="hljs-number">1</span>] &gt;= data[<span class="hljs-number">2</span>] &#123;        hue = <span class="hljs-number">60.0</span> * ((data[<span class="hljs-number">2</span>] - data[<span class="hljs-number">0</span>]) / (max - min)) + <span class="hljs-number">120.0</span>;      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> data[<span class="hljs-number">2</span>] &gt;= data[<span class="hljs-number">0</span>] &amp;&amp; data[<span class="hljs-number">2</span>] &gt;= data[<span class="hljs-number">1</span>] &#123;        hue = <span class="hljs-number">60.0</span> * ((data[<span class="hljs-number">0</span>] - data[<span class="hljs-number">1</span>]) / (max - min)) + <span class="hljs-number">240.0</span>;      &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Unreachable&quot;</span>);      &#125;      <span class="hljs-keyword">if</span> hue &lt; <span class="hljs-number">0.0</span> &#123;        hue += <span class="hljs-number">360.0</span>;      &#125;      hue = hue / <span class="hljs-number">360.0</span> * <span class="hljs-number">65535.0</span>;      out[[<span class="hljs-number">0</span>, j, i]] = hue;      out[[<span class="hljs-number">1</span>, j, i]] = (max - min) / max * <span class="hljs-number">65535.0</span>;      out[[<span class="hljs-number">2</span>, j, i]] = max;    &#125;  &#125;  <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array</span>(Dimensioned::<span class="hljs-title function_ invoke__">new</span>(    out,    Unit::<span class="hljs-literal">None</span>,  ))))&#125;</code></pre><p>まずは HSV の値が入っている三次元データをスライスして見てみるとこんな感じの強度分布図になります．<br><img src="/images/00000047-aflak-improc-02/01.jpg" alt="HSV の強度分布図"></p><p>上のビジュアルプログラムについて少し説明を書いておくと，<strong>まず上記の計算式から 0番目に色相のマップ，1番目に彩度のマップ，2番目に明度のマップが入っているような三次元データを作ります（図の赤枠）．この三次元データは右側に流れていき，スライスすることでそれぞれのマップデータ（二次元）を得ています．</strong></p><p>次にこれらをRGBに再マッピングしてみます．次のような，三つの二次元のチャンネルデータを受け取ってカラー画像（三次元データ）を出力するようなノードを作ります．</p><pre><code class="hljs Rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_generate_color_image_from_channel</span>(    image_r: &amp;WcsArray,    image_g: &amp;WcsArray,    image_b: &amp;WcsArray,) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;  dim_is!(image_r, <span class="hljs-number">2</span>)?;  dim_is!(image_g, <span class="hljs-number">2</span>)?;  dim_is!(image_b, <span class="hljs-number">2</span>)?;  are_same_dim!(image_r, image_b)?;  are_same_dim!(image_b, image_g)?;  <span class="hljs-keyword">let</span> <span class="hljs-variable">dim</span> = image_r.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">dim</span>();  <span class="hljs-keyword">let</span> <span class="hljs-variable">dim</span> = dim.<span class="hljs-title function_ invoke__">as_array_view</span>();  <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">colorimage</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">3</span> * dim[<span class="hljs-number">0</span>] * dim[<span class="hljs-number">1</span>]);  <span class="hljs-keyword">for</span> &amp;data <span class="hljs-keyword">in</span> image_r.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">iter</span>() &#123;    colorimage.<span class="hljs-title function_ invoke__">push</span>(data);  &#125;  <span class="hljs-keyword">for</span> &amp;data <span class="hljs-keyword">in</span> image_g.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">iter</span>() &#123;    colorimage.<span class="hljs-title function_ invoke__">push</span>(data);  &#125;  <span class="hljs-keyword">for</span> &amp;data <span class="hljs-keyword">in</span> image_b.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">iter</span>() &#123;    colorimage.<span class="hljs-title function_ invoke__">push</span>(data);  &#125;  <span class="hljs-keyword">let</span> <span class="hljs-variable">img</span> = Array::<span class="hljs-title function_ invoke__">from_shape_vec</span>((<span class="hljs-number">3</span>, dim[<span class="hljs-number">0</span>], dim[<span class="hljs-number">1</span>]), colorimage).<span class="hljs-title function_ invoke__">unwrap</span>();  <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array</span>(Dimensioned::<span class="hljs-title function_ invoke__">new</span>(    img.<span class="hljs-title function_ invoke__">into_dyn</span>(),    Unit::<span class="hljs-literal">None</span>,  ))))&#125;</code></pre><p>とりあえずHをR，SをG，VをBにそのままマッピングすると次のようになりました．<strong>エッジの接続関係（下図の黄緑枠）を変えることで，別の組み合わせにする（たとえばHをB，SをR，VをGなど）ことも自由自在</strong>です．<br><img src="/images/00000047-aflak-improc-02/02.jpg" alt="HSV→RGBへのマッピング"><br>上の図で，HをR，SをG，VをBに接続していることが表現されています．</p><h4 id="トーンカーブの作成"><a href="#トーンカーブの作成" class="headerlink" title="トーンカーブの作成"></a>トーンカーブの作成</h4><p>お次はトーンカーブ．ゼロから作らなければならなかったので，これが一番面倒でした．まずはインタフェースからのんびり作っていきます．</p><pre><code class="hljs Rust"><span class="hljs-meta">#[derive(Clone, Debug, Serialize, Deserialize, PartialEq)]</span><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ToneCurveState</span> &#123;  arr: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">f32</span>&gt;,  cp: <span class="hljs-type">Vec</span>&lt;[<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>]&gt;,  adding: <span class="hljs-type">Option</span>&lt;[<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>]&gt;,  pushed: <span class="hljs-type">bool</span>,  moving: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">usize</span>&gt;,  deleting: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">usize</span>&gt;,  x_clicking: <span class="hljs-type">usize</span>,  is_dragging: <span class="hljs-type">bool</span>,&#125;<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ToneCurveState</span> &#123;  <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">default</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;    <span class="hljs-comment">/*省略*/</span>  &#125;  <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">control_points</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;[<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>]&gt; &#123;    <span class="hljs-keyword">self</span>.cp  &#125;  <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">array</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">f32</span>&gt; &#123;    <span class="hljs-keyword">self</span>.arr  &#125;&#125;<span class="hljs-keyword">impl</span> <span class="hljs-title class_">PartialEq</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">ToneCurveState</span> &#123;  <span class="hljs-keyword">fn</span> <span class="hljs-title function_">eq</span>(&amp;<span class="hljs-keyword">self</span>, val: &amp;<span class="hljs-keyword">Self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">cp1</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">control_points</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">cp2</span> = val.<span class="hljs-title function_ invoke__">control_points</span>();    cp1 == cp2  &#125;&#125;<span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">UiToneCurve</span> &#123;  <span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_curve</span>(cp: &amp;<span class="hljs-type">Vec</span>&lt;[<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>]&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">f32</span>&gt;;  <span class="hljs-keyword">fn</span> <span class="hljs-title function_">tone_curve</span>(    &amp;<span class="hljs-keyword">self</span>,    state: &amp;<span class="hljs-keyword">mut</span> ToneCurveState,    draw_list: &amp;WindowDrawList,  ) <span class="hljs-punctuation">-&gt;</span> io::<span class="hljs-type">Result</span>&lt;<span class="hljs-type">Option</span>&lt;ToneCurveState&gt;&gt;;&#125;<span class="hljs-keyword">impl</span>&lt;<span class="hljs-symbol">&#x27;ui</span>&gt; UiToneCurve <span class="hljs-keyword">for</span> <span class="hljs-title class_">Ui</span>&lt;<span class="hljs-symbol">&#x27;ui</span>&gt; &#123;  <span class="hljs-keyword">fn</span> <span class="hljs-title function_">create_curve</span>(cp: &amp;<span class="hljs-type">Vec</span>&lt;[<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>]&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">f32</span>&gt; &#123;    <span class="hljs-comment">/*省略*/</span>  &#125;  <span class="hljs-keyword">fn</span> <span class="hljs-title function_">tone_curve</span>(    &amp;<span class="hljs-keyword">self</span>,    state: &amp;<span class="hljs-keyword">mut</span> ToneCurveState,    draw_list: &amp;WindowDrawList,  ) <span class="hljs-punctuation">-&gt;</span> io::<span class="hljs-type">Result</span>&lt;<span class="hljs-type">Option</span>&lt;ToneCurveState&gt;&gt; &#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">cursor_screen_pos</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">mouse_pos</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">io</span>().mouse_pos;    <span class="hljs-keyword">let</span> [mouse_x, mouse_y] = [mouse_pos[<span class="hljs-number">0</span>] - p[<span class="hljs-number">0</span>] - <span class="hljs-number">5.0</span>, mouse_pos[<span class="hljs-number">1</span>] - p[<span class="hljs-number">1</span>] - <span class="hljs-number">5.0</span>];    state.arr = <span class="hljs-keyword">Self</span>::<span class="hljs-title function_ invoke__">create_curve</span>(&amp;state.cp);    <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">invisible_button</span>(im_str!(<span class="hljs-string">&quot;tone_curve&quot;</span>), [<span class="hljs-number">410.0</span>, <span class="hljs-number">410.0</span>]);    <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">set_cursor_screen_pos</span>(p);    PlotLines::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-keyword">self</span>, im_str!(<span class="hljs-string">&quot;Tone Curve Test&quot;</span>), &amp;state.arr)        .<span class="hljs-title function_ invoke__">graph_size</span>([<span class="hljs-number">410.0</span>, <span class="hljs-number">410.0</span>])        .<span class="hljs-title function_ invoke__">scale_min</span>(<span class="hljs-number">0.0</span>)        .<span class="hljs-title function_ invoke__">scale_max</span>(<span class="hljs-number">256.0</span>)        .<span class="hljs-title function_ invoke__">build</span>();    <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">set_cursor_screen_pos</span>(p);    <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">invisible_button</span>(im_str!(<span class="hljs-string">&quot;tone_curve&quot;</span>), [<span class="hljs-number">410.0</span>, <span class="hljs-number">410.0</span>]);    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(adding) = state.adding &#123;      <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = adding[<span class="hljs-number">0</span>] * <span class="hljs-number">400.0</span> + <span class="hljs-number">5.0</span> + p[<span class="hljs-number">0</span>];      <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = (<span class="hljs-number">1.0</span> - adding[<span class="hljs-number">1</span>]) * <span class="hljs-number">400.0</span> + <span class="hljs-number">5.0</span> + p[<span class="hljs-number">1</span>];      draw_list.<span class="hljs-title function_ invoke__">add_circle</span>([x, y], <span class="hljs-number">5.0</span>, <span class="hljs-number">0xFF00_FFFF</span>).<span class="hljs-title function_ invoke__">build</span>();    &#125;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">counter</span> = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> &amp;state.cp &#123;      <span class="hljs-keyword">let</span> <span class="hljs-variable">x</span> = i[<span class="hljs-number">0</span>] * <span class="hljs-number">400.0</span> + <span class="hljs-number">5.0</span> + p[<span class="hljs-number">0</span>];      <span class="hljs-keyword">let</span> <span class="hljs-variable">y</span> = (<span class="hljs-number">1.0</span> - i[<span class="hljs-number">1</span>]) * <span class="hljs-number">400.0</span> + <span class="hljs-number">5.0</span> + p[<span class="hljs-number">1</span>];      <span class="hljs-keyword">if</span> (x - mouse_pos[<span class="hljs-number">0</span>]) * (x - mouse_pos[<span class="hljs-number">0</span>]) + (y - mouse_pos[<span class="hljs-number">1</span>]) * (y - mouse_pos[<span class="hljs-number">1</span>])          &lt; <span class="hljs-number">25.0</span>      &#123;        draw_list.<span class="hljs-title function_ invoke__">add_circle</span>([x, y], <span class="hljs-number">5.0</span>, <span class="hljs-number">0xFF00_00FF</span>).<span class="hljs-title function_ invoke__">build</span>();        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_mouse_clicked</span>(MouseButton::Left) &amp;&amp; state.adding == <span class="hljs-literal">None</span> &#123;          state.moving = <span class="hljs-title function_ invoke__">Some</span>(counter);        &#125;        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_mouse_clicked</span>(MouseButton::Right) &#123;          <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">open_popup</span>(im_str!(<span class="hljs-string">&quot;delete-control-point&quot;</span>));          state.deleting = <span class="hljs-title function_ invoke__">Some</span>(counter);        &#125;      &#125; <span class="hljs-keyword">else</span> &#123;        draw_list.<span class="hljs-title function_ invoke__">add_circle</span>([x, y], <span class="hljs-number">5.0</span>, <span class="hljs-number">0xFFFF_FFFF</span>).<span class="hljs-title function_ invoke__">build</span>();      &#125;      counter += <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">popup</span>(im_str!(<span class="hljs-string">&quot;delete-control-point&quot;</span>), || &#123;      <span class="hljs-keyword">if</span> MenuItem::<span class="hljs-title function_ invoke__">new</span>(im_str!(<span class="hljs-string">&quot;Delete Control Point&quot;</span>)).<span class="hljs-title function_ invoke__">build</span>(<span class="hljs-keyword">self</span>) &#123;        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(key) = state.deleting &#123;          state.cp.<span class="hljs-title function_ invoke__">remove</span>(key);          state.deleting = <span class="hljs-literal">None</span>;        &#125;      &#125;    &#125;);    <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_item_hovered</span>() &#123;      <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_mouse_clicked</span>(MouseButton::Left) &amp;&amp; state.moving == <span class="hljs-literal">None</span> &#123;        <span class="hljs-keyword">if</span> !state.is_dragging &#123;          state.is_dragging = <span class="hljs-literal">true</span>;        &#125;      &#125;      <span class="hljs-keyword">if</span> state.is_dragging &#123;        <span class="hljs-keyword">if</span> state.pushed == <span class="hljs-literal">false</span> &#123;          state.pushed = <span class="hljs-literal">true</span>;          state.cp.<span class="hljs-title function_ invoke__">push</span>([mouse_x / <span class="hljs-number">400.0</span>, (<span class="hljs-number">400.0</span> - mouse_y) / <span class="hljs-number">400.0</span>]);        &#125;        state.adding = <span class="hljs-title function_ invoke__">Some</span>([mouse_x / <span class="hljs-number">400.0</span>, (<span class="hljs-number">400.0</span> - mouse_y) / <span class="hljs-number">400.0</span>]);        <span class="hljs-keyword">let</span> <span class="hljs-variable">lastidx</span> = state.cp.<span class="hljs-title function_ invoke__">len</span>() - <span class="hljs-number">1</span>;        state.cp[lastidx] = state.adding.<span class="hljs-title function_ invoke__">unwrap</span>();        <span class="hljs-keyword">if</span> state.x_clicking &gt; <span class="hljs-number">255</span> &#123;          state.x_clicking = <span class="hljs-number">255</span>;        &#125;        <span class="hljs-keyword">if</span> !<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_mouse_down</span>(MouseButton::Left) &#123;          state.cp.<span class="hljs-title function_ invoke__">sort_by</span>(|a, b| a[<span class="hljs-number">0</span>].<span class="hljs-title function_ invoke__">partial_cmp</span>(&amp;b[<span class="hljs-number">0</span>]).<span class="hljs-title function_ invoke__">unwrap</span>());          state.adding = <span class="hljs-literal">None</span>;          state.is_dragging = <span class="hljs-literal">false</span>;          state.pushed = <span class="hljs-literal">false</span>;        &#125;      &#125;      <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(key) = state.moving &#123;        state.cp[key] = [mouse_x / <span class="hljs-number">400.0</span>, (<span class="hljs-number">400.0</span> - mouse_y) / <span class="hljs-number">400.0</span>];        <span class="hljs-keyword">if</span> !<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_mouse_down</span>(MouseButton::Left) &#123;          state.moving = <span class="hljs-literal">None</span>;        &#125;      &#125;    &#125;    <span class="hljs-keyword">let</span> <span class="hljs-variable">state</span> = state.<span class="hljs-title function_ invoke__">clone</span>();    <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-title function_ invoke__">Some</span>(state))  &#125;&#125;</code></pre><p><video src="https://dabokun.github.io/images/00000047-aflak-improc-02/tw01.mp4" width="674" height="360" controls></video><br>まだハードコードされているところとかがあり，要修正ですが貼っておきます．曲線の計算には現在 <a href="http://naochang.me/?p=1119">Catmull-Rom Spline 曲線</a>を使っています．state にはコントロールポイントやルックアップテーブルの配列データ（現在大きさは256，0.0～256.0までの値が格納）が入っていて，次のように使います．</p><pre><code class="hljs Rust"><span class="hljs-keyword">let</span> <span class="hljs-variable">tone_curve_state</span> = ui.<span class="hljs-title function_ invoke__">tone_curve</span>(&amp;<span class="hljs-keyword">mut</span> state, &amp;draw_list);<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Ok</span>(state) = tone_curve_state &#123;  <span class="hljs-keyword">let</span> <span class="hljs-variable">state</span> = state.<span class="hljs-title function_ invoke__">unwrap</span>();  <span class="hljs-keyword">let</span> <span class="hljs-variable">control_points</span> = state.<span class="hljs-title function_ invoke__">control_points</span>();  <span class="hljs-keyword">let</span> <span class="hljs-variable">array</span> = state.<span class="hljs-title function_ invoke__">array</span>();&#125;</code></pre><p>次に，トーンカーブのデータ型を作って，画像データとトーンカーブデータから適用後の画像を出力するノードを作って完成です．<br>トーンカーブデータのところは省略します．</p><pre><code class="hljs Rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_apply_tone_curve</span>(image: &amp;WcsArray, tone_curve: ToneCurveState) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;  <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">image_arr</span> = image.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">clone</span>();  <span class="hljs-keyword">let</span> <span class="hljs-variable">table</span> = tone_curve.<span class="hljs-title function_ invoke__">array</span>();  <span class="hljs-keyword">let</span> <span class="hljs-variable">table_size</span> = table.<span class="hljs-title function_ invoke__">len</span>() - <span class="hljs-number">1</span>;  image_arr.<span class="hljs-title function_ invoke__">par_map_inplace</span>(|v| &#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">key</span> = (*v * table_size <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> / <span class="hljs-number">65535.0</span>) <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;    <span class="hljs-keyword">let</span> <span class="hljs-variable">value</span> = <span class="hljs-number">65535.0</span> * table[key] / table_size <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;    *v = value;  &#125;);  <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array</span>(Dimensioned::<span class="hljs-title function_ invoke__">new</span>(    image_arr,    Unit::<span class="hljs-literal">None</span>,  ))))&#125;</code></pre><p><video src="https://dabokun.github.io/images/00000047-aflak-improc-02/tw02.mp4" width="674" height="360" controls></video><br>ちなみに par_map_inplace という関数は ndarray_parallel という crate にあるもので，中の計算を並列処理してくれます．<br>普通に map で計算する場合と時間を比較するとこんな感じです．</p><p><img src="/images/00000047-aflak-improc-02/tw02.png" alt="並列処理のコード">画像にて失礼…．</p><p><img src="/images/00000047-aflak-improc-02/tw03.png" alt="実際にparallelのほうが速くなっている">実行結果はこんな漢字です．<br>結構速くなってますね．他にも直せるところがあると思っています．</p><p>さて，数日かけて色々とやりましたが次は何をしましょうか．悩み中です．しばらくは改善とリファクタリングですかね…．<br>なにか作って欲しいものやアドバイスがありましたらブログや Twitter で募集しております．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自作プログラムで画像処理（Raw展開～ノイズ解析まで）</title>
      <link href="/2021/01/04/00000046-aflak-improc-01/"/>
      <url>/2021/01/04/00000046-aflak-improc-01/</url>
      
        <content type="html"><![CDATA[<h3 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h3><p>こんにちは．あけましておめでとうございます．今年は自作プログラムの天体画像処理機能を充実させたいという思いがあったので，年末から三が日にかけて，少しだけ進めていました．</p><span id="more"></span><h3 id="やっていくぞ"><a href="#やっていくぞ" class="headerlink" title="やっていくぞ"></a>やっていくぞ</h3><p>まだ特に「天体写真の画像処理用途」の機能を実装していなかった私の研究用プログラムということで，初回である今回の目標は</p><ul><li><strong>（複数の）Raw 画像を読込み</strong></li><li><strong>位置合わせなしコンポジット（平均値，中央値，分散，標準偏差などの統計値計算）</strong></li><li><strong>（主にダークデータの）ノイズ解析用 scatterplots 生成</strong></li></ul><p>となります．特にノイズ解析では<a href="https://apranat.exblog.jp/31097570/">あぷらなーとさんがよくダークデータのノイズ解析をしてらっしゃいます</a>ので，あんな感じのことができればいいかなということになります．<br>プログラムの全般的な詳しい機能の紹介は，<a href="/2019/03/15/00000005-astrophoto-and-processing-2/">以前書いたコンセプトの記事</a>をご覧ください．</p><h4 id="その1-Rawを開く（ファイルパス群→三次元データ）"><a href="#その1-Rawを開く（ファイルパス群→三次元データ）" class="headerlink" title="その1. Rawを開く（ファイルパス群→三次元データ）"></a>その1. Rawを開く（ファイルパス群→三次元データ）</h4><p>まず，Raw を開くだけなら簡単です．<a href="/2019/06/04/00000009-rust-raw-loader-crate/">以前紹介した rawloader crate</a> を使用すれば開けます．<br>が，今回はコンポジットやノイズ解析をしたいので，複数枚の Raw 画像を読む必要があります．<br>これまでは一つの Path というノードで単一のデータファイルパスを表現していましたが，これを一つのノードで複数枚のリストが表現できるように改造する必要がありました．</p><p><strong><font color="red">これからコードをドバドバ貼っていきますが，自分のメモ代わりなので読み飛ばしてください．</font></strong></p><pre><code class="hljs Rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">PATHS</span> &#123;    Nothing,    <span class="hljs-title function_ invoke__">FileList</span>(<span class="hljs-type">Vec</span>&lt;PathBuf&gt;),&#125;<span class="hljs-keyword">impl</span> <span class="hljs-title class_">MenuBar</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">PATHS</span> &#123;    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">visualize</span>&lt;F&gt;(&amp;<span class="hljs-keyword">self</span>, ctx: OutputWindowCtx&lt;<span class="hljs-symbol">&#x27;_</span>, <span class="hljs-symbol">&#x27;_</span>, <span class="hljs-symbol">&#x27;_</span>, <span class="hljs-symbol">&#x27;_</span>, <span class="hljs-symbol">&#x27;_</span>, <span class="hljs-symbol">&#x27;_</span>, <span class="hljs-symbol">&#x27;_</span>, F&gt;)    <span class="hljs-keyword">where</span>        F: glium::backend::Facade,    &#123;        ctx.ui.<span class="hljs-title function_ invoke__">text_wrapped</span>(&amp;im_str!(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, <span class="hljs-keyword">self</span>));    &#125;    <span class="hljs-comment">/*省略*/</span>&#125;IOValue::<span class="hljs-title function_ invoke__">Paths</span>(<span class="hljs-keyword">ref</span> file) =&gt; &#123;    <span class="hljs-keyword">match</span> file &#123;        primitives::PATHS::Nothing =&gt; <span class="hljs-literal">None</span>,        primitives::PATHS::<span class="hljs-title function_ invoke__">FileList</span>(file) =&gt; &#123;            <span class="hljs-keyword">if</span> read_only &#123;                <span class="hljs-literal">None</span>            &#125; <span class="hljs-keyword">else</span> &#123;                <span class="hljs-keyword">let</span> <span class="hljs-variable">size</span> = ui.<span class="hljs-title function_ invoke__">item_rect_size</span>();                <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">ret</span> = <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-literal">None</span>);                ChildWindow::<span class="hljs-title function_ invoke__">new</span>(im_str!(<span class="hljs-string">&quot;edit&quot;</span>))                    .<span class="hljs-title function_ invoke__">size</span>([size[<span class="hljs-number">0</span>].<span class="hljs-title function_ invoke__">max</span>(<span class="hljs-number">400.0</span>), <span class="hljs-number">150.0</span>])                    .<span class="hljs-title function_ invoke__">horizontal_scrollbar</span>(<span class="hljs-literal">true</span>)                    .<span class="hljs-title function_ invoke__">build</span>(ui, || &#123;                        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">hoge</span> = <span class="hljs-literal">false</span>;                        ret = ui.<span class="hljs-title function_ invoke__">file_explorer</span>(                            TOP_FOLDER,                            &amp;[                                <span class="hljs-string">&quot;fits&quot;</span>, <span class="hljs-string">&quot;fit&quot;</span>, <span class="hljs-string">&quot;fts&quot;</span>, <span class="hljs-string">&quot;cr2&quot;</span>, <span class="hljs-string">&quot;CR2&quot;</span>, <span class="hljs-string">&quot;RW2&quot;</span>, <span class="hljs-string">&quot;rw2&quot;</span>, <span class="hljs-string">&quot;nef&quot;</span>, <span class="hljs-string">&quot;NEF&quot;</span>,                            ],                            &amp;<span class="hljs-keyword">mut</span> hoge,                        );                    &#125;);                ui.<span class="hljs-title function_ invoke__">text</span>(im_str!(<span class="hljs-string">&quot;Selected Files:&quot;</span>));                <span class="hljs-keyword">for</span> <span class="hljs-variable">single_file</span> <span class="hljs-keyword">in</span> file &#123;                    ui.<span class="hljs-title function_ invoke__">text</span>(single_file.<span class="hljs-title function_ invoke__">to_str</span>().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-string">&quot;Unrepresentable path&quot;</span>));                &#125;                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Ok</span>(<span class="hljs-title function_ invoke__">Some</span>(new_file)) = ret &#123;                    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">already_exist</span> = <span class="hljs-literal">false</span>;                    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">key</span> = <span class="hljs-number">0</span>;                    <span class="hljs-keyword">for</span> <span class="hljs-variable">single_file</span> <span class="hljs-keyword">in</span> file &#123;                        <span class="hljs-keyword">if</span> *single_file == new_file &#123;                            already_exist = <span class="hljs-literal">true</span>;                            <span class="hljs-keyword">break</span>;                        &#125;                        key += <span class="hljs-number">1</span>;                    &#125;                    <span class="hljs-keyword">if</span> already_exist &#123;                        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">new_files</span> = file.<span class="hljs-title function_ invoke__">clone</span>();                        new_files.<span class="hljs-title function_ invoke__">remove</span>(key);                        <span class="hljs-title function_ invoke__">Some</span>(IOValue::<span class="hljs-title function_ invoke__">Paths</span>(primitives::PATHS::<span class="hljs-title function_ invoke__">FileList</span>(                            new_files.<span class="hljs-title function_ invoke__">to_vec</span>(),                        )))                    &#125; <span class="hljs-keyword">else</span> &#123;                        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">new_files</span> = file.<span class="hljs-title function_ invoke__">clone</span>();                        new_files.<span class="hljs-title function_ invoke__">push</span>(new_file);                        <span class="hljs-title function_ invoke__">Some</span>(IOValue::<span class="hljs-title function_ invoke__">Paths</span>(primitives::PATHS::<span class="hljs-title function_ invoke__">FileList</span>(                            new_files.<span class="hljs-title function_ invoke__">to_vec</span>(),                        )))                    &#125;                &#125; <span class="hljs-keyword">else</span> &#123;                    <span class="hljs-literal">None</span>                &#125;            &#125;        &#125;    &#125;&#125;</code></pre><p>するとこんな感じに↓<br><img src="/images/00000046-aflak-improc-01/01.jpg" alt="Paths ノードでファイル複数のファイルを開く"><br>なんかカレントディレクトリの表示がおかしいですが，ちゃんと動作するので今はキニシナイ．</p><p>次に，この Path 改め Paths を受け取り，画像を展開して**三次元データ（0番目の軸で何枚目かというインデックス，1番目と2番目の軸で画像の輝度にアクセスできる）**を生成するノードを作ります．</p><pre><code class="hljs Rust">cake_transform!(    <span class="hljs-string">&quot;Open RAW file from a Paths.&quot;</span>,    <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>,    open_raw&lt;IOValue, IOErr&gt;(path: Paths, n: Integer = <span class="hljs-number">0</span>) <span class="hljs-punctuation">-&gt;</span> Image &#123;        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">PATHS</span>::<span class="hljs-title function_ invoke__">FileList</span>(path) = path &#123;            <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">run_open_raw</span>(path.<span class="hljs-title function_ invoke__">to_vec</span>(), *n)]        &#125; <span class="hljs-keyword">else</span> &#123;            <span class="hljs-built_in">vec!</span>[] <span class="hljs-comment">//エラーを返そう</span>        &#125;    &#125;),<span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_open_raw</span>&lt;P: <span class="hljs-built_in">AsRef</span>&lt;Path&gt;&gt;(path: <span class="hljs-type">Vec</span>&lt;P&gt;, n: <span class="hljs-type">i64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">pathlist_len</span> = path.<span class="hljs-title function_ invoke__">len</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = n <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;    precheck!(pathlist_len &gt; n)?;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">imagecount</span> = <span class="hljs-number">0</span>;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">width</span> = <span class="hljs-number">0</span>;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">height</span> = <span class="hljs-number">0</span>;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">img</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">openresult</span>: <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; = <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Integer</span>(<span class="hljs-number">0</span>));    <span class="hljs-keyword">for</span> <span class="hljs-variable">single_path</span> <span class="hljs-keyword">in</span> path &#123;        <span class="hljs-keyword">let</span> <span class="hljs-variable">image</span> = rawloader::<span class="hljs-title function_ invoke__">decode_file</span>(single_path);        <span class="hljs-keyword">match</span> image &#123;            <span class="hljs-title function_ invoke__">Ok</span>(image) =&gt; &#123;                <span class="hljs-keyword">if</span> imagecount == <span class="hljs-number">0</span> &#123;                    width = image.width;                    height = image.height;                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> width != image.width || height != image.height &#123;                    <span class="hljs-built_in">eprintln!</span>(<span class="hljs-string">&quot;Couldn&#x27;t load images with different size images.\n&quot;</span>); <span class="hljs-comment">//エラーを返そう</span>                    <span class="hljs-keyword">break</span>;                &#125;                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">rawloader</span>::RawImageData::<span class="hljs-title function_ invoke__">Integer</span>(data) = image.data &#123;                    <span class="hljs-keyword">for</span> <span class="hljs-variable">pix</span> <span class="hljs-keyword">in</span> data &#123;                        img.<span class="hljs-title function_ invoke__">push</span>(pix <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>);                    &#125;                &#125; <span class="hljs-keyword">else</span> &#123;                    <span class="hljs-built_in">eprintln!</span>(<span class="hljs-string">&quot;Don&#x27;t know how to process non-integer raw files&quot;</span>); <span class="hljs-comment">//エラーを返そう</span>                    <span class="hljs-keyword">break</span>;                &#125;            &#125;            <span class="hljs-title function_ invoke__">Err</span>(err) =&gt; openresult = <span class="hljs-title function_ invoke__">Err</span>(IOErr::<span class="hljs-title function_ invoke__">RawLoaderError</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;:?&#125;&quot;</span>, err))),        &#125;        imagecount += <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">match</span> openresult &#123;        <span class="hljs-title function_ invoke__">Ok</span>(_) =&gt; &#123;            <span class="hljs-keyword">let</span> <span class="hljs-variable">img</span> = Array::<span class="hljs-title function_ invoke__">from_shape_vec</span>((pathlist_len, height, width), img).<span class="hljs-title function_ invoke__">unwrap</span>();            <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array</span>(Dimensioned::<span class="hljs-title function_ invoke__">new</span>(                img.<span class="hljs-title function_ invoke__">into_dyn</span>(),                Unit::<span class="hljs-literal">None</span>,            ))))        &#125;        <span class="hljs-title function_ invoke__">Err</span>(_) =&gt; openresult,    &#125;&#125;</code></pre><p>cake_transform!マクロは，ノードを作るためのマクロです．引数で入力の型を指定し，-&gt;以降に出力の型を指定します．複数のデータを出力することも可能です．実際のデータは，<code>Vec&lt;Result&lt;IOValue, IOErr&gt;&gt;</code> という型のベクタで返しています．<br><video src="https://dabokun.github.io/images/00000046-aflak-improc-01/tw01.mp4" width="674" height="360" controls></video><br>i番目の画像をスライスして取り出して表示できています．</p><p>これで統計値計算への準備が整いましたので，<strong>このタイミングであぷらなーとさんに連絡をし，Nikon D3 と D810A のダークデータをいただきました（妥当性の検証ができるのはとても助かります，ありがたいです）</strong>．とりあえず D3 のダーク Raw データが開けそうなので，こちらを使っていきます．</p><h4 id="その2-統計値計算（三次元データ→二次元データ）"><a href="#その2-統計値計算（三次元データ→二次元データ）" class="headerlink" title="その2. 統計値計算（三次元データ→二次元データ）"></a>その2. 統計値計算（三次元データ→二次元データ）</h4><p>三次元データを生成したら，<strong>各種統計値を計算する</strong>ノードを作っていきます．平均はすでに実装済みでしたし，分散と標準偏差も使っている <a href="https://docs.rs/ndarray/0.14.0/ndarray/">ndarray</a> ライブラリに<a href="https://docs.rs/ndarray/0.14.0/ndarray/struct.ArrayBase.html#method.mean_axis">計算するための関数</a>があります．中央値だけは，こちらで実装する必要がありそうだったので用意．</p><pre><code class="hljs Rust">cake_transform!(    <span class="hljs-string">&quot;Average for Image. Parameters: a=start, b=end (a &lt;= b).</span><span class="hljs-string">Compute (Sum[k, &#123;a, b&#125;]image[k]) / (b - a). image[k] is k-th slice of image.</span><span class="hljs-string">Second output contains (a + b) / 2</span><span class="hljs-string">Third output contains (b - a)</span><span class="hljs-string">Note: indices for a and b start from 0&quot;</span>,    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,    average&lt;IOValue, IOErr&gt;(image: Image, start: Integer = <span class="hljs-number">0</span>, end: Integer = <span class="hljs-number">1</span>) <span class="hljs-punctuation">-&gt;</span> Image, Float, Float &#123;        <span class="hljs-keyword">let</span> <span class="hljs-variable">middle</span> = (*start <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> + *end <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>) / <span class="hljs-number">2.0</span>;        <span class="hljs-keyword">let</span> <span class="hljs-variable">width</span> = *end <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> - *start <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;        <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">run_average</span>(image, *start, *end), <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Float</span>(middle)), <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Float</span>(width))]    &#125;),cake_transform!(    <span class="hljs-string">&quot;Variance for Image. Parameters: a=start, b=end (a &lt;= b).&quot;</span>,    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,    variance&lt;IOValue, IOErr&gt;(image: Image, start: Integer = <span class="hljs-number">0</span>, end: Integer = <span class="hljs-number">1</span>) <span class="hljs-punctuation">-&gt;</span> Image&#123;        <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">run_variance</span>(image, *start, *end)]    &#125;),cake_transform!(    <span class="hljs-string">&quot;Stddev for Image. Parameters: a=start, b=end (a &lt;= b).&quot;</span>,    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,    stddev&lt;IOValue, IOErr&gt;(image: Image, start: Integer = <span class="hljs-number">0</span>, end: Integer = <span class="hljs-number">1</span>) <span class="hljs-punctuation">-&gt;</span> Image&#123;        <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">run_stddev</span>(image, *start, *end)]    &#125;),cake_transform!(    <span class="hljs-string">&quot;Median for Image. Parameters: a=start, b=end (a &lt;= b).&quot;</span>,    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,    median&lt;IOValue, IOErr&gt;(image: Image, start: Integer = <span class="hljs-number">0</span>, end: Integer = <span class="hljs-number">1</span>) <span class="hljs-punctuation">-&gt;</span> Image&#123;        <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">run_median</span>(image, *start, *end)]    &#125;),<span class="hljs-keyword">fn</span> <span class="hljs-title function_">reduce_array_slice</span>&lt;F&gt;(image: &amp;WcsArray, start: <span class="hljs-type">i64</span>, end: <span class="hljs-type">i64</span>, f: F) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt;<span class="hljs-keyword">where</span>    F: <span class="hljs-title function_ invoke__">Fn</span>(&amp;ArrayViewD&lt;<span class="hljs-type">f32</span>&gt;) <span class="hljs-punctuation">-&gt;</span> ArrayD&lt;<span class="hljs-type">f32</span>&gt;,&#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">start</span> = try_into_unsigned!(start)?;    <span class="hljs-keyword">let</span> <span class="hljs-variable">end</span> = try_into_unsigned!(end)?;    is_sliceable!(image, start, end)?;    <span class="hljs-keyword">let</span> <span class="hljs-variable">image_val</span> = image.<span class="hljs-title function_ invoke__">scalar</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">slices</span> = image_val.<span class="hljs-title function_ invoke__">slice_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>), Slice::<span class="hljs-title function_ invoke__">from</span>(start..end));    <span class="hljs-keyword">let</span> <span class="hljs-variable">raw</span> = <span class="hljs-title function_ invoke__">f</span>(&amp;slices);    <span class="hljs-keyword">let</span> <span class="hljs-variable">ndim</span> = raw.<span class="hljs-title function_ invoke__">ndim</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">wrap_with_unit</span> = image.<span class="hljs-title function_ invoke__">make_slice</span>(        &amp;(<span class="hljs-number">0</span>..ndim).<span class="hljs-title function_ invoke__">map</span>(|i| (i, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>)).collect::&lt;<span class="hljs-type">Vec</span>&lt;_&gt;&gt;(),        image.<span class="hljs-title function_ invoke__">array</span>().<span class="hljs-title function_ invoke__">with_new_value</span>(raw),    );    <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(wrap_with_unit))&#125;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_average</span>(image: &amp;WcsArray, start: <span class="hljs-type">i64</span>, end: <span class="hljs-type">i64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    <span class="hljs-title function_ invoke__">reduce_array_slice</span>(image, start, end, |slices| slices.<span class="hljs-title function_ invoke__">mean_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>)))&#125;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_variance</span>(image: &amp;WcsArray, start: <span class="hljs-type">i64</span>, end: <span class="hljs-type">i64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    <span class="hljs-title function_ invoke__">reduce_array_slice</span>(image, start, end, |slices| slices.<span class="hljs-title function_ invoke__">var_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>), <span class="hljs-number">1.0</span>))&#125;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_stddev</span>(image: &amp;WcsArray, start: <span class="hljs-type">i64</span>, end: <span class="hljs-type">i64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    <span class="hljs-title function_ invoke__">reduce_array_slice</span>(image, start, end, |slices| slices.<span class="hljs-title function_ invoke__">std_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>), <span class="hljs-number">1.0</span>))&#125;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_median</span>(image: &amp;WcsArray, start: <span class="hljs-type">i64</span>, end: <span class="hljs-type">i64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">start</span> = try_into_unsigned!(start)?;    <span class="hljs-keyword">let</span> <span class="hljs-variable">end</span> = try_into_unsigned!(end)?;    is_sliceable!(image, start, end)?;    <span class="hljs-keyword">let</span> <span class="hljs-variable">image_val</span> = image.<span class="hljs-title function_ invoke__">scalar</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">slices</span> = image_val.<span class="hljs-title function_ invoke__">slice_axis</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>), Slice::<span class="hljs-title function_ invoke__">from</span>(start..end));    <span class="hljs-keyword">let</span> <span class="hljs-variable">dim</span> = slices.<span class="hljs-title function_ invoke__">dim</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">size</span> = dim.<span class="hljs-title function_ invoke__">as_array_view</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">new_size</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = size.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">skip</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_ invoke__">cloned</span>().<span class="hljs-title function_ invoke__">collect</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = ArrayD::<span class="hljs-title function_ invoke__">from_shape_fn</span>(new_size, |index| &#123;        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">vals</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();        <span class="hljs-keyword">for</span> (_, slice) <span class="hljs-keyword">in</span> slices.<span class="hljs-title function_ invoke__">axis_iter</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">0</span>)).<span class="hljs-title function_ invoke__">enumerate</span>() &#123;            vals.<span class="hljs-title function_ invoke__">push</span>(slice[&amp;index]);        &#125;        <span class="hljs-comment">//consider NaN!</span>        vals.<span class="hljs-title function_ invoke__">sort_by</span>(|a, b| a.<span class="hljs-title function_ invoke__">partial_cmp</span>(b).<span class="hljs-title function_ invoke__">unwrap</span>());        <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = vals.<span class="hljs-title function_ invoke__">len</span>();        <span class="hljs-keyword">if</span> n % <span class="hljs-number">2</span> == <span class="hljs-number">1</span> &#123;            vals[(n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>]        &#125; <span class="hljs-keyword">else</span> &#123;            (vals[n / <span class="hljs-number">2</span>] + vals[n / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>]) / <span class="hljs-number">2.0</span>        &#125;    &#125;);    <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array</span>(Dimensioned::<span class="hljs-title function_ invoke__">new</span>(        result,        Unit::<span class="hljs-literal">None</span>,    ))))&#125;</code></pre><p><video src="https://dabokun.github.io/images/00000046-aflak-improc-01/tw02.mp4" width="674" height="360" controls></video><br>これは平均を計算するノード（average ノード）を使った例です．3枚のデタラメなライトフレームを単純に加算平均してます．</p><p>これで位置合わせなしコンポジット機構もできましたので，<strong>位置合わせのいらない master dark や master flat をコンポジットするのはこのプログラムだけで完結できる</strong>ということになります．やったー．</p><h4 id="その3-リストへ変換"><a href="#その3-リストへ変換" class="headerlink" title="その3. リストへ変換"></a>その3. リストへ変換</h4><p>統計値計算をして得られるデータは二次元のデータです．各画素に，その位置の画素の統計値が入っています．ノイズ解析用 scatterplots ではこれらの統計値を横軸，縦軸の値として使用するため，<strong>一次元リストへ変換</strong>しておくと便利です．<br>ついでに常用対数を通した値にしておきます．</p><pre><code class="hljs Rust">cake_transform!(    <span class="hljs-string">&quot;Convert 2d image to 1d list.&quot;</span>,    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,    convert_to_1d_image&lt;IOValue, IOErr&gt;(image: Image) <span class="hljs-punctuation">-&gt;</span> Image&#123;        <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">run_convert_to_1d</span>(image)]    &#125;),cake_transform!(    <span class="hljs-string">&quot;Convert to log10&quot;</span>,    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,    log10&lt;IOValue, IOErr&gt;(image: Image) <span class="hljs-punctuation">-&gt;</span> Image &#123;        <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">run_log10</span>(image)]    &#125;),<span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_convert_to_1d</span>(image: &amp;WcsArray) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    dim_is!(image, <span class="hljs-number">2</span>)?;    <span class="hljs-keyword">let</span> <span class="hljs-variable">image_val</span> = image.<span class="hljs-title function_ invoke__">scalar</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">list_size</span> = *image_val.<span class="hljs-title function_ invoke__">dim</span>().<span class="hljs-title function_ invoke__">as_array_view</span>().<span class="hljs-title function_ invoke__">first</span>().<span class="hljs-title function_ invoke__">unwrap</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">list</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(list_size);    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..list_size &#123;        <span class="hljs-keyword">for</span> <span class="hljs-variable">val</span> <span class="hljs-keyword">in</span> image_val.<span class="hljs-title function_ invoke__">slice</span>(s![i, ..]) &#123;            list.<span class="hljs-title function_ invoke__">push</span>(*val);        &#125;    &#125;    <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(        image.<span class="hljs-title function_ invoke__">make_slice</span>(            &amp;[(<span class="hljs-number">2</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>)],            image                .<span class="hljs-title function_ invoke__">array</span>()                .<span class="hljs-title function_ invoke__">with_new_value</span>(Array1::<span class="hljs-title function_ invoke__">from_vec</span>(list).<span class="hljs-title function_ invoke__">into_dyn</span>()),        ),    ))&#125;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_log10</span>(image: &amp;WcsArray) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">out</span> = image.<span class="hljs-title function_ invoke__">clone</span>();    <span class="hljs-keyword">for</span> <span class="hljs-variable">v</span> <span class="hljs-keyword">in</span> out.<span class="hljs-title function_ invoke__">scalar_mut</span>().<span class="hljs-title function_ invoke__">iter_mut</span>() &#123;        *v = v.<span class="hljs-title function_ invoke__">log10</span>();    &#125;    <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(out))&#125;</code></pre><h4 id="その4-scatterplots-の描画"><a href="#その4-scatterplots-の描画" class="headerlink" title="その4. scatterplots の描画"></a>その4. scatterplots の描画</h4><p>これらの2つのリストから，scatterplots データを作っていきます．このプログラムでは<strong>様々な次元のデータを様々な形式で見られるようにしたい</strong>ので，最終データには「タグ文字列」を付加するようにしています．今回の場合，<strong>形状が (2, データ数) の “scatter” タグがついた二次元データをscatterplots と解釈して描画</strong>することになります．</p><pre><code class="hljs Rust">cake_transform!(    <span class="hljs-string">&quot;Create scatterplots from two 1D lists.&quot;</span>,    <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,    create_scatter&lt;IOValue, IOErr&gt;(xaxis: Image, yaxis: Image) <span class="hljs-punctuation">-&gt;</span> Image&#123;        <span class="hljs-built_in">vec!</span>[<span class="hljs-title function_ invoke__">run_create_scatter</span>(xaxis, yaxis)]    &#125;),<span class="hljs-keyword">fn</span> <span class="hljs-title function_">run_create_scatter</span>(xaxis: &amp;WcsArray, yaxis: &amp;WcsArray) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;IOValue, IOErr&gt; &#123;    dim_is!(xaxis, <span class="hljs-number">1</span>)?;    dim_is!(yaxis, <span class="hljs-number">1</span>)?;    are_same_dim!(xaxis, yaxis)?;    <span class="hljs-keyword">let</span> <span class="hljs-variable">image_val</span> = xaxis.<span class="hljs-title function_ invoke__">scalar</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">width</span> = image_val.<span class="hljs-title function_ invoke__">len</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">img</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">2</span> * width);    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..width &#123;        <span class="hljs-keyword">for</span> <span class="hljs-variable">val</span> <span class="hljs-keyword">in</span> image_val.<span class="hljs-title function_ invoke__">slice</span>(s![i]) &#123;            img.<span class="hljs-title function_ invoke__">push</span>(*val);        &#125;    &#125;    <span class="hljs-keyword">let</span> <span class="hljs-variable">image_val</span> = yaxis.<span class="hljs-title function_ invoke__">scalar</span>();    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..width &#123;        <span class="hljs-keyword">for</span> <span class="hljs-variable">val</span> <span class="hljs-keyword">in</span> image_val.<span class="hljs-title function_ invoke__">slice</span>(s![i]) &#123;            img.<span class="hljs-title function_ invoke__">push</span>(*val);        &#125;    &#125;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">datapoints</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..width &#123;        datapoints.<span class="hljs-title function_ invoke__">push</span>((img[i], img[i + width]));    &#125;    datapoints.<span class="hljs-title function_ invoke__">sort_by</span>(|a, b| a.<span class="hljs-title function_ invoke__">partial_cmp</span>(b).<span class="hljs-title function_ invoke__">unwrap</span>());    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">res</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">2</span> * width);    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..width &#123;        res.<span class="hljs-title function_ invoke__">push</span>(datapoints[i].<span class="hljs-number">0</span>);    &#125;    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..width &#123;        res.<span class="hljs-title function_ invoke__">push</span>(datapoints[i].<span class="hljs-number">1</span>);    &#125;    <span class="hljs-keyword">let</span> <span class="hljs-variable">img</span> = Array::<span class="hljs-title function_ invoke__">from_shape_vec</span>((<span class="hljs-number">2</span>, width), res).<span class="hljs-title function_ invoke__">unwrap</span>();    <span class="hljs-title function_ invoke__">Ok</span>(IOValue::<span class="hljs-title function_ invoke__">Image</span>(WcsArray::<span class="hljs-title function_ invoke__">from_array_and_tag</span>(        Dimensioned::<span class="hljs-title function_ invoke__">new</span>(img.<span class="hljs-title function_ invoke__">into_dyn</span>(), Unit::<span class="hljs-literal">None</span>),        <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">&quot;scatter&quot;</span>)), <span class="hljs-comment">//タグを付与するよ</span>    )))&#125;</code></pre><p>うーん．コードが汚い．ここはなんとかしたいですね…．<br>データポイントをとりあえずソートしています．これは描画を軽くするために必要なのですが，あとあとアルゴリズムを変えるかもしれません．<br>最後に scatterplots を描画してみます．ライブラリは <a href="https://docs.rs/implot/0.3.0/implot/">implot</a> を利用．</p><pre><code class="hljs Rust"><span class="hljs-title function_ invoke__">Some</span>(tag) =&gt; <span class="hljs-keyword">match</span> tag.<span class="hljs-title function_ invoke__">as_ref</span>() &#123;    <span class="hljs-string">&quot;scatter&quot;</span> =&gt; <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">dim</span>().<span class="hljs-title function_ invoke__">ndim</span>() &#123; <span class="hljs-comment">//タグを認識するよ</span>        <span class="hljs-number">2</span> =&gt; &#123; <span class="hljs-comment">//データは今のところ2次元に限定</span>            <span class="hljs-keyword">let</span> <span class="hljs-variable">state</span> = &amp;<span class="hljs-keyword">mut</span> ctx.window.scatter_lineplot_state;            <span class="hljs-keyword">let</span> <span class="hljs-variable">plot_ui</span> = ctx.plotcontext.<span class="hljs-title function_ invoke__">get_plot_ui</span>();            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Err</span>(e) = ui.<span class="hljs-title function_ invoke__">scatter</span>(                &amp;<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">scalar2</span>(),                &amp;plot_ui,                <span class="hljs-title function_ invoke__">Some</span>(&amp;AxisTransform::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Median&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, |x| x)),                <span class="hljs-title function_ invoke__">Some</span>(&amp;AxisTransform::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Standard Deviation&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, |y| y)),                state,            ) &#123;                ui.<span class="hljs-title function_ invoke__">text</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Error on drawing plot! &#123;&#125;&quot;</span>, e))            &#125;        &#125;        _ =&gt; &#123;            ui.<span class="hljs-title function_ invoke__">text</span>(<span class="hljs-built_in">format!</span>(                <span class="hljs-string">&quot;Unimplemented for scatter of dimension &#123;&#125;&quot;</span>,                <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">ndim</span>()            ));        &#125;    &#125;,&#125;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">scatter</span>&lt;S, FX, FY&gt;(    &amp;<span class="hljs-keyword">self</span>,    image: &amp;ArrayBase&lt;S, Ix2&gt;,    plot_ui: &amp;PlotUi,    xaxis: <span class="hljs-type">Option</span>&lt;&amp;AxisTransform&lt;FX&gt;&gt;,    yaxis: <span class="hljs-type">Option</span>&lt;&amp;AxisTransform&lt;FY&gt;&gt;,    state: &amp;<span class="hljs-keyword">mut</span> State,) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), Error&gt;<span class="hljs-keyword">where</span>    S: Data&lt;Elem = <span class="hljs-type">f32</span>&gt;,    FX: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span>,    FY: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span>,&#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">cursor_screen_pos</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">window_pos</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">window_pos</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">window_size</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">window_size</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">size</span> = [window_size[<span class="hljs-number">0</span>], window_size[<span class="hljs-number">1</span>] - (p[<span class="hljs-number">1</span>] - window_pos[<span class="hljs-number">1</span>])];    state.<span class="hljs-title function_ invoke__">simple_plot</span>(<span class="hljs-keyword">self</span>, image, &amp;plot_ui, xaxis, yaxis, size)&#125;<span class="hljs-title function_ invoke__">pub</span>(<span class="hljs-keyword">crate</span>) <span class="hljs-keyword">fn</span> <span class="hljs-title function_">simple_plot</span>&lt;S, FX, FY&gt;(    &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>,    ui: &amp;Ui,    image: &amp;ArrayBase&lt;S, Ix2&gt;,    plot_ui: &amp;PlotUi,    horizontal_axis: <span class="hljs-type">Option</span>&lt;&amp;AxisTransform&lt;FX&gt;&gt;,    vertical_axis: <span class="hljs-type">Option</span>&lt;&amp;AxisTransform&lt;FY&gt;&gt;,    size: [<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>],) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), Error&gt;<span class="hljs-keyword">where</span>    S: Data&lt;Elem = <span class="hljs-type">f32</span>&gt;,    FX: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span>,    FY: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span>,&#123;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">haxisname</span> = <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">vaxisname</span> = <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">haxisunit</span> = <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">vaxisunit</span> = <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(haxistrans) = horizontal_axis &#123;        haxisname = haxistrans.<span class="hljs-title function_ invoke__">label</span>();        haxisunit = haxistrans.<span class="hljs-title function_ invoke__">unit</span>();    &#125;    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(vaxistrans) = vertical_axis &#123;        vaxisname = vaxistrans.<span class="hljs-title function_ invoke__">label</span>();        vaxisunit = vaxistrans.<span class="hljs-title function_ invoke__">unit</span>();    &#125;    <span class="hljs-keyword">let</span> <span class="hljs-variable">haxislabel</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125; (&#123;&#125;)&quot;</span>, haxisname, haxisunit);    <span class="hljs-keyword">let</span> <span class="hljs-variable">vaxislabel</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125; (&#123;&#125;)&quot;</span>, vaxisname, vaxisunit);    <span class="hljs-keyword">let</span> <span class="hljs-variable">size</span> = [size[<span class="hljs-number">0</span>] - <span class="hljs-number">15.0</span>, size[<span class="hljs-number">1</span>] - <span class="hljs-number">15.0</span>];    <span class="hljs-keyword">let</span> <span class="hljs-variable">xaxis</span> = image.<span class="hljs-title function_ invoke__">slice</span>(s![<span class="hljs-number">0</span>, ..]).<span class="hljs-title function_ invoke__">to_vec</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">yaxis</span> = image.<span class="hljs-title function_ invoke__">slice</span>(s![<span class="hljs-number">1</span>, ..]).<span class="hljs-title function_ invoke__">to_vec</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">datapoints</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..xaxis.<span class="hljs-title function_ invoke__">len</span>() &#123;        datapoints.<span class="hljs-title function_ invoke__">push</span>((xaxis[i], yaxis[i]));    &#125;    <span class="hljs-keyword">let</span> <span class="hljs-variable">content_width</span> = ui.<span class="hljs-title function_ invoke__">window_content_region_width</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">plot_limits</span>: <span class="hljs-type">Option</span>&lt;ImPlotLimits&gt; = <span class="hljs-literal">None</span>;    Plot::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;Noise Analysis of Nikon D3, Median--Standard Deviation&quot;</span>)        .<span class="hljs-title function_ invoke__">size</span>(content_width, size[<span class="hljs-number">1</span>])        .<span class="hljs-title function_ invoke__">x_label</span>(&amp;haxislabel)        .<span class="hljs-title function_ invoke__">y_label</span>(&amp;vaxislabel)        .<span class="hljs-title function_ invoke__">x_limits</span>(&amp;ImPlotRange &#123; Min: <span class="hljs-number">0.0</span>, Max: <span class="hljs-number">4.0</span> &#125;, Condition::FirstUseEver)        .<span class="hljs-title function_ invoke__">y_limits</span>(            &amp;ImPlotRange &#123; Min: <span class="hljs-number">0.0</span>, Max: <span class="hljs-number">3.0</span> &#125;,            YAxisChoice::First,            Condition::FirstUseEver,        )        .<span class="hljs-title function_ invoke__">build</span>(plot_ui, || &#123;            plot_limits = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-title function_ invoke__">get_plot_limits</span>(<span class="hljs-literal">None</span>));            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">xaxis</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">yaxis</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">new</span>();            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(plot) = plot_limits &#123;                <span class="hljs-keyword">let</span> (xmin, xmax, ymin, ymax) = (plot.X.Min, plot.X.Max, plot.Y.Min, plot.Y.Max);                datapoints.<span class="hljs-title function_ invoke__">retain</span>(|&amp;data| &#123;                    xmin &lt;= data.<span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>                        &amp;&amp; data.<span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> &lt;= xmax                        &amp;&amp; ymin &lt;= data.<span class="hljs-number">1</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>                        &amp;&amp; data.<span class="hljs-number">1</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span> &lt;= ymax                &#125;);                <span class="hljs-keyword">let</span> <span class="hljs-variable">xstep</span> = (xmax - xmin) / <span class="hljs-number">50.0</span>;                <span class="hljs-keyword">let</span> <span class="hljs-variable">ystep</span> = (ymax - ymin) / <span class="hljs-number">50.0</span>;                datapoints.<span class="hljs-title function_ invoke__">dedup_by</span>(|a, b| &#123;                    (a.<span class="hljs-number">0</span> - b.<span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">abs</span>() &lt; xstep <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> &amp;&amp; (a.<span class="hljs-number">1</span> - b.<span class="hljs-number">1</span>).<span class="hljs-title function_ invoke__">abs</span>() &lt; ystep <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>                &#125;);                <span class="hljs-keyword">for</span> <span class="hljs-variable">datapoint</span> <span class="hljs-keyword">in</span> datapoints &#123;                    xaxis.<span class="hljs-title function_ invoke__">push</span>(datapoint.<span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>);                    yaxis.<span class="hljs-title function_ invoke__">push</span>(datapoint.<span class="hljs-number">1</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>);                &#125;            &#125; <span class="hljs-keyword">else</span> &#123;            &#125;            PlotScatter::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">&quot;data point&quot;</span>).<span class="hljs-title function_ invoke__">plot</span>(&amp;xaxis, &amp;yaxis);        &#125;);    <span class="hljs-title function_ invoke__">Ok</span>(())&#125;</code></pre><p>ソートされているので，dedup関数で近い位置のデータを削除して描画点を減らしているわけですが，dedup関数の仕様上思惑通りにはいきません．<strong>この関数は連続する要素しか見ないので，y軸の値が近いのデータペアを見つけられない</strong>ためです．ここは要改善です．<br>最終的には，こんな感じのデータが見られます．<br><video src="https://dabokun.github.io/images/00000046-aflak-improc-01/tw03.mp4" width="674" height="360" controls></video><br><img src="/images/00000046-aflak-improc-01/tw01.jpg" alt="今回得られた結果">↑今回得られた散布図．↓あぷらなーとさんの結果<br><img src="/images/00000046-aflak-improc-01/tw02.png" alt="あぷらなーとさんの結果"></p><p>ある程度インタラクティブに拡大したり，移動したりといった操作ができるビューアができましたので今はこれで良しとしておきます．やったぜ．</p><p>全体のビジュアルプログラムはこんな感じ．少し複雑（？）ですが，<strong>上に書いた流れをそのまま表現</strong>しているだけです．<br><img src="/images/00000046-aflak-improc-01/02.jpg" alt="ダークノイズ解析のビジュアルプログラム"><br>例えばこのプログラムで「中央値画像を生成」の部分を「平均値画像を生成」するようなノードに変更すれば，横軸が平均値になったようなプロットを得たりといったことが<strong>誰でもコーディングなしで</strong>できるようになるわけです．どちらかの対数に変換するノードを消せば，片対数のプロットも作れたりします．以上！</p><h4 id="おまけ-Fitsデータのカラー画像解釈"><a href="#おまけ-Fitsデータのカラー画像解釈" class="headerlink" title="おまけ. Fitsデータのカラー画像解釈"></a>おまけ. Fitsデータのカラー画像解釈</h4><p>研究では輝度単一の値をカラーテーブルで変換することでしかデータを見てこなかったので，普通の天体画像のように3チャンネルあるような Fits データをカラー画像解釈できるようにしていきます．つまり，<strong>形状が (3, 画像横幅，画像縦幅) の “color_image” タグがついた三次元データをカラー画像と解釈して描画</strong>することになります．<br>チャンネル取り出しだけですが，<a href="https://fornax.hateblo.jp/entry/20210103/1609605334">ぐらすのすちさんも似たようなこと</a>をやっています．</p><pre><code class="hljs Rust"><span class="hljs-title function_ invoke__">Some</span>(tag) =&gt; <span class="hljs-keyword">match</span> tag.<span class="hljs-title function_ invoke__">as_ref</span>() &#123;    <span class="hljs-string">&quot;color_image&quot;</span> =&gt; <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">dim</span>().<span class="hljs-title function_ invoke__">ndim</span>() &#123;        <span class="hljs-number">3</span> =&gt; &#123;            <span class="hljs-comment">/*省略*/</span>            <span class="hljs-keyword">if</span> new_incoming_image &#123;                <span class="hljs-comment">/*省略*/</span>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Err</span>(e) = state.<span class="hljs-title function_ invoke__">set_color_image</span>(                    image_ref,                    ctx.created_on,                    ctx.gl_ctx,                    texture_id,                    ctx.textures,                ) &#123;                    ui.<span class="hljs-title function_ invoke__">text</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Error on creating image! &#123;&#125;&quot;</span>, e));                &#125;            &#125;            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Err</span>(e) = ui.<span class="hljs-title function_ invoke__">color_image</span>(                ctx.gl_ctx,                ctx.textures,                texture_id,                unit,                x_transform.<span class="hljs-title function_ invoke__">as_ref</span>(),                y_transform.<span class="hljs-title function_ invoke__">as_ref</span>(),                state,            ) &#123;                ui.<span class="hljs-title function_ invoke__">text</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;Error on drawing image! &#123;&#125;&quot;</span>, e));            &#125;        &#125;        _ =&gt; &#123;            ui.<span class="hljs-title function_ invoke__">text</span>(<span class="hljs-built_in">format!</span>(                <span class="hljs-string">&quot;Unimplemented for color image of dimension &#123;&#125;&quot;</span>,                <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">ndim</span>()            ));        &#125;    &#125;,    _ =&gt; &#123;        ui.<span class="hljs-title function_ invoke__">text</span>(<span class="hljs-built_in">format!</span>(            <span class="hljs-string">&quot;Unimplemented for visualization tag &#123;&#125;&quot;</span>,            <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">scalar</span>().<span class="hljs-title function_ invoke__">ndim</span>()        ));    &#125;&#125;,<span class="hljs-comment">//state.set_color_image()の中身</span><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">set_color_image</span>&lt;F&gt;(    &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>,    image: I,    created_on: Instant,    ctx: &amp;F,    texture_id: TextureId,    textures: &amp;<span class="hljs-keyword">mut</span> Textures,) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), Error&gt;<span class="hljs-keyword">where</span>    F: Facade,&#123;    <span class="hljs-keyword">self</span>.image =        image::Image::<span class="hljs-title function_ invoke__">color_new</span>(image, created_on, ctx, texture_id, textures, &amp;<span class="hljs-keyword">self</span>.lut)?;    <span class="hljs-title function_ invoke__">Ok</span>(())&#125;<span class="hljs-comment">//image::Image::color_new()の中身</span><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">color_new</span>&lt;F&gt;(    image: I,    created_on: Instant,    ctx: &amp;F,    texture_id: TextureId,    textures: &amp;<span class="hljs-keyword">mut</span> Textures,    lut: &amp;ColorLUT,) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Image&lt;I&gt;, Error&gt;<span class="hljs-keyword">where</span>    F: Facade,&#123;    <span class="hljs-keyword">let</span> (vmin, vmax, tex_size, hist) = &#123;        <span class="hljs-keyword">let</span> <span class="hljs-variable">image</span> = <span class="hljs-title function_ invoke__">coerce_to_array_view3</span>(&amp;image);        <span class="hljs-keyword">let</span> <span class="hljs-variable">vmin</span> = lims::<span class="hljs-title function_ invoke__">get_vmin</span>(&amp;image)?;        <span class="hljs-keyword">let</span> <span class="hljs-variable">vmax</span> = lims::<span class="hljs-title function_ invoke__">get_vmax</span>(&amp;image)?;        <span class="hljs-keyword">let</span> <span class="hljs-variable">raw</span> = <span class="hljs-title function_ invoke__">make_raw_image_rgb</span>(&amp;image, vmin, vmax, lut)?;        <span class="hljs-keyword">let</span> <span class="hljs-variable">gl_texture</span> = Texture2d::<span class="hljs-title function_ invoke__">new</span>(ctx, raw)?;        <span class="hljs-keyword">let</span> <span class="hljs-variable">tex_size</span> = gl_texture.<span class="hljs-title function_ invoke__">dimensions</span>();        <span class="hljs-keyword">let</span> <span class="hljs-variable">tex_size</span> = (tex_size.<span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>, tex_size.<span class="hljs-number">1</span> <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>);        textures.<span class="hljs-title function_ invoke__">replace</span>(            texture_id,            Texture &#123;                texture: Rc::<span class="hljs-title function_ invoke__">new</span>(gl_texture),                sampler: SamplerBehavior &#123;                    ..<span class="hljs-built_in">Default</span>::<span class="hljs-title function_ invoke__">default</span>()                &#125;,            &#125;,        );        <span class="hljs-keyword">let</span> <span class="hljs-variable">hist</span> = hist::<span class="hljs-title function_ invoke__">histogram_color</span>(&amp;image, vmin, vmax);        (vmin, vmax, tex_size, hist)    &#125;;    <span class="hljs-title function_ invoke__">Ok</span>(Image &#123;        vmin,        vmax,        tex_size,        created_on: <span class="hljs-title function_ invoke__">Some</span>(created_on),        data: <span class="hljs-title function_ invoke__">Some</span>(image),        hist,    &#125;)&#125;<span class="hljs-comment">//make_raw_image_rgb()の中身</span><span class="hljs-keyword">fn</span> <span class="hljs-title function_">make_raw_image_rgb</span>&lt;S&gt;(    image: &amp;ArrayBase&lt;S, Ix3&gt;,    vmin: <span class="hljs-type">f32</span>,    vmax: <span class="hljs-type">f32</span>,    _lut: &amp;ColorLUT,) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;RawImage2d&lt;<span class="hljs-symbol">&#x27;static</span>, <span class="hljs-type">u8</span>&gt;, Error&gt;<span class="hljs-keyword">where</span>    S: Data&lt;Elem = <span class="hljs-type">f32</span>&gt;,&#123;    <span class="hljs-keyword">let</span> (_c, m, n) = image.<span class="hljs-title function_ invoke__">dim</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">data</span> = <span class="hljs-type">Vec</span>::<span class="hljs-title function_ invoke__">with_capacity</span>(<span class="hljs-number">3</span> * n * m);    <span class="hljs-keyword">if</span> !vmin.<span class="hljs-title function_ invoke__">is_nan</span>() &amp;&amp; !vmax.<span class="hljs-title function_ invoke__">is_nan</span>() &#123;        <span class="hljs-keyword">for</span> (_, slice) <span class="hljs-keyword">in</span> image.<span class="hljs-title function_ invoke__">axis_iter</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)).<span class="hljs-title function_ invoke__">enumerate</span>() &#123;            <span class="hljs-keyword">for</span> (_, channel) <span class="hljs-keyword">in</span> slice.<span class="hljs-title function_ invoke__">axis_iter</span>(<span class="hljs-title function_ invoke__">Axis</span>(<span class="hljs-number">1</span>)).<span class="hljs-title function_ invoke__">enumerate</span>() &#123;                <span class="hljs-keyword">let</span> <span class="hljs-variable">r</span> = channel[<span class="hljs-number">0</span>] / <span class="hljs-number">65535.0</span> * <span class="hljs-number">255.0</span>; <span class="hljs-comment">//16bit -&gt; 8bit</span>                <span class="hljs-keyword">let</span> <span class="hljs-variable">g</span> = channel[<span class="hljs-number">1</span>] / <span class="hljs-number">65535.0</span> * <span class="hljs-number">255.0</span>;                <span class="hljs-keyword">let</span> <span class="hljs-variable">b</span> = channel[<span class="hljs-number">2</span>] / <span class="hljs-number">65535.0</span> * <span class="hljs-number">255.0</span>;                data.<span class="hljs-title function_ invoke__">push</span>(r <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>);                data.<span class="hljs-title function_ invoke__">push</span>(g <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>);                data.<span class="hljs-title function_ invoke__">push</span>(b <span class="hljs-keyword">as</span> <span class="hljs-type">u8</span>);            &#125;        &#125;        <span class="hljs-title function_ invoke__">Ok</span>(RawImage2d &#123;            data: Cow::<span class="hljs-title function_ invoke__">Owned</span>(data),            width: n <span class="hljs-keyword">as</span> <span class="hljs-type">u32</span>,            height: m <span class="hljs-keyword">as</span> <span class="hljs-type">u32</span>,            format: ClientFormat::U8U8U8,        &#125;)    &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-title function_ invoke__">Err</span>(Error::<span class="hljs-title function_ invoke__">Msg</span>(<span class="hljs-string">&quot;vmin, vmax not set&quot;</span>))    &#125;&#125;<span class="hljs-comment">//===============================================================================================================</span><span class="hljs-comment">//最初のコードのui.color_image()の中身</span><span class="hljs-keyword">fn</span> <span class="hljs-title function_">color_image</span>&lt;F, FX, FY, I&gt;(    &amp;<span class="hljs-keyword">self</span>,    _ctx: &amp;F,    _textures: &amp;<span class="hljs-keyword">mut</span> Textures,    texture_id: TextureId,    vunit: &amp;<span class="hljs-type">str</span>,    xaxis: <span class="hljs-type">Option</span>&lt;&amp;AxisTransform&lt;FX&gt;&gt;,    yaxis: <span class="hljs-type">Option</span>&lt;&amp;AxisTransform&lt;FY&gt;&gt;,    state: &amp;<span class="hljs-keyword">mut</span> State&lt;I&gt;,) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), Error&gt;<span class="hljs-keyword">where</span>    F: Facade,    FX: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span>,    FY: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span>,    I: Borrow&lt;ArrayD&lt;<span class="hljs-type">f32</span>&gt;&gt;,&#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">window_pos</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">window_pos</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">cursor_pos</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">cursor_screen_pos</span>();    <span class="hljs-keyword">let</span> <span class="hljs-variable">window_size</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">window_size</span>();    <span class="hljs-keyword">const</span> HIST_WIDTH: <span class="hljs-type">f32</span> = <span class="hljs-number">40.0</span>;    <span class="hljs-keyword">const</span> BAR_WIDTH: <span class="hljs-type">f32</span> = <span class="hljs-number">20.0</span>;    <span class="hljs-keyword">const</span> RIGHT_PADDING: <span class="hljs-type">f32</span> = <span class="hljs-number">100.0</span>;    <span class="hljs-keyword">let</span> <span class="hljs-variable">image_max_size</span> = (        window_size[<span class="hljs-number">0</span>] - HIST_WIDTH - BAR_WIDTH - RIGHT_PADDING,        window_size[<span class="hljs-number">1</span>] - (cursor_pos[<span class="hljs-number">1</span>] - window_pos[<span class="hljs-number">1</span>]),    );    <span class="hljs-keyword">let</span> ([_p, _size], _x_label_height) =        state.<span class="hljs-title function_ invoke__">show_image</span>(<span class="hljs-keyword">self</span>, texture_id, vunit, xaxis, yaxis, image_max_size)?;    <span class="hljs-title function_ invoke__">Ok</span>(())&#125;<span class="hljs-comment">//state.show_image()の中身</span><span class="hljs-title function_ invoke__">pub</span>(<span class="hljs-keyword">crate</span>) <span class="hljs-keyword">fn</span> <span class="hljs-title function_">show_image</span>&lt;FX, FY&gt;(    &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>,    ui: &amp;Ui,    texture_id: TextureId,    vunit: &amp;<span class="hljs-type">str</span>,    xaxis: <span class="hljs-type">Option</span>&lt;&amp;AxisTransform&lt;FX&gt;&gt;,    yaxis: <span class="hljs-type">Option</span>&lt;&amp;AxisTransform&lt;FY&gt;&gt;,    max_size: (<span class="hljs-type">f32</span>, <span class="hljs-type">f32</span>),) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;([[<span class="hljs-type">f32</span>; <span class="hljs-number">2</span>]; <span class="hljs-number">2</span>], <span class="hljs-type">f32</span>), Error&gt;<span class="hljs-keyword">where</span>    FX: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span>,    FY: <span class="hljs-title function_ invoke__">Fn</span>(<span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f32</span>,&#123;    <span class="hljs-comment">/*省略*/</span>    ChildWindow::<span class="hljs-title function_ invoke__">new</span>(im_str!(<span class="hljs-string">&quot;scrolling_region&quot;</span>))        .<span class="hljs-title function_ invoke__">border</span>(<span class="hljs-literal">false</span>)        .<span class="hljs-title function_ invoke__">scroll_bar</span>(<span class="hljs-literal">false</span>)        .<span class="hljs-title function_ invoke__">movable</span>(<span class="hljs-literal">false</span>)        .<span class="hljs-title function_ invoke__">scrollable</span>(<span class="hljs-literal">false</span>)        .<span class="hljs-title function_ invoke__">horizontal_scrollbar</span>(<span class="hljs-literal">false</span>)        .<span class="hljs-title function_ invoke__">build</span>(ui, || &#123;            <span class="hljs-comment">/*省略*/</span>            Image::<span class="hljs-title function_ invoke__">new</span>(texture_id, size).<span class="hljs-title function_ invoke__">build</span>(ui);            <span class="hljs-comment">/*1000行くらい省略…*/</span>        &#125;);    <span class="hljs-comment">/*省略*/</span>    <span class="hljs-title function_ invoke__">Ok</span>(([p, size], x_labels_height))&#125;</code></pre><p><img src="/images/00000046-aflak-improc-01/tw03.jpg" alt="カラー画像の表示"><br>カラー画像がでました！めでたしめでたし．</p><h3 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h3><p>とりあえず三が日を使って Raw データ処理のスタートアップができました．今後は<strong>位置合わせコンポジットやコンポジット後の単一画像の画像処理など，PixInsight も導入したのでアルゴリズムを勉強しながら実装</strong>していく予定です．モジュールを分割して具体例と一緒に提供することで，僕以外の方にも使っていただけるようなものが作れたらいいなあと思っています．また何か成果が出たら記事にしたいと思います．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020年の目標を振り返る</title>
      <link href="/2020/12/29/00000045-2020-goals/"/>
      <url>/2020/12/29/00000045-2020-goals/</url>
      
        <content type="html"><![CDATA[<h3 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h3><p>2020年の目標を書いておきます．2020年末に振り返りとして公開したいと思います．<br><font color="red">というわけで見返してみました．赤字が年末になってから書いてるものです．</font></p><span id="more"></span><h4 id="環境に金をかける"><a href="#環境に金をかける" class="headerlink" title="環境に金をかける"></a>環境に金をかける</h4><p>昨年までは FSQ のことしかほぼ頭になかったので，今年はもっと小物かつ自身の普段の生活を良くするものにお金をかけたいと思います．</p><p>目標は</p><ul><li>作業椅子</li><li>自作デスクトップPC</li></ul><p><font color="red">年末になってしまいましたが，椅子は買うことができました．</font></p><p><img src="/images/00000045-2020-goals/tw01.jpg" alt="ゲーミングチェア akracing wolf"></p><p><font color="red">PCは諸事情により高性能ゲーミングノートを貸与されてしまったので，しばらくは保留でいいかな…．</font></p><h4 id="FSQ-の撮影環境を整える"><a href="#FSQ-の撮影環境を整える" class="headerlink" title="FSQ の撮影環境を整える"></a>FSQ の撮影環境を整える</h4><p>普段の生活を良くするものではないですが，FSQ の最低限撮影できるところまでもっていきたいです．</p><p>目標は</p><ul><li>鏡筒バンド</li><li>カメラマウント(EOS)</li><li>フラットナー</li><li>ガイド一式</li></ul><p>レデューサとエクステンダーはオプションで…．<br><font color="red">目標通りになりました．エクステンダーほしい．</font></p><h4 id="キャンプ用具を買う"><a href="#キャンプ用具を買う" class="headerlink" title="キャンプ用具を買う"></a>キャンプ用具を買う</h4><p>これも普段の生活を良くするものではないですが，キャンプ用具を一式そろえたいところではありますね．<br><font color="red">他人に甘えすぎた結果チェアしか買ってません．反省して来年になったら（特にお湯を作れるものを）揃えます…．</font></p><h4 id="サービスを一個立ち上げてみる"><a href="#サービスを一個立ち上げてみる" class="headerlink" title="サービスを一個立ち上げてみる"></a>サービスを一個立ち上げてみる</h4><p>これは去年あたりから考えていたことです．簡単な Web サービスを一つ作ってみたいと思っています．<br><font color="red">Web プログラミング何もわからないマンだったので勉強しつつ，一つだけ作っていたものがあったのですが，まだ公開には至っていません．開発環境も整えられる状況なので，また少しずつ作っていきたいな…．</font></p><h4 id="英会話を勉強する"><a href="#英会話を勉強する" class="headerlink" title="英会話を勉強する"></a>英会話を勉強する</h4><p>どうやって勉強しようか…()<br><font color="red">やりたい気持ちはあるが，まだ始めてません．特にこんなご時世になってしまったので，人と会話する機会は必要です…．</font></p><h4 id="機械学習を勉強する"><a href="#機械学習を勉強する" class="headerlink" title="機械学習を勉強する"></a>機械学習を勉強する</h4><p>天体写真に使えるかに限らず，知識としてもっておきたい．<br><font color="red">多少勉強しましたが．が，まだ大枠を掴んだ程度．</font></p><h4 id="Rust-を今以上に使いこなす"><a href="#Rust-を今以上に使いこなす" class="headerlink" title="Rust を今以上に使いこなす"></a>Rust を今以上に使いこなす</h4><p>今開発している研究用ソフトウェアを自在に改造できるレベルになりたい．<br><font color="red">これはそれなりに進められた気がします．</font></p><h4 id="研究用ソフトウェア開発を天体写真現像まで広げる"><a href="#研究用ソフトウェア開発を天体写真現像まで広げる" class="headerlink" title="研究用ソフトウェア開発を天体写真現像まで広げる"></a>研究用ソフトウェア開発を天体写真現像まで広げる</h4><p>前述のものができないとこれもできない．<br><font color="red">まだ広げられてなーい！画像は開けるので始めようと思えば始められるんですが……（あわわ）．ただ<a href="/2020/11/20/00000041-asimproc-start/">画像処理の研究会を立ち上げた</a>のは一つ前進になったかと思います．</font></p><h4 id="写真の投稿頻度を上げる"><a href="#写真の投稿頻度を上げる" class="headerlink" title="写真の投稿頻度を上げる"></a>写真の投稿頻度を上げる</h4><p>そのためには撮影頻度も上げないといけませんが…．<br><font color="red">上がりませんでしたね…まぁ今年はしゃーない！ｗ<br><br>少し遠征も振り返ってみますと，今年は3月に合宿で<a href="/2020/03/25/00000032-2020-03-komoro/" target="_blank" rel="noopener">小諸</a>，5月に<a href="/2020/06/01/00000033-2020-05-amagi/" target="_blank" rel="noopener">天城</a>，6月に<a href="/2020/07/02/00000034-2020-06-summary/" target="_blank" rel="noopener">美ヶ原</a>，7月に<a href="/2020/07/20/00000035-2020-07-neowise/" target="_blank" rel="noopener">ネオワイズ彗星目的で城ヶ島</a>，8月に<a href="/2020/08/17/00000036-2020-08-amagi/" target="_blank" rel="noopener">天城</a>，<a href="/2020/08/22/00000037-2020-08-hoshinomura/" target="_blank" rel="noopener">星の村天文台</a>，10月に<a href="/2020/10/29/00000039-2020-10/" target="_blank" rel="noopener">原村，仁科峠，大菩薩峠</a>，11月に<a href="/2020/11/17/00000040-2020-11/" target="_blank" rel="noopener">しらびそ高原，野辺山</a>，12月に<a href="/2020/12/24/00000044-2020-12-recent/" target="_blank" rel="noopener">朝霧×2</a>で，計13回でした．<br><br>稼働筒はほとんど FSQ で，こいつのために1年しっかり使えたかなと思っています．他のレンズの稼働率上げるためにもやはりカメラは必要なのだ…．<br></font></p><h4 id="修論をがんばる"><a href="#修論をがんばる" class="headerlink" title="修論をがんばる"></a>修論をがんばる</h4><p>自明．<br><font color="red">これは達成．修士を半年早期で卒業できました．</font></p><h3 id="いかがでしたか？"><a href="#いかがでしたか？" class="headerlink" title="いかがでしたか？"></a><font color="red">いかがでしたか？</font></h3><p><font color="red">できなかったこともたくさんあった2020年でしたし，多くのことにハードルができてしまった2020年でもありましたが，来年も社会情勢に負けず趣味に研究に色々やっていきたいものです．それではみなさん，良いお年を．</font></p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最近のこと（遠征とか）</title>
      <link href="/2020/12/24/00000044-2020-12-recent/"/>
      <url>/2020/12/24/00000044-2020-12-recent/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．<a href="/2020/10/29/00000039-2020-10/">10月には赤道儀を破壊</a>し，<a href="/2020/12/01/00000042-clean-failure-maaya-alt/">11月には鏡筒を破壊</a>し散々な2020年後半でしたが，捨てる神あらば拾う神あり．いくつか良いことがありました．</p><span id="more"></span><h3 id="最近のことなど"><a href="#最近のことなど" class="headerlink" title="最近のことなど"></a>最近のことなど</h3><p>まず，EM-11が帰ってきました．うれしい．</p><p><img src="/images/00000044-2020-12-recent/tw01.jpg" alt="帰ってきたEM-11"></p><p>破壊したときに押し込まれた基盤の修理と，一緒に送っていたリモコンの接触不良があったのでそれも一緒に直していただきました．なんだかんだでリモコンも鋳物でできていて重いですから，扱いには注意しないとなりませんね（おそらくケーブルを掴むことが多かったのが接触不良の原因かと）．費用は合計一万円しない程度でした．これくらいで信頼をおいている機材が戻ってくるならお安いものです．</p><p>それから，（話は変わります）学振には無事落っこった私ですが，学内で申請していたいい感じの給付型奨学金が通ったので，いくつか周辺機器を買い足しました．</p><p>まずはキーボード</p><p><img src="/images/00000044-2020-12-recent/tw02.jpg" alt="Realforce くん"></p><p>東プレ Realforce TKL S R2TLS-JPV-IV-KP です．ヨドバシで使用感を確かめて一番気に入ったものにしました．カチャカチャうるさいのはちょっと…と思ったのでスコスコいう静音タイプのものです．変荷重でタイプ感はとてもいい感じ．チキって日本語配列にしてしまいましたことに若干の後悔があるので，英語配列もほしいところです（たぶん HHKB を買う）．</p><p>続いてモニタ</p><p><img src="/images/00000044-2020-12-recent/tw03.jpg" alt="カラマネモニタ"></p><p>カラーマネジメントモニタ EIZO CS2731 です．せっかくなのでフード，ライト，キャリブレーションセンサも買っちゃいました．24インチか27インチで迷いましたがあまり変わらなさそうということでえいやと27インチに．文字も追うことを考えて解像度は 4K ではなく WQHD のモデルとしました．まだ届いたばかりですが，この広さのモニタをもつのは初めてで，革命的便利さを感じ取っています．これからガンガン使っていく予定です．</p><p><img src="/images/00000044-2020-12-recent/tw04.jpg" alt="キャリブレーションの様子"><br><img src="/images/00000044-2020-12-recent/tw05.jpg" alt="較正完了"></p><p>早速キャリブレーションしてみました，無事できているようで安心．プリンタを買って（まだ買ってないのかよ）色合わせして印刷してみるのが楽しみです．</p><p>本当はゲーミングチェアも買ったのですが，届くのは来月になりそうということでまた次回以降の記事でそれについては書こうと思います．</p><p>「天文機材は買わないの？」という声がどこかから聞こえてきそうですが，私は奨学金の面接で使いみちを問われた際，「自宅での研究環境を充実させるために使います」と言ってしまったので，こういう使い方になっています．趣味に使うことは我慢なのです．<br>え？「カラーマネジメントモニタは趣味に片足突っ込んでないか」だって？<br>うるさい．でも実際，これが一番いい使い方だと自負しております．</p><h3 id="遠征記とか"><a href="#遠征記とか" class="headerlink" title="遠征記とか"></a>遠征記とか</h3><p>12月には二回遠征に行きました．ふたご座流星群極大近辺の12-13日と，翌週19-20日です．両方とも朝霧アリーナでしたが，前者は曇っていてほとんど撮影はできず，作品になるものはナシ．</p><p><img src="/images/00000044-2020-12-recent/tw06.jpg" alt="曇り空の下の火"><br><img src="/images/00000044-2020-12-recent/tw07.jpg" alt="極楽湯（いつもの）1"><br><img src="/images/00000044-2020-12-recent/tw08.jpg" alt="極楽湯（いつもの）2"><br><img src="/images/00000044-2020-12-recent/tw09.jpg" alt="さわやか（いつもの）"></p><p>久々にさわやかも食べられたので良しとします．</p><p>後者は現地で <a href="http://morio.way-nifty.com/blog/">M&amp;M さん</a>と初めて会い（Twitter 上での絡みは数年前からあったはずですがリアルで会うのはこれが初めてでした），天体撮影趣味や，M&amp;M さんと大変縁が深かった故<a href="https://blog.goo.ne.jp/nikutaberutoiiyo">酒力 さん</a>についてなど（<a href="https://blog.goo.ne.jp/nikutaberutoiiyo/e/fd1700bb6777b87a553e935e1b4d8064">私は彼が亡くなる数ヶ月前に天城高原でお会いしています</a>）色々な話をしつつ，忘れてきたカメラ雲台を借りたり熱エネルギーをいただいたりしました．ありがたや…．</p><p><img src="/images/00000044-2020-12-recent/tw10.jpg" alt="撮影中">借りた雲台での撮影…．</p><p><img src="/images/00000044-2020-12-recent/tw11.jpg" alt="熱エネルギー">熱エネルギーも，ありがたや…．</p><p>この日はとりあえず135mmで2対象を撮影しておきました．このレンズを使うのはほぼ1年ぶりで，いいレンズなのに稼働率が低くもったいないなという気持ち．．</p><p><img src="/images/00000044-2020-12-recent/work_01.jpg" alt="クラゲ星雲，モンキー星雲，M35周辺"></p><div style="text-align: center;">「クラゲ星雲，モンキー星雲，M35周辺」<br>2020年12月20日 2時26分～ 静岡県 朝霧アリーナ駐車場にて<br>SIGMA 135mm F1.8 DG HSM Art<br>Canon EOS 6D<br>F3.5 / ISO 1250 / 180s * 50 = 150 min<br>タカハシ EM-11 Temma2 Jr.<br>ライトダーク: ライトと同条件 * 16<br>フラット: なし（レンズプロファイル）<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p><img src="/images/00000044-2020-12-recent/work_02.jpg" alt="オリオン座南部"></p><div style="text-align: center;">「オリオン座南部」<br>2020年12月19日 22時3分～ 静岡県 朝霧アリーナ駐車場にて<br>SIGMA 135mm F1.8 DG HSM Art<br>Canon EOS 6D<br>F3.5 / ISO 1250 / 180s * 68 = 204 min<br>タカハシ EM-11 Temma2 Jr.<br>ライトダーク: ライトと同条件 * 16<br>フラット: なし（レンズプロファイル）<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p>時系列がひっくり返っていますが，クラゲモンキーM35 は M&amp;M さんに教えていただいた領域です．クラゲの明るい部分は描写されてますが，北西側の淡い部分までは微妙ですね．通常のカメラだとこんなところでしょうか．オリオン座南部は地味に初めて撮影しましたが，<a href="https://reflexions.jp/tenref/orig/2020/11/23/12083/">某プロジェクト</a>行きとなる予定です．魔女横がいい感じに出てくれたので嬉しい．</p><p>シーイングと寒さ以外は風も結露もなく，一晩快晴の素晴らしい夜だったと思います．<br><img src="/images/00000044-2020-12-recent/tw12.jpg" alt="朝の様子">爆睡していたらM&amp;Mさんは先に帰られていました．雲台を借りっぱなしだったので談合坂まで追いかけて返却しました．</p><p>そういえば，別に面白い写真も撮ってないのでこの記事には詳しく書きませんでしたが，21日周辺での連日の木星土星接近は，少しだけ眼視で見ることができ，ひじょうに感動しました．木星，衛星たちと，土星，タイタンが140倍程度で同一視野に収まっている光景は下手したら一生に一度の光景でしょう．目に焼き付けておきました．<br>次は年末に今年のまとめ的な記事を書きたいと思っています．それでは．</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 遠征記 </tag>
            
            <tag> その他 </tag>
            
            <tag> 機材 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>天体画像処理研究会第一回オンラインミーティング</title>
      <link href="/2020/12/06/00000043-asimproc-2020-12/"/>
      <url>/2020/12/06/00000043-asimproc-2020-12/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．最初にタイトルとは関係ないですが，冬観測用にブーツを導入してみました．</p><p><img src="/images/00000043-asimproc-2020-12/boots.jpg" alt="冬観測用ブーツ"></p><p>これまではずっとサイズぴったしな普通の靴にカイロを貼ってギチギチの状態で観測をしていたのですが，これでかなり暖かくなるかなと信じています（というか，導入するのが遅すぎた）．<br>それから，近々（個人的に）嬉しいお知らせを投稿できると思います．お楽しみに(？)．</p><span id="more"></span><h3 id="天体画像処理研究会第一回オンラインミーティングをやってみた"><a href="#天体画像処理研究会第一回オンラインミーティングをやってみた" class="headerlink" title="天体画像処理研究会第一回オンラインミーティングをやってみた"></a>天体画像処理研究会第一回オンラインミーティングをやってみた</h3><p>さて，タイトルの通り，先日土曜日の夜の時間を使って Zoom でオンラインミーティングを開催してみました．若輩者の私の提案にも関わらず，私を除いて10名ほどの方にご参加いただきました．ありがとうございました．<br>初回ということもあって，まずは言い出しっぺの私が，自分がやっている研究についてと，その研究を天体画像処理に活かすことはできないかという提案のお話をさせていただきました．この話は今年中止になってしまった CANP という天体写真を撮っている方のオフラインの集いがもし開催されていたら話したかった内容で，私と同年代の学生の方々相手には話したことがあった内容ですが，それ以上の年代の方々にはあまり話したことがなかった内容でした．私の研究などについてここに事細かく書くということはしませんが，結果として，多くの貴重な意見をいただくことができました．<br>私が開発に携わっているフレームワークはプロセスの管理が容易なビジュアルプログラミング環境なのですが，ソフトウェアのエンジニアの <a href="https://twitter.com/jaialkdanel">Iwai さん</a>からは，ビジュアルプログラムだと diff（変更点）をとるのがちょっと面倒であるとか，皆さんご存知 <a href="http://hoshizolove.blog.jp/">Sam さん</a>からは（天体写真は）芸術思考であるとみなしているアマチュアの人からすると科学的な出自管理をウリにするのはあまりウケないのでは，とか，<a href="http://bokujin555.cocolog-nifty.com/">木人さん</a>からは，結局素材のクオリティによって処理は異なってくるので，あまり同じ処理を別の画像に施すということはあまりないのでは，むしろ，素材からどこまでの画像ができるのかをコンピュータがサジェストできるといいよね，だとか，これまで私が考えてきたもの，あまり深く考えてこなかったものを含め，「たしかになあ」と思わせられるツッコミをたくさん頂戴いたしました．一方で，一つの試みとしてそういったソフトウェアを作っていくのはコミュニティを活発にしていけるという意味では悪くはないと思っていただけているのかなとも思われ，個人的には励みになりました．<br>現在流行りのPixInsight（私もそろそろ導入を検討しているところであります）や，Adobe 製品との棲分けなども話題として上がりまして，多くの議論ができたかと思っています．<br>録画するのをすっかり忘れてしまったため，議事録をしっかり残すことができずもったいないことをしてしまったという気持ちですが，改めてご参加頂いた方々にはお礼を申し上げます．来月の満月期もまた何か企画してみたいと思います．</p><p>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FSQ前玉清掃失敗と坂本真綾ALT</title>
      <link href="/2020/12/01/00000042-clean-failure-maaya-alt/"/>
      <url>/2020/12/01/00000042-clean-failure-maaya-alt/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>拝啓，皆様．<br>今は，西暦2020年，11月26日です．この記事をアップロードする，だいたい5日前のことになります．</p><p><img src="/images/00000042-clean-failure-maaya-alt/tw01.jpg" alt="チキチキ前玉清掃の時間です">「チキチキ前玉清掃の時間です」と意気揚々と準備．</p><p>結論だけ書く．</p><span id="more"></span><h3 id="前玉清掃失敗"><a href="#前玉清掃失敗" class="headerlink" title="前玉清掃失敗"></a>前玉清掃失敗</h3><p><img src="/images/00000042-clean-failure-maaya-alt/tw02.jpg" alt="無事失敗"><br><br><br><br><br><br><br><br></p><p><strong>失敗した失敗した失敗した失敗した失敗した</strong><br><strong>失敗した失敗した失敗した失敗した失敗した</strong><br><strong>失敗した失敗した失敗した失敗した失敗した</strong><br><strong>失敗した失敗した失敗した失敗した失敗した</strong></p><p><strong>あたしは失敗した失敗した失敗した失敗した</strong><br><strong>失敗した失敗した失敗した失敗した失敗した</strong><br><strong>失敗した失敗した失敗したあたしは失敗</strong><br>(<a href="https://dic.nicovideo.jp/a/%E5%A4%B1%E6%95%97%E3%81%97%E3%81%9F%E5%A4%B1%E6%95%97%E3%81%97%E3%81%9F%E5%A4%B1%E6%95%97%E3%81%97%E3%81%9F%E5%A4%B1%E6%95%97%E3%81%97%E3%81%9F%E5%A4%B1%E6%95%97%E3%81%97%E3%81%9F">元ネタ</a>)</p><p>ええ，やらかしましたよ，やらかしましたとも．前玉についた細かいゴミは泡で落とすと良いとどこかで見たような気がしたのです．鏡筒横倒しの状態で指に泡状のクリーナーをつけて適当に前玉に塗りたくった結果，垂れたやつが前玉縁の隙間に入り込んで無事死亡しました．こういう望遠鏡ぶっ壊しは初心者あるあるらしいので，あまり気にしないでいきたいところではありますが，やはり凹みますね（自業自得）．あまり細かい顛末を書くことはできませんが，「しばらく直焦は封印」とだけ申し上げておきたいと思います．</p><p>あと色々ありまして現在 Twitter を自粛中です，TL，リプライ，引用RTは一切見ていませんが，DMだけは見ていますので，ご用のある方はそちらまでお願いします．<br>が，12月になりましたので，天体画像処理研究会の活動は裏でのんびりやっていくつもりです．詳しくは<a href="/2020/11/20/00000041-asimproc-start/">前回の記事</a>を御覧ください．</p><h3 id="坂本真綾ALT"><a href="#坂本真綾ALT" class="headerlink" title="坂本真綾ALT"></a>坂本真綾ALT</h3><p>あまり辛いことばかり書いても仕方がないので，全く関係ないですが最近行った真綾さんのライブ感想を書いておきます．<br><strong>後日配信があるそうなのでネタバレに注意です．</strong><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>今回は28日と29日の土日で1枚ずつチケットを取っていたのですが，座席運が全く良くなく（最後尾2列分13席を土日両方とも引くという），また日曜は頭痛がひどかったというのもあって結局土曜日夜公演だけの参加となりました．真綾さんと，同公演のチケットを外した方には，日曜日不参加となってしまい大変申し訳無いです．<br>双眼鏡を持っていきましたが，座席が一個空けなのもあってこれは正解でした．ちょうど画角いっぱいに真綾さんの全身が入る感じ．それから真綾さんのお召し物の柄が随分細かく，ピント合わせの良い指標になりました．真綾さんありがとうございます（）．</p><p>以下セットリスト</p><p>宇宙の記憶<br>Million Clouds<br>幸せ5<br>私へ<br>逆光（unplugged）<br>躍動</p><p>～免疫アップメドレー～<br>スピカ<br>ユッカ<br>CLEAR<br>Gift<br>tune the rainbow<br>光あれ<br>Get No Satisfaction!<br>プラチナ</p><p>クローバー<br>いつか旅に出る日</p><p>今回はやはり最後の MC（クロアチアでの朝焼けの話題）が印象的でした．朝焼けというのは本当に写真で撮ってもその美しさを表現することは困難で，その美しさは記憶の中にしか残らないと．私も写真を撮る人間ではありますが，写真を撮る，というのは記憶に対する足がかりを作ることだと考えています．記憶そのものを作ることではなく．この朝焼けの話は今回のライブについても同じことが当てはまって，どんなに高性能な録音機材を使ったところで生の音には敵わないのではないかと思うのです．こんな情勢だからこそ，そのナマモノがあるということの大切さ，ありがたさをしみじみと感じることができました．一度しか参加できなかったし，席も最後尾だったけれど，記憶に残るライブだったと思います．<br>曲についてはあまり多くを語ることはしませんが，アチコチ Disc1 の存在を完全に忘れていて最初（ミリクラなんてアチコチに入っていたか…？）などと超失礼なことを思いながら聴いていたのは内緒です．「スピカ」，「tune the rainbow」はライブでは記憶にある限り聴くのは初めてな気がしますので，嬉しかった．「ユッカ」はやはり泣いてしまいます，イントロのメロディが優しすぎるんだよね．「クローバー」と「いつか旅に出る日」は，今後ライブがあるならたくさん歌われるんじゃないかなと思います，特に後者は真綾さんの哲学をよく表していると思いましたし，ライブラストナンバーの定番覇権をとっても良いんじゃないかなと思えました．<br>ライブ会場では誰とも話したりすることはしませんでした．来年3月に横浜アリーナでアニバーサリーライブが決定されましたが，その頃には情勢が少しでも良くなり，また多くの方と交流できることを切に願っています．</p><p>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 機材 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 坂本真綾 </tag>
            
            <tag> 機材 </tag>
            
            <tag> 鏡筒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>天体画像処理研究会を立ち上げました</title>
      <link href="/2020/11/20/00000041-asimproc-start/"/>
      <url>/2020/11/20/00000041-asimproc-start/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．突然ですが「天体画像処理研究会」という，趣味で天体写真を撮っている方の画像処理勉強会のようなSlackグループを立ち上げてみましたので，簡単に紹介させていただきます．ありがたいことに，現在30名弱の方にご参加いただいております．</p><span id="more"></span><h3 id="本会について"><a href="#本会について" class="headerlink" title="本会について"></a>本会について</h3><p>このSlackですが，天体画像処理について，ゆるい部分からマニアックな部分まで幅広く議論できる場にしていきたいと考えています．<br>この会を作った私の中での大きな目的は，現状の天体画像処理に関する「集合知」を形成することです。各々が撮影方法や画像処理について持論をもっているなかで、それを（現状よりもっと簡単に）共有できる場が必要であり，その共有された集合知のなかで各々が得られる知見，見えてくることが多いのではないかという考えがモチベーションとして存在します．<br>先日，samさんが立ち上げてくれた「<a href="http://hoshizolove.blog.jp/archives/42148801.html">ノイズ談義</a>」一つとっても、あれだけたくさんの議論ができる（また興味をもって聞いてくれる人がいる）ということは，それだけポテンシャルがある領域だということだと考えています．<br>現状の問題点としては，知見を共有する場をTwitterや個人のブログなどにとどめてしまっていることが挙げられると思います．TwitterはTLを見ていない（特定の人をフォローしていない）と追えませんし，ブログも個人の活動頻度に依存してしまうという問題があります．zoomなどのオンラインミーティングも良いアイデアですが，個人情報などの観点から，あまり議事録を公にしにくいという問題点があると考えています．もっと気軽かつインテンシブにみんなで議論できる場が必要であると考えています．<br>この Slack には「運営チャンネル」が存在しており，今後の活動方針を12月程度までの期間をかけてざっくりと決めていく予定です．以下に運営チャンネルでこれまで話し合われた内容を記載しておきます．</p><h3 id="活動目的と（勝手に考えてる）内容"><a href="#活動目的と（勝手に考えてる）内容" class="headerlink" title="活動目的と（勝手に考えてる）内容"></a>活動目的と（勝手に考えてる）内容</h3><h4 id="活動目的"><a href="#活動目的" class="headerlink" title="活動目的"></a>活動目的</h4><p>主に天体画像の処理について，知見を深め合う．</p><h4 id="活動内容"><a href="#活動内容" class="headerlink" title="活動内容"></a>活動内容</h4><ul><li>月1くらい（満月期～下弦など）で発表できる場を設ける．内容は画像処理でも，ハードに寄っていても構わない．ブログの内容を噛み砕いてわかりやすく説明するなどでもよい．特に発表する人がいなければなくてもいいし，電子観望会，雑談会，飲み会などを募集しても良い．</li><li>画像処理に関する文献を読む（Inside PIとか？）．輪読形式（違うところを読んで発表し合う，多くの知見を得られるが時間が必要），もくもく形式（同じところを読んでわからないところを質問し合う，多くは読めないが時間はかかりにくい）など．</li></ul><h3 id="現在上がっている議論"><a href="#現在上がっている議論" class="headerlink" title="現在上がっている議論"></a>現在上がっている議論</h3><h4 id="チャンネルの切り分けについて"><a href="#チャンネルの切り分けについて" class="headerlink" title="チャンネルの切り分けについて"></a>チャンネルの切り分けについて</h4><p>※チャンネルをどう切り分けるかについてはかなり難しいところがあります．細かくトピックごとに切り分ければチャンネル数が増えて収集がつかなくなり、ざっくり切り分けすぎるのも一つのチャンネルの中で様々な議論が飛び交って結局Twitterと変わらなくなるという問題があるからです．<br>僕が考えている基本的なチャンネル構成は以下の通りです．</p><ul><li>質問チャンネル（とりあえずなんでも気軽に聞ける．スレッドで議論していけば流れにくい．）</li><li>pre-processing（Rawデータ→コンポジットまでについての処理に関するトピック）</li><li>post-processing（コンポジット以降についての処理に関するトピック）</li><li>data acquisition（Rawデータ取得までに関するトピック、ハード寄り）</li><li>software（画像処理ソフトに関するトピック．ソフトごとに分けるかは考え中）</li></ul><p>以下，コメントです．</p><blockquote><p>ぐらすのすち さん</p><blockquote><p>・software（画像処理ソフトに関するトピック。ソフトごとに分けるかは考え中）</p></blockquote></blockquote><blockquote><p>ハードウェアもほしいな、と思います（画処理の話ですけど……）</p></blockquote><hr><blockquote><p>nagahiro さん<br>faceBookのコミュニティーみたく，作品をアップしてそれに対していろいろ議論する場所も欲しいですね。<br>SNSだとどうしても周りの目があるので，「すごいですねー」「すばらしいですねー」の応酬になってしまいがちなので，もっと率直に意見を言い合えれば良いのですが。そういう雰囲気ができると良いなと。<br>例えばデータを16bitTIFFでアップできるなら，２次加工は本人の許可なしでやっても良いというルールにして，「君のアンドロメダの色不自然ですよ。私ならこうするけどなー」とできると，私としては大変参考になります</p></blockquote><blockquote><p>だぼ<br>ご意見ありがとうございます。まず、画像を使ってあれこれ議論をするということには賛成です。ただ、slackにはファイルなどのアップロードに容量制限がありますので、別にアップロードできる場を設ける必要が将来的に出てくる可能性はあります。</p></blockquote><blockquote><p>nagahiro さん<br>アップロード場所はgoogledriveとか<br>どうにでもなりそうですね</p></blockquote><blockquote><p>だぼ<br>一方で、ただ作品をアップロードして終わり(たまになんか褒められる)、というだけの場にはしたくないという気持ちは私にもあります。何か手法AとBの結果を比較するために画像を利用したり、technical-orientedな場を作れたらいいなと思っています。<br>はい、アップロード場所についてはあまり心配していません。</p></blockquote><blockquote><p>nagahiro さん<br>facebookのコミュニティーとかも，元々はそういう目的で作られたと思うんですけど，「率直に意見を言い合う」のがなかなか難しいんですよね。その辺はアップロード側が何かしら工夫するのが良さそうですね</p></blockquote><blockquote><p>だぼ<br>そういう意味で考えると、あらゆるチャンネルで画像を用いて議論することになると思います。それらと単純に作品のアップロードをどう切り分けるかは考える必要があります。目的を単純化して、「誰でもいじれる共有素材を提供できる場」というふうにするのはありかもしれません。</p></blockquote><blockquote><p>nagahiro さん<br>賛成です</p></blockquote><blockquote><p>だぼ<br>「率直に意見を言い合う」というのは、そういうことができる雰囲気を作っていくしかないのかなー…と個人的には思っています。<br>あとは、「いいね」みたいなものの存在って大きいと思うんですよ。<br>良い作品はなんとなく見て脳死でいいねを押しがちだったり、先程おっしゃっていただいたように周りの目があるのでそういった反応の数を気にして意見できない、みたいな。<br>slackではスタンプを無効化したチャンネルを作ることはいまのところできなさそう(なにか方法はあるかも)ですが、ルールとしてスタンプをできるだけ使わない(あるいは禁止にする)というのは有効かもしれません。</p></blockquote><h4 id="議事録について"><a href="#議事録について" class="headerlink" title="議事録について"></a>議事録について</h4><p>議事録をどこにためていくかを考えています。Trelloやscrap box？などが挙げられそうですが、なにか有用なツールなどをご存じの方は教えてくれると嬉しいです…。</p><p>以上です，冒頭は硬い感じのことを書きましたが，実際はのんびり議論を進めていきたいと思っています．他にもこんなことをやりたいみたいな意見のある方は是非この記事や私の Twitter に書いていただけると幸いです．もちろん Slack の方に書き込んでいただいても構いません．<br>参加は<a href="https://astronomicali-rna4394.slack.com/join/shared_invite/zt-iqm2e87m-R5yFQfStdxYbefkM~bn5MQ#/">こちら</a>からです．<br>それでは，来月くらいから活動していきたいと思いますが，また何か動きがあったら記事にするか追記したいと思います．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2020年11月 初しらびそ，八ヶ岳</title>
      <link href="/2020/11/17/00000040-2020-11/"/>
      <url>/2020/11/17/00000040-2020-11/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．前回の記事で赤道儀を壊してからまだ見積もりも来ていないような状態ですが，今月の新月期もさくっと遠征に行きました．</p><span id="more"></span><h3 id="10-11日-しらびそ高原"><a href="#10-11日-しらびそ高原" class="headerlink" title="10-11日 しらびそ高原"></a>10-11日 しらびそ高原</h3><p>この日はいつもお世話になっている（前回EM-10Bを貸してくれた）方が「暗い所に行きたいよね」ということで北関東か王滝方面に出ることになっていました．結局天気的に王滝方面としましたが，王滝は上に上がっていく道が通行止めになったとかで，次にあららぎ高原を候補に．が，こちらもスキー場の駐車場がスキー場閉鎖？の影響で使えるか不明．結局天文屋の聖地であるところのしらびそ高原まで出ることにしました．しらびそに行くのは初めてで，途中突然現れるドデカい建造物（トンネルに入る道）に驚きながら，マップを見ているだけで吐きそうになる山道（同行者は5年前あたりと比べるとよく道が舗装されると言っていました）を通っていき現地入り．途中のハイランドしらびそには宿泊客と思われる方が中で食事中っぽい様子．ハイランドしらびそ駐車場での車中泊などは禁止されていましたが，公衆トイレは100円払って深夜も使えそうでした（結局使いませんでしたが，午前3時に行った時は入れそうでした）．</p><p>御池山隕石クレーター案内板がある現地駐車場では朝まで我々以外誰もおらず，初回のしらびそを独り占めという贅沢な体験ができました．南側低空は街明かりでイマイチですが，それ以外の特に天頂から北にかけての空は，苦労して来るだけの価値はあるかなと思いました．しらびその駐車場南側は崖のようになっているわけですが，時折その下からガサガサと物音がしたりしてかなり怖かったです．｢ｸﾞﾙﾙﾙ…｣という獣の唸り声みたいなものが聞こえたときはさすがに車に戻って音楽を爆音で流すという始末でした．</p><h4 id="大火球"><a href="#大火球" class="headerlink" title="大火球"></a>大火球</h4><p>観測途中そろそろ一回仮眠をとろうとみんなで車にいると，助手席に座っている私の目の左端に強い光が．栃木県と福島県の間を流れた大火球の強烈な閃光でした（最近私はいつも火球を目の端で捉えてしっかり見ることができません）．流れた後その方向を見ると，車の中からでもわかるようなかなり濃い痕が残っているではありませんか！<br>「え？！あれ，痕ですよね？！？！」<br>と私が言うと仮眠をとろうとしていたみんなは一斉に車を飛び出し，永続痕を見てすごいすごいとおおはしゃぎ．その後30分は騒いでいたかと思います．結局，永続痕は少なくとも5分は肉眼でその存在を確認でき，数十分にわたって残っていました．友人が流星痕の様子をタイムラプスに残してくれていました．</p><p><video src="https://dabokun.github.io/images/00000040-2020-11/tw01.mp4" width="720" height="720" controls></video></p><p>流星の永続痕をしっかりと見るのは5年余の天文人生で初めてで，貴重な経験をしました．</p><p>当該流星本体が流れる映像は<a href="https://www.youtube.com/watch?v=rlNZXBPRK74">こちら</a>などで見ることができます．</p><h3 id="14-15日-八ヶ岳ふれあい公園"><a href="#14-15日-八ヶ岳ふれあい公園" class="headerlink" title="14-15日 八ヶ岳ふれあい公園"></a>14-15日 八ヶ岳ふれあい公園</h3><p>しらびそでの私の撮影について何も述べませんでしたが，借りたEM-10Bは歩留まりが相変わらず悪く，結局しらびそ撮影で使えるデータは45分あまりだったのです．この日八ヶ岳に行く前日に赤道儀のウォームホイール？を金槌でカンカン叩いて外し，ギアに当て直す作業をしました．果たして改善されるかどうか．<br>この日は一旦都内に出て仕事終わりの友人を拾い，野辺山に向かいました．途中サービスエリアのガソリンスタンドで店員にタイヤがヤバいよと指摘され，（そんなことを言われたのが初めてというのもあってどう対応すればいいかわからず）結局フロント2本だけ交換してしまいました．確かに来年1月交換予定だったのでヤバいのは事実なんでしょうが，ぼられてたらいやだなあ…という気持ちです．<br>長坂ICで降り，清里の小作でほうとうを食べて野辺山現地入り．この日は知り合いも来ていたので美し森駐車場にも顔を出しましたが，今まで見たことないくらいたくさんの人がいました．たぶんほとんど星見の人たちだったと思います．</p><p><img src="/images/00000040-2020-11/tw02.jpg" alt="また来ちゃったよ…"></p><p>いつもは農地の中を通っている側道のようなところで観測しているのですが，結局八ヶ岳ふれあい公園の駐車場で朝まで過ごしました．ここにも初めて来ましたが，明るい低空が木々に隠されるのでいい感じに暗い印象でした．トイレもあるし，また使おうと思います．<br>↓明け方のふれあい公園です，秋～冬の朝，という感じで雰囲気がとても良かった．<br><img src="/images/00000040-2020-11/tw03.jpg" alt="八ヶ岳ふれあい公園"><br><img src="/images/00000040-2020-11/tw04.jpg" alt="八ヶ岳ふれあい公園"></p><p>さて，赤道儀の方は相変わらずFSQ+フラットナー+3分露光には耐えられず，赤経方向に流れてしまいます．拡大して微光星を観察してみると，確かに微光星1個分くらいの振幅で，数秒～数十秒周期でゆらゆらと動いている様子が確認できました．おそらくギアに問題があるのかなあと考えていますが，よくわかっていません．借りていて文句を言うのも失礼な話ですが，少なくとも400mm以上の撮影に使える赤道儀とは言い難いものでしたので，次の撮影では使って135mmかなあと考えています．</p><p><img src="/images/00000040-2020-11/tw05.jpg" alt="流れてしまう様子">流れてしまう様子です．</p><p>他の方も随所で述べられていますが，この日は雲もなく，湿度も低く，本当に良い空でした．<br>翌朝小淵沢の延命の湯に入ってから帰りましたが，八ヶ岳高原ラインからの眺めも最高で，夜の環境の良さを表していたのではないかと考えています．</p><p><img src="/images/00000040-2020-11/tw06.jpg" alt="見事"><br><img src="/images/00000040-2020-11/tw07.jpg" alt="また寿命が伸びてしまう…"><br><img src="/images/00000040-2020-11/tw08.jpg" alt="しまりんトリシティ"><br><img src="/images/00000040-2020-11/tw09.jpg" alt="～完～"></p><h3 id="撮れた「アイツ」"><a href="#撮れた「アイツ」" class="headerlink" title="撮れた「アイツ」"></a>撮れた「アイツ」</h3><p>二晩の間はずっと M42 オリオン大星雲を撮っていまして，一応観賞に耐えそうなものができたのでここに載せておきます．これで M31，M45，M42 という三大有名天体すべてFSQで露光するという今年の密かな目標を達成したことになります．来年，あるいは来月以降はもう少しニッチなところを攻めていきたいと考えています．</p><p><img src="/images/00000040-2020-11/work_01.jpg" alt="M42 オリオン大星雲"></p><div style="text-align: center;">「M42 オリオン大星雲」<br>2020年11月10日 22時25分～ 長野県 しらびそ高原にて<br>2020年11月14日 22時43分～ 長野県 八ヶ岳自然文化園にて<br>タカハシ FSQ-85EDP + フラットナー1.01x (455mm F5.4)<br>Canon EOS 6D<br>ISO-4000 / 180s * 29<br>ISO-5000 / 144s * 54<br>Total: 216.6 min<br>タカハシ EM-10B<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br>[<a href="https://www.astrobin.com/ilyiet/" target="_blank" rel="noopener">AstroBin</a>], [<a href="https://www.flickr.com/photos/138311056@N05/50610206442/in/dateposted-public/" target="_blank" rel="noopener">Flickr</a>], [<a href="https://astrodabo.tumblr.com/post/634958857362456576/m42-the-great-orion-nebula-taken-at-shirabiso" target="_blank" rel="noopener">Tumblr</a>]<br><br></div><p>だいぶきつめな色合いにしてしまいましたが，いかがでしょうか？意外と北側の赤い部分が出てくれたりして個人的には満足です．星像も，流れていたので少し肥大気味ですが悪くはない気がしています．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 機材 </tag>
            
            <tag> 赤道儀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2020年10月 いろいろ</title>
      <link href="/2020/10/29/00000039-2020-10/"/>
      <url>/2020/10/29/00000039-2020-10/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．9月は天気も悪く一度も遠征に行けずじまいでしたので，その鬱憤を晴らすが如く10月後半はたくさん遠征をしました．色々ありましたが，ざっとブログに書き留めておこうと思います．</p><span id="more"></span><h3 id="18-19日-原村-八ヶ岳自然文化園"><a href="#18-19日-原村-八ヶ岳自然文化園" class="headerlink" title="18-19日 原村 八ヶ岳自然文化園"></a>18-19日 原村 八ヶ岳自然文化園</h3><p>自分は基本的に所属していたサークルのうち来そうな人を毎回何人か観測に誘っているのですが，この日は誰も来る気配がなく，1年以上ぶり2回目のソロ観測に行くこととしました．行き先は清里を予定しており，周辺の某チェーン店で久々にほうとうを食していたところ，<a href="http://aramister.blog.fc2.com/">Aramisさん</a>がワーケーションで原村にいらっしゃるということで，そちらに向かうことにしました．八ヶ岳高原ラインをひた走り（この道なかなかに楽しいです），20時半頃に原村に到着．八ヶ岳自然文化園には夜間は入れないようですが（確認とってないのでよくわかりませんが），すぐ近くのまるやち湖ほとりの駐車場は使えるようでした．初めて来る場所でしたが，空も開けていて良かったです．<br>久々の観測ということもあり，いくつか忘れ物をしてしまいました，Aramisさんには観測用ライトをお借りしまして，お世話になりました．それから水場が近くにあったのが誤算で，結露が心配されたのですが，ヒータ用のモバイルバッテリを忘れてしまいました．これは車のシガーソケット分岐を使うことでなんとか解決．<br>空は2時半頃まで晴れており，昴を子午線超えくらいまで露光できました．気温もよく冷え（明け方に2℃くらいまで），満足行く結果になったと思います．</p><p><img src="/images/00000039-2020-10/work_01.jpg" alt="M45 昴"></p><div style="text-align: center;">「M45 昴」<br>2020年10月18日 午前22時04分～ 長野県原村 八ヶ岳自然文化園にて<br>タカハシ FSQ-85EDP + フラットナー1.01x (455mm F5.4)<br>Canon EOS 6D<br>ISO 3200 / 180s * 30 = 90 min<br>ISO 4000 / 180s * 60 = 180min<br>Total: 270min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ライトダーク: ライトと同条件 * 16<br>フラット: 自宅にて ISO-100 / 1/1600s * 16<br>フラットダーク: フラットと同条件 * 16<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br>[<a href="https://www.astrobin.com/xnjfg4/" target="_blank" rel="noopener">AstroBin</a>], [<a href="https://www.flickr.com/photos/138311056@N05/50512320776/in/dateposted-public/" target="_blank" rel="noopener">Flickr</a>], [<a href="https://astrodabo.tumblr.com/post/632579378096848896/m45-pleiades-at-yatsugatake-natural-culture-park" target="_blank" rel="noopener">Tumblr</a>]<br><br></div><p>10時頃まで仮眠をとり，近くのもみの湯という温泉に入り，中村農場の親子丼を食べ（今年本当にこれを食べたかった），無事に夕方頃帰りました．</p><p><img src="/images/00000039-2020-10/tw01.jpg" alt="中村農場の親子丼"></p><h3 id="20-21日-天城高原，仁科峠"><a href="#20-21日-天城高原，仁科峠" class="headerlink" title="20-21日 天城高原，仁科峠"></a>20-21日 天城高原，仁科峠</h3><p>この日はいつもお世話になっている方に自宅まで来てもらい，天城を目指すことにしました．伊東マリンタウンで夕飯を食べ，現地に到着してみると，晴れ予報だったにも関わらず雲が立ち込めていました．別働隊で来ていた後輩も合流し，西に移動すれば雲がとれるかも，ということで仁科峠に移動したのですが，ピーカン晴れというわけにもいかず…，撮影は諦めて眼視のテストをしようと思いました．</p><p>ところが……．<br><img src="/images/00000039-2020-10/tw02.jpg" alt="悲報">【悲報】赤道儀壊す．</p><p>この前日に自宅でフラットを撮影し終え，赤道儀をしまおうとした際，あろうことか保管の向きを間違えたものと思われます．EM-11コントロールボックスのトグルスイッチ部分に強い負荷がかかり，基盤ごと奥に押し込まれてしまいました．電源は入るようですが下側のトグルスイッチはうんともすんとも言わず，コントローラーケーブルの通電も確認できず，追尾しているようなモーター音も聞こえない状態になってしまっていました．古いモデルですが，正直この設計はどうかなあと個人的には思います．まあ保管の向きを間違えた（であろう）私が悪いのですが…．この日は風も強く，タイムラプスだけ仕掛けてふて寝．そのタイムラプスも秒で結露していたので，まだ編集さえしていません笑．<br>帰宅後，翌日に即ショップに送り出しました．コントロールボックスを開けてみたところ，中の基盤も一部ひしゃげてしまっていると連絡がありました．自分はハードはからっきしなので，メーカー修理を依頼することに．修理が済んで無事に返ってくることを祈っています．</p><h3 id="24-25日-大菩薩峠"><a href="#24-25日-大菩薩峠" class="headerlink" title="24-25日 大菩薩峠"></a>24-25日 大菩薩峠</h3><p>赤道儀を壊したのにまだ行くのかと思われるかもしれませんが，私は「屋根裏天文舎」という小さな団体に所属していて，小型赤道儀であれば借りることができるのです（圧倒的感謝）．<br>この日は夜出発だったのですが，都内某所で今度は交通事故に逢いました（最近厄がついてるのか…？）．お仲間を拾うために駐車していたところ，けっこう良いスピードで右を抜けた車の左ミラーとこちらの右ミラーが接触，こちらはミラーカバーが吹き飛びました．路駐していたこちらにも問題がないわけではないですが，止まっていたわけですし法的には10:0になる案件のはず．私の家の車ではなかったし，相手も逃げることなく対応してくれたので，これ以上私からは何も言いませんが…．ただ他車絡みの事故に遭遇したのは初めてでしたので，事故時の対応は勉強になりました．自分も気をつけようと思います．<br>大菩薩峠には22時頃に到着しました．登山客っぽい車が多く停まっていたので，あまり騒がず，この日は馬頭を露光しました．</p><p><img src="/images/00000039-2020-10/work_02.jpg" alt="馬頭星雲，燃える木星雲"></p><div style="text-align: center;">「馬頭星雲，燃える木星雲」<br>2020年10月18日 22時04分～ 山梨県 大菩薩峠にて<br>タカハシ FSQ-85EDP + フラットナー1.01x (455mm F5.4)<br>Canon EOS 6D<br>ISO 6400 / 120s * 43 = 86 min<br>タカハシ EM-10B<br>ライトダーク: ライトと同条件 * 16<br>フラット: 自宅にて ISO-1600 / 1/250s * 16<br>フラットダーク: フラットと同条件 * 16<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br>[<a href="https://www.astrobin.com/xvqfgt/" target="_blank" rel="noopener">AstroBin</a>], [<a href="https://www.flickr.com/photos/138311056@N05/50531832738/in/dateposted-public/" target="_blank" rel="noopener">Flickr</a>], [<a href="https://astrodabo.tumblr.com/post/633038747779399680/the-horsehead-and-the-flame-nebula-taken-at" target="_blank" rel="noopener">Tumblr</a>]<br><br></div><p>地面が土だったので人が動くと簡単にブレブレになってしまい，歩留まりがかなり悪く，高感度短時間撮影にしても使えるフレームは総露光時間の半分以下になってしまいましたが，なんとか見られるものにはなったかと思います．この日は翌朝から法事で私が早く帰らねばならず，4時頃には撤収しました．</p><p>今回撮影した2枚とも個人的にはとても気に入っていて，後からここが良くないな，と思うことがほぼなくなりました．自己満の境地に達したように思っています．<br>色々ありましたが，来月以降は残されたメジャー天体であるところの「アイツ」をたっぷり露光していきたいと思っています．それでは…．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ガウス関数のフィッティング―非線形最小二乗法</title>
      <link href="/2020/10/16/00000038-1d-gaussian-fitting/"/>
      <url>/2020/10/16/00000038-1d-gaussian-fitting/</url>
      
        <content type="html"><![CDATA[<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>突然ですが，数式を使えるようにしてみたので，テスト的な記事です．<br>自分は Hexo という静的サイトジェネレータを使っています．「Hexo 数式」とかでググると mathjax をインストールして…みたいな記事が多くヒットしますが，僕の環境ではなぜか動きませんでした．結局，<a href="https://ishiis.net/2017/03/14/mathjax-install/">ここ</a>に書いているscriptタグを記事冒頭に埋め込むといい感じに動いてそうだったので，それでテストしています．</p><span id="more"></span><h3 id="本題"><a href="#本題" class="headerlink" title="本題"></a>本題</h3><p>さて，スペクトルなどをガウス関数でフィッティングしたいということはよくあるわけですが，単純に一つのガウス関数だけなら簡単にフィッティングする方法がいくつかあります．そのなかで，非線形最小二乗法について書きます．これは Caruana’s Algorithm とよばれるもので，昔参考にしていた Qiita の記事があったのにそれが見つからなくなってしまったので，ここに書いておくことにします．<br>観測したデータを，次のガウス関数でフィッティングしたいとします．<br>$$f(x) &#x3D; {A \exp \frac{-(x - \mu)^2}{2 \sigma^2}}$$<br>両辺の対数をとると，</p><p>$$\ln f(x) &#x3D; \ln A + \frac{-(x - \mu)^2}{2 \sigma^2} &#x3D; \ln A - \frac{\mu^2}{2 \sigma^2} + \frac{\mu x}{\sigma^2} - \frac{x^2}{2 \sigma^2} &#x3D; a + bx + cx^2$$<br>ここで，$$a &#x3D; \ln A - \frac{\mu^2}{2 \sigma^2}$$，$$b &#x3D; \frac{\mu}{\sigma^2}$$，$$c &#x3D; - \frac{1}{2 \sigma^2}$$とおきました．<br>観測したデータを$$g(x)$$とすると，フィッティング問題は，次の誤差関数$$S$$を最小にする組$$(a, b, c)$$を探す問題に帰着します：</p><p>$$ {S(a, b, c) &#x3D; \sum_{x} { \ln g(x) - (a + bx + cx^2) }^2} $$</p><p>次に，$${S}$$を$$a, b, c$$で偏微分して，極値となる場所を考えます．</p><body>\begin{eqnarray}\frac{\partial S}{\partial a} &=& 2 \sum_{x} \{ \ln g(x) - (a + bx + cx^2) \}(-1) = 0 \\ &\Leftrightarrow& a \sum_{x} 1 + b \sum_{x} x + c \sum_{x} x^2 = \sum_{x} \ln g(x)\end{eqnarray}<p>\begin{eqnarray}\frac{\partial S}{\partial b} &amp;&#x3D;&amp; 2 \sum_{x} { \ln g(x) - (a + bx + cx^2) }(-x) &#x3D; 0 \ &amp;\Leftrightarrow&amp; a \sum_{x} x + b \sum_{x} x^2 + c \sum_{x} x^3 &#x3D; \sum_{x} x \ln g(x)\end{eqnarray}</p><p>\begin{eqnarray}\frac{\partial S}{\partial c} &amp;&#x3D;&amp; 2 \sum_{x} { \ln g(x) - (a + bx + cx^2) }(-x^2) &#x3D; 0 \ &amp;\Leftrightarrow&amp; a \sum_{x} x^2 + b \sum_{x} x^3 + c \sum_{x} x^4 &#x3D; \sum_{x} x^2 \ln g(x)\end{eqnarray}</p></body><p>したがって，データの個数を$$N &#x3D; \sum_{x} 1$$とすれば，</p><body>\begin{equation}\begin{pmatrix}N & \sum_{x} x & \sum_{x} x^2 \\\sum_{x} x & \sum_{x} x^2 & \sum_{x} x^3 \\\sum_{x} x^2 & \sum_{x} x^3 & \sum_{x} x^4\end{pmatrix}\begin{pmatrix}a \\b \\c\end{pmatrix} = \begin{pmatrix}\sum_{x} \ln g(x) \\\sum_{x} x \ln g(x) \\\sum_{x} x^2 \ln g(x)\end{pmatrix}\end{equation}</body><p>と書けます．今，$$N$$や$$x$$，$$g(x)$$は既知ですから，</p><body>\begin{equation}\begin{pmatrix}a \\b \\c\end{pmatrix} =\begin{pmatrix}N & \sum_{x} x & \sum_{x} x^2 \\\sum_{x} x & \sum_{x} x^2 & \sum_{x} x^3 \\\sum_{x} x^2 & \sum_{x} x^3 & \sum_{x} x^4\end{pmatrix}^{-1}\begin{pmatrix}\sum_{x} \ln g(x) \\\sum_{x} x \ln g(x) \\\sum_{x} x^2 \ln g(x)\end{pmatrix}\end{equation}</body><p>とすれば，組$$(a, b, c)$$が求まりますね．<br>もともとの未知数$$A, \mu, \sigma$$について解けば，<br>$$A &#x3D; \exp\left(a - \frac{b^2}{4c}\right), \mu &#x3D; -\frac{b}{2c}, \sigma &#x3D; \sqrt{-\frac{1}{2c}}$$<br>となります．<br>今日はこれまで…．また追記するかもです．</p><p>2020年10月17日追記<br>このアルゴリズムの利点は，反復的な処理が必要ではなく，ただ連立方程式を解くだけであるという点です．一方で問題点は，ノイズに弱いことです．このことを示すために，観測値にノイズ$$\eta$$が含まれていると考えます．$$\eta$$は平均$$0$$，標準偏差$$\sigma_{\eta}$$であるとします．<br>$$<br>\hat{g}(x) &#x3D; g(x) + \eta<br>$$<br>ここで，$$g(x)$$は何らかのモデルに従っている真の値です．<br>すると誤差は，<br>$$<br>\delta &#x3D; \ln \hat{g}(x) - (a + bx + cx^2) &#x3D; \ln (g(x) + \eta) - (a + bx + cx^2)<br>$$<br>テイラーの定理から，第一項について近似をとると（おそらく<a href="https://www.efunda.com/math/taylor_series/logarithmic.cfm">ここ</a>の五つ目の近似，さらに$$\eta$$は$$g(x)$$に比べて十分小さいことを想定していると思う），<br>$$<br>\delta \approx \ln g(x) - (a + bx + cx^2) + \frac{\eta}{g(x)}<br>$$<br>先程は二乗誤差の和について考えましたが，今度は$$\delta^2$$の平均二乗誤差を考えます．先程の例では，偏微分の計算過程でデータ数$$N$$を払ってしまうので和でも良かったわけですが，普通は平均二乗誤差を考えることが多いですね．<br>$$<br>E[\delta^2] &#x3D; {\ln g(x) - (a + bx + cx^2)}^2 + \frac{\sigma_{\eta}^2}{g^2(x)}<br>$$<br>ぶっちゃけここが一番わかりにくいところかと思いますが，<a href="https://qiita.com/riversun/items/b691cc0fa8a8a8f42013">ここ</a>の9合目セクションにおいて，$$f(x) &#x3D; \ln g(x) - (a + bx + cx^2)$$，$$\epsilon &#x3D; \frac{\eta}{g(x)}$$，$$\hat{f}(x) &#x3D; 0$$を代入して計算すればいいんだと思います，たぶん．<br>さて，上の式で大事なのは第二項で，これはもし$$g(x)$$が小さい，すなわちガウス関数の場合平均から離れる（&#x3D;0に近い）データ点を選んでしまった場合，大きな誤差を発生させてしまうということを表しています．実際，Caruana’s algorithm ではこの問題が発生してしまいます．<br>そこで，Guo’s algorithm というアルゴリズムを紹介します．発想はひじょうにシンプルで，上の誤差$$\delta$$に$$g(x)$$をかけた，すなわち$$g(x)$$で重み付けをしたものを新たに誤差として採用すれば，小さなデータ点に対する影響も小さくなるだろうというものです．つまり，<br>$$<br>\delta \approx g(x){\ln g(x) - (a + bx + cx^2)} + \eta<br>$$<br>$$<br>E[\delta^2] &#x3D; [g(x){\ln g(x) - (a + bx + cx^2)}]^2 + \sigma_{\eta}^2<br>$$<br>とすればよかろうということになります．この関数を先ほどと同様に$$a, b, c$$で偏微分して，不明な$$g(x)$$の代わりに観測値$$\hat{g}(x)$$を用いれば，</p><body>\begin{eqnarray}\frac{\partial S}{\partial a} &=& 2 \sum_{x} \hat{g}(x)\{ \ln \hat{g}(x) - (a + bx + cx^2) \}(-\hat{g}(x)) = 0 \\ &\Leftrightarrow& a \sum_{x} \hat{g}^2(x) + b \sum_{x} x\hat{g}^2(x) + c \sum_{x} x^2\hat{g}^2(x) = \sum_{x} \hat{g}^2(x)\ln \hat{g}(x)\end{eqnarray}<p>\begin{eqnarray}\frac{\partial S}{\partial b} &amp;&#x3D;&amp; 2 \sum_{x} \hat{g}(x){ \ln \hat{g}(x) - (a + bx + cx^2) }(-x\hat{g}(x)) &#x3D; 0 \ &amp;\Leftrightarrow&amp; a \sum_{x} x\hat{g}^2(x) + b \sum_{x} x^2\hat{g}^2(x) + c \sum_{x} x^3\hat{g}^2(x) &#x3D; \sum_{x} x\hat{g}^2(x) \ln \hat{g}(x)\end{eqnarray}</p><p>\begin{eqnarray}\frac{\partial S}{\partial c} &amp;&#x3D;&amp; 2 \sum_{x} \hat{g}(x){ \ln \hat{g}(x) - (a + bx + cx^2) }(-x^2\hat{g}(x)) &#x3D; 0 \ &amp;\Leftrightarrow&amp; a \sum_{x} x^2\hat{g}^2(x) + b \sum_{x} x^3\hat{g}^2(x) + c \sum_{x} x^4\hat{g}^2(x) &#x3D; \sum_{x} x^2\hat{g}^2(x) \ln \hat{g}(x)\end{eqnarray}</p></body><p>禍々しくなってきましたが，さっきとやってることは一緒です．よって，</p><body>\begin{equation}\begin{pmatrix}\sum_{x} \hat{g}^2(x) & \sum_{x} x\hat{g}^2(x) & \sum_{x} x^2\hat{g}^2(x) \\\sum_{x} x\hat{g}^2(x) & \sum_{x} x^2\hat{g}^2(x) & \sum_{x} x^3\hat{g}^2(x) \\\sum_{x} x^2\hat{g}^2(x) & \sum_{x} x^3\hat{g}^2(x) & \sum_{x} x^4\hat{g}^2(x)\end{pmatrix}\begin{pmatrix}a \\b \\c\end{pmatrix} = \begin{pmatrix}\sum_{x} \ln \hat{g}^2(x)\hat{g}(x) \\\sum_{x} x \hat{g}^2(x)\ln \hat{g}(x) \\\sum_{x} x^2 \hat{g}^2(x)\ln \hat{g}(x)\end{pmatrix}\end{equation}</body>となります．めでたしめでたし．また追記すると思います．#### 参考<p>R. A. Caruana, R. B. Searle, T. Heller, and S. I. Shupack, “Fast algorithm for the resolution of spectra,” <em>Analytical Chemistry,</em> Vol. 58, No. 6, pp. 1162―1167, 1986.</p><p>H. GUO, “A Simple Algorithm for Fitting a Gaussian Function,” <em>IEEE Signal Process,</em> Mag.28, No. 5 (2011), 134–137.</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2020年8月 星の村天文台</title>
      <link href="/2020/08/22/00000037-2020-08-hoshinomura/"/>
      <url>/2020/08/22/00000037-2020-08-hoshinomura/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>先週末はいつもどおりぶらっと天城に行ってきましたが，ここ数年天城に行き過ぎているというのもあり，今回は趣向を変えて星の村に行ってみました．<br>結果，この夜は人生で忘れられない夜の一つになりました，そういうお話です．</p><span id="more"></span><h3 id="星の村へ"><a href="#星の村へ" class="headerlink" title="星の村へ"></a>星の村へ</h3><p>日程の数日前の天気予報的には天城の雲量が一晩0だったので，天城に行くことを計画していましたが，日程が近づくにつれどんどん悪化していたため，行き先は千葉茨城方面，荒木根ダムが最有力候補でした．翌日夜に仕事があったので，あまり一人で遠くには行きたくなかったのです．<br>後輩の家の車を使わせてもらうか自分の家の車で行くか，機材の運搬をどうするかという問題もありましたが，結局，僕が東京の後輩の家まで行って，そこで機材を積み替えるということにしました．後輩の家の車を使えるなら，帰りの大部分を後輩の運転に任せれば遠出できる，ということになります．したがって，行き先は晴れそうな星の村天文台にしました．同行者は後輩と，友人で，僕と合わせて3人でした．</p><p>それこそ星の村に行く時くらいしか常磐道は通らないので，かなり新鮮な感覚でした．途中友部 SA で夕飯を食べ（ここの豚丼はなかなかの美味でした），途中スーパーに寄って9時半過ぎには星の村に到着．着いてみると曇っていて，天城の予報は当日に改善していたので，「あちゃー」と思いましたが，すぐに晴れだしました．ちぎれ雲みたいな雲が来たりもしましたが，基本一晩快晴でした．</p><h3 id="最高の眼視体験"><a href="#最高の眼視体験" class="headerlink" title="最高の眼視体験"></a>最高の眼視体験</h3><p>到着して歩いていると，何やら大型の機材を展開している方がいらっしゃいます．話しかけてみると，なんとあの TOA を2本使って双眼視しているそうです．図々しくも，たくさんの天体を見せていただきました．これが涎が出るほど美しく，間違いなく今まで最高の眼視体験をしました．見た順番はバラバラですが，感想を書きます．</p><ul><li>木星<br>まずは木星から．目のようにこちらを向いている大赤斑はもちろんのこと，赤道より北の大きな気流の流れもはっきりこの目で見ることができました．片目でも素晴らしいですが，両目で見ることで，それだけでは得られない立体感を感じました．北東側には衛星イオとその影が落ち込んでいるのが見え，太陽との三次元的な位置関係を感じました．正直，これを見た瞬間に言葉を失う以外ありませんでした．写真で見るような木星を，両の目で見ることができたわけです．大気の影響で常に良像というわけにはいきませんが，ときどき訪れる乱れが少なくなりとんでもなくよく見える瞬間のたびに呻き声を漏らしてしまいます．彩度は写真で見るよりも色鮮やかで，木星だけでも永遠に見ていられるなと思いました．</li><li>土星<br>お次は土星です．木星ほどあまりじっくりは見ませんでしたが，輪の構造，土星本体の縞模様も確認できました．</li><li>火星<br>火星も，高度が高い時に見ると本体の模様がしっかり確認できました．極冠もうっすらと見えていたと思います．普段赤い点にしか見えていなかったものが，構造をもつ天体である（当たり前なんですけど）ことがよく理解できました．</li><li>金星<br>明け方に半月状に輝いているのを見ました．正直明るすぎて，目が潰れるかと思いました．</li><li>M31 アンドロメダ銀河<br>暗黒帯や M110 も見えました．手前側にある天の川銀河の恒星と，遠い銀河という位置関係を感じていると，M110 と M31 の間をちょうど視野いっぱいくらいの長さの流星が流れるのが見えて，これが本当に感動でした．かなり速い流星でしたが，色も緑→紫と変化するのが見えました．</li><li>M42 オリオン大星雲<br>林の稜線からガスが上ってくるタイミングから見ました．地上景と，鳥が羽を広げるように輝く星雲，それに包み込まれるトラペジウムを同じ視野の中で見ると，それは息を呑む美しさでした．高倍率でトラペジウム周辺を見ると，星雲の濃淡がわかり，立体感の凄まじいものがありました．</li><li>M45 すばる<br>あまりじっくりとは見ませんでしたが，メローペのガスがうっすらと確認できました．</li><li>北アメリカ星雲 メキシコ湾付近，サドル付近，網状星雲<br>特にフィルターはかませていないそうなので Hα 部分ははっきりとは分かりませんでしたが，北アメリカ星雲やサドル付近については，暗黒帯と比べてあきらかに輝度に差があるのがわかりました．メキシコ湾内側のケバケバした部分も分かりました．網状星雲については，はくちょう座52番星を中心として東西方向にうっすらと明るく広がった星雲が確認できたと思います．</li><li>M27 亜鈴状星雲<br>中央の「りんごの芯」のような輝度の高い部分と，周辺の淡い部分の濃淡の差がとても美しかったです．比較的低倍率（望遠鏡では800～1000mm）で見ると，まさに天体写真で見るような雰囲気でした．</li><li>M57 リング状星雲<br>ピントを星で合わせても，なぜかぼんやり広がって見えるという感じでしたが，逸らし目で見ると，よりリングになっている様子が分かりました．</li><li>こと座ε ダブルダブルスター<br>まず比較的低倍率でダブル→高倍率でダブルダブルという感じで見ました．ε1 の方は輝度にかなり差があるのが分かりました．調べると1等級程度違うみたいですね．</li><li>はくちょう座6番B アルビレオ<br>周辺の色が薄い星（モブ星）たちと比べた時の色の際立ちが印象的でした．</li></ul><p>とまあこんな感じでしたが，特に惑星と，稜線と一緒に見た M42 は印象深く，今でも脳裏に焼き付いて離れない見応えでした．今回は新月期だったので月は見ませんでしたが，凄まじいそうです．いつか見てみたいものですね…．<br>なんだか僕は写真一辺倒の人間と周りから思われてるらしいし，実際そうなんですが，眼視も好きですよ．前回天城行った時も眼視しましたしね．ただガイドや編集といったソフト面で頑張る撮影よりも，望遠鏡そのものと己との対話みたいなところで，より沼が深そうに感じて積極的に手が出せていないという話です．それでも今回の双眼視は，確実に知らない世界への扉を一枚ぶち破る体験になったと思います．</p><h3 id="撮影したもの"><a href="#撮影したもの" class="headerlink" title="撮影したもの"></a>撮影したもの</h3><p>双眼視を満喫しつつ，<a href="/2020/08/17/00000036-2020-08-amagi/">先日の記事</a>の最後で紹介したフラットナーのテストのために，今回も二対象ばかり撮影してきました．</p><p><img src="/images/00000037-2020-08-hoshinomura/work_01.jpg" alt="LBN 487 アイリス星雲"></p><div style="text-align: center;">「LBN 487 アイリス星雲」<br>2020年8月21日 午前0時22分～ 星の村天文台にて<br>タカハシ FSQ-85EDP + フラットナー1.01x (455mm F5.4)<br>Canon EOS 6D<br>ISO 3200 / 180s * 25 = 75 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ライトダーク: ライトと同条件 * 16<br>フラット: 自宅にて ISO-3200 / 1/4000s * 16<br>フラットダーク: フラットと同条件 * 16<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br></div><p>まずはアイリス星雲から．かなりディテールが失われて崩壊してしまっていますが，これはコンポジット後に所謂縮緬ノイズが出てしまい，ノイズ低減を強烈に，それも何回もかけてしまったためです．この類のノイズに出会うのは今回が初めてで，かなり衝撃が大きかったです．単に露光不足で分子雲が出ないとかだったら全然許せたのですが…．</p><p><img src="/images/00000037-2020-08-hoshinomura/work_02.jpg" alt="NGC 869, NGC 884 ペルセウス座二重散開星団 h-χ"></p><div style="text-align: center;">「NGC 869, NGC 884 ペルセウス座二重散開星団 h-χ」<br>2020年8月21日 午前2時30分～ 星の村天文台にて<br>タカハシ FSQ-85EDP + フラットナー1.01x (455mm F5.4)<br>Canon EOS 6D<br>ISO 3200 / 180s * 20 = 60 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ライトダーク: ライトと同条件 * 16<br>フラット: 自宅にて ISO-3200 / 1/4000s * 16<br>フラットダーク: フラットと同条件 * 16<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br></div><p>お次は h-χ です．こちらではなぜかコンポジット後に縮緬ノイズは出ませんでした．同じダーク，フラットの素材を当てているので，これらの可能性は低いと考えますが，フラットを高感度で撮影してしまったことが原因である可能性を指摘されました．確かにこれは完全には排除しきれませんので，まだ検証が必要です．また，露光時間もアイリス星雲 75分，h-χ 60分ですので，総露光時間が多く目立っただけ，とも考えづらいです．<br>処理をいくつか変えてみました．</p><ul><li>コンポジット時のパラメタ値（クールピクセル，ホットピクセル除去のパラメタ値，レベル調整，色調整のパラメタ値，シグマクリッピングの有無など）を色々変更する→ダメ．</li><li>ガイド状態の悪いコマを除く→ダメ．</li><li>ダークやフラットを当てていない純 RAW 画像でコンポジットする→ダメ．</li></ul><p>という結果になりました．特に3つ目は，前述したフラットに関する指摘を疑問視してしまうような結果です．縮緬ノイズ，本当に原因が謎すぎます…．<br>ちなみに僕がアイリス星雲と h-χ を撮影している間は後輩が彼のシステムでアンドロメダ銀河を撮影していました．そして面白いことに，後輩が撮影した素材においても，僕がアイリス星雲を撮影した時間のデータだけコンポジットすると縮緬ノイズが出て，h-χ を撮影した時間のデータだけコンポジットすると縮緬ノイズが出ないということでした．二つの総露光時間は同じくらいだそうです．したがって「空の状態」というどうしようもないものが現在のところ縮緬ノイズ原因の最有力候補になってしまっています．引き続き時間のある時に検証を進めますが，MGEN-3 を注文したので，ディザリングできるようになるのを期待するしか無いのかもしれません．</p><p><img src="/images/00000037-2020-08-hoshinomura/fsqwithflattener.jpg" alt="FSQ + フラットナー1.01x 使用時の星像"></p><p>ちなみに肝心の星像はこんな感じです．外側からそれぞれフルサイズ周辺，APS-C周辺，中心を一辺 300 ピクセルで切り取っています．アイリス星雲撮影時のデータから抜粋．<br>少し横に伸びてしまっているように見えるのは赤道儀のピリオディックエラーを拾ってしまったものと思われますが，それ以外はフルサイズ周辺まで完璧な像と言って十分でしょう．これからの活躍にも期待です．</p><p>次の遠征はおそらく来月になると思いますが，またどこかに行けるといいな…．それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 機材 </tag>
            
            <tag> 鏡筒 </tag>
            
            <tag> パーツ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2020年8月 天城</title>
      <link href="/2020/08/17/00000036-2020-08-amagi/"/>
      <url>/2020/08/17/00000036-2020-08-amagi/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．修論の執筆なども一段落ついたので，ちょっくら天城まで行ってきました（別に落ち着いてないときでも行ってただろというツッコミはなしで）．</p><span id="more"></span><h3 id="天城へ"><a href="#天城へ" class="headerlink" title="天城へ"></a>天城へ</h3><p>今回は各方面に一緒に来る人を募集したのですが，みなさん忙しいようでなかなか集まりませんでした．ダメ元で坂本真綾ファン同士で友人の<a href="https://twitter.com/heartpainteriu">りゅーじんさん</a>に声をかけたところ来ていただけるということで，自宅最寄り駅まで来ていただき，拾ってそのまま天城へ向かいました．彼には<a href="/2019/09/29/00000019-2019-08-30-norikura/">昨年の乗鞍遠征</a>にも来てもらいましたが，あまりスッキリ晴れず，一晩良い空を見せられなかったのが心残りでした．<br>途中，小田原の一夜城に寄ってアイスを食べ，伊東マリンタウンで温泉と夕飯を済ませました．温泉は特定日営業ということでいつもより少し割高，タオル持参で1400円でした．久々にサウナに入れて気持ちよかったです．</p><p><img src="/images/00000036-2020-08-amagi/tw01.jpg" alt="うま"><br><img src="/images/00000036-2020-08-amagi/tw02.jpg" alt="約束の地"></p><p>20 時過ぎ頃に天城高原GCに到着すると，梅雨にコロナ自粛と星に飢えていた人々で大盛況．Twitter でつながっていた知り合いの方ですら10人くらいいらっしゃることがわかっていたので，予想はできたことですが，あそこまで混雑している天城高原は初めてかもしれません．駐車枠はほぼ埋まっていましたので，ちょっとしたスペースをお借りして車を停めました．なんとか機材展開できるスペースは確保できたので一安心．<br>到着して機材を展開しているとどこからか僕の名前を呼ぶ声がしたので，大きな声で「はーい！！」と返事をしたのですがしばらく誰も来る様子がなく笑．<a href="https://twitter.com/AstronomyPisuke">ピースケさん</a>と今回始めてお会いした<a href="https://twitter.com/GLASnSCI">ぐらすのすちさん</a>が僕を呼ぶ声だったようですが，僕があまりに大きな声で返事をしすぎたため，反響してかえって僕がどこにいるのか分からなかったようです．周囲の人にはうるさくして申し訳なかったです．<br>空は明るめでしたが，シーイングもよく晴れ渡っていたので，まずは眼視で惑星を見てもらおうと R200SS，倍率40倍で木星を導入，なんとなく縞模様が見えるといった感じ．次は土星．輪が確認できました．やっぱり20mm だと広がった星雲を見るにはいいですが惑星を見るにはちょっと小さめな印象ですね．もう少し短めの焦点距離のアイピースを買おうかな．<br>鏡筒を FSQ に変えて，撮影を開始．今回まず狙ったのはM17「オメガ星雲」とM24「バンビの横顔」のセットです．135mm を使っていた時のクセで，隙あらば2天体をセットで撮影してしまいます．</p><p><img src="/images/00000036-2020-08-amagi/work_01.jpg" alt="M17 オメガ星雲，M24 バンビの横顔"></p><div style="text-align: center;">「M17 オメガ星雲，M24 バンビの横顔」<br>2020年8月15日 午後9時50分～ 天城高原ゴルフコースにて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>ISO 2000 / 180s * 20 = 60 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ライトダーク: ライトと同条件 * 16<br>フラット: 自宅にて ISO-2000 / 1/2000s \* 16<br>フラットダーク: フラットと同条件 * 16<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br>[<a href="https://www.astrobin.com/7vnbza/C/" target="_blank" rel="noopener">AstroBin</a>], [<a href="https://www.flickr.com/photos/138311056@N05/50232358622/in/dateposted-public/" target="_blank" rel="noopener">Flickr</a>], [<a href="https://astrodabo.tumblr.com/post/626609519167963136/m17-m24-star-cloud-at-amagi-plateau-golf-cource" target="_blank" rel="noopener">Tumblr</a>]<br><br></div><p>おかげで首飾りもギリギリといった感じ．今年はもう無理かもしれませんが，次狙う時は南の大きな暗黒星雲も含めて撮影したい．<br>りゅーじんさんもカメラを持ってきてもらっていた（10年以上前の古いモデルですが）ので，親子亀方式で赤道儀につけて少し撮影してもらいました．<br>バンビが木陰に沈んでからはアンドロメダに移動しました．こちらはこれからが撮り時の天体なので，次は露光時間をガッツリ費やしたいところです．</p><p><img src="/images/00000036-2020-08-amagi/work_02.jpg" alt="M31 アンドロメダ銀河"></p><div style="text-align: center;">「M31 アンドロメダ銀河」<br>2020年8月16日 午前0時19分～ 天城高原ゴルフコースにて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>ISO 2500 / 180s * 20 = 60 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ライトダーク: ライトと同条件 * 16<br>フラット: 自宅にて ISO-2500 / 1/4000s * 16<br>フラットダーク: フラットと同条件 * 16<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br>[<a href="https://www.astrobin.com/18moj8/" target="_blank" rel="noopener">AstroBin</a>], [<a href="https://www.flickr.com/photos/138311056@N05/50235808443/in/dateposted-public/" target="_blank" rel="noopener">Flickr</a>], [<a href="https://astrodabo.tumblr.com/post/626696443555676160/m31-andromeda-galaxy-at-amagi-plateau-golf-course" target="_blank" rel="noopener">Tumblr</a>]<br></div><p>ぐらすのすちさんに熱エネルギーを提供してもらって（ありがとうございます）お湯を沸かし，買ってきたカップ麺を食べました．早くお湯沸かしセットを買わないと…．結局今年キャンプ用品はチェアしか買ってないですね(´・ω・｀)．食べている途中に，まだ高校生（若い！）の<a href="https://twitter.com/haya_astronomy">Rambさん</a>にも来ていただき，お話させていただきました．<br>また，撮影中にはぐらすのすちさんやピースケさん，<a href="https://twitter.com/ShonanAstroPhot">けーたろさん</a>，<a href="https://twitter.com/magicalflute77">Aramisさん</a>ともお話させていただきました．Aramis さんとは（<a href="http://aramister.blog.fc2.com/blog-entry-454.html">彼のブログ</a>にも書かれていることですが）東方 Project のお話で盛り上がりました．東方は主に弾幕シューティングゲームを一次創作とする創作物で，権利関係が他より甘く，ゲーム，音楽，同人誌などの二次創作が大変活発になされている界隈です．気になる方は詳しくはググってください笑．あまり天文民で東方を知っている &amp; 原作を熟知している人も少ない（僕も熟知しているかは微妙ですが）ので，やけに仲間意識が芽生えてしまうところですね．ちなみにAramis さんは地霊殿が好きだそうで，音楽 CD も 300 枚は所持しているガチ勢だとか（すごい）．僕も風神録地霊殿星蓮船の三分作はとても好きですが，やっぱり一番好きなのは風神録ですかね，この三作のなかでは一番難易度が低いので．好きなキャラは射命丸，妖怪の山で中学生の頃初めて変拍子という概念を知った．あ，詳しくはググってください笑．</p><p>さて，楽しく話をしたり，のんびり星空を眺めたりしていたりしているうちに夏の天の川は西の空にかかり，月が上ろうというところ．今回来ていただいたりゅーじんさんと記念撮影をし，僕は車で少し仮眠をとりました．</p><p><img src="/images/00000036-2020-08-amagi/tw03.jpg" alt="星空記念写真">w &#x2F; <a href="https://twitter.com/heartpainteriu">@heartpainteriu</a></p><p>起きだすと細い月と金星が並んで輝いていたので，R200SS に付け替え，再度眼視を楽しみました．月は地球照部分の模様もはっきりと確認でき，立体感がリアルでした．金星は半月状に欠けているのを確認できました．夏の天の川の高度もかなり落ちていたので，到着時にあきらめていたアルビレオや，h-χ，すばる，上ってきたオリオン大星雲などを見て，撤収しました．<br>4時過ぎに出発で帰りも滞りなく，休憩一回で午前7時前には帰宅することができました．りゅーじんさんにも大変満足してもらえたようで，坂本真綾ライブ時に家に泊めていただいたり，真綾ファンオフ会に参加させていただいたりした恩をお返しできたと思っています．</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/heartpainteriu/status/1294606053338787841"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/heartpainteriu/status/1294786004591636481"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/heartpainteriu/status/1294995338093137920"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/heartpainteriu/status/1294994708389748736"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/heartpainteriu/status/1294996490977292288"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>嬉しいのでめちゃくちゃツイートを貼ってしまう．</p><p>そうそう，今回の遠征には残念ながら間に合わず使えませんでしたが，FSQ 用フラットナーが届いたので，次の遠征には持っていきたいです．</p><p><img src="/images/00000036-2020-08-amagi/tw04.jpg" alt="フラットナー1.01X">PONG☆</p><p>それではまた！</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 鏡筒 </tag>
            
            <tag> 赤道儀 </tag>
            
            <tag> パーツ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020年7月 撮ったぜネオワイズ</title>
      <link href="/2020/07/20/00000035-2020-07-neowise/"/>
      <url>/2020/07/20/00000035-2020-07-neowise/</url>
      
        <content type="html"><![CDATA[<h1 id="撮ったぜネオワイズ"><a href="#撮ったぜネオワイズ" class="headerlink" title="撮ったぜネオワイズ"></a>撮ったぜネオワイズ</h1><p>こんにちは．今話題のネオワイズ彗星を撮影してきました．</p><span id="more"></span><p>7月19日の日没後，関東圏がもしかしたら晴れるかも？ということで，雨季の最後の望みをかけて，神奈川県城ヶ島まで行ってきました．</p><p><img src="/images/00000035-2020-07-neowise/tw01.jpg" alt="願掛け">（雲が ALL CLEAR されることを願って）</p><p>私は神奈川県民なので，都道府県をまたぐ移動にはならない…はず（なんですが結局東京から友人を招いたのであまり意味はありませんでした）．<br>私の自宅最寄り駅で友人を拾って，そのまま城ヶ島の灘ヶ崎へ．到着は18:30頃，すぐ近くの駐車場はいっぱいだったので，付近で機材と友人を下ろして見張りを任せ，少し歩いたところの広い駐車場に車を停めました．</p><p><img src="/images/00000035-2020-07-neowise/tw02.jpg" alt="天気はよさげ…？"></p><p>天気はいい感じです！これなら見えそう…．<br>現地には多くの人がいて，今回一緒に来た友人以外にも，<a href="https://twitter.com/KunoichiSky">くノー</a>さんはじめ二人ほど知り合いに遭遇しました．</p><p>初めて見るので，正確な位置は全くわからず．導入の自信はないのでとりあえずカメラに 24mm(-70mm) でしばらく撮影．</p><p><img src="/images/00000035-2020-07-neowise/24mm.jpg" alt="夕焼け"><br>赤道儀に乗せてガバ水平です．それにしても，きれいな夕焼けだぁ．</p><p><span style="font-size: 200%; color: red;">いや，どこにいるか全然わからん…．</span><br>素人には彗星の「す」の字も判別できません．周りからはぽつぽつと，「双眼鏡で見えた」とか，「写った」とか聞こえてきます．探す方法を教えている人もいて，聞き耳をそばだてていましたが，全くわからず．短焦点だとプレビューで分かりづらく，長焦点だとそもそも導入できているのかがわからないというトレードオフがありますね…．</p><p>それから2,30分ほどたって，ようやく「これか…？」と思うものを見つけたので，中央に持ってきて 135mm で撮影したところ，しっかり写ってくれました．<br>このときはまだ高い位置にあったうえに，F も明るい光学系だったので，ライブビューで観察することができました．核は他の星と異なり青緑っぽくエメラルドのようにきらきらと輝き，尾もなんとなく判別できました．写真に写ってくれたことよりこっちのほうが感動でした．</p><p><img src="/images/00000035-2020-07-neowise/135mm.jpg" alt="135mm でネオワイズ"></p><p>写ってくれたので何枚か撮影して満足し，FSQ に付け替えました．明るい空に向けていたせいか淡い部分もあまり見えず，135mm では迫力がなかったので，いっそ 450mm のほうが良いかなと思ったのです．</p><p>が，とにかく FSQ だと導入が難しい．友人にも手伝ってもらいましたがなかなか難しく，結局，「振ってたら入った」という形で一応写野に収めることはできました．この頃にもライブビューで観察してみましたが，低い位置にあったため，ライブビューでは FSQ をもってしてもなんとなく見えるかな，という程度になっていました．</p><p><img src="/images/00000035-2020-07-neowise/neowise_450mm.jpg" alt="ネオワイズ彗星"></p><p>淡い部分は諦めていますが，日没後の空のグラデーションもあって，それなりに美しい絵になったんじゃないかと思います．<br>DSS を使ってコンポジットしていますが，なぜか毎回微妙に核が分裂してしまいます．色々試しましたが無理だったので，今回も諦めました（アトラスを撮ってみたときも似たようなことがありました）．一枚ごとに位置合わせをしているはずなのですが…有識者の方はご教示いただけると幸いです．<br>今後暗くなってしまうことが予想されるネオワイズ彗星ですが，暗いところで機会があったらまた狙ってみようと思います．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2020年6月 美ヶ原，それと部分日食</title>
      <link href="/2020/07/02/00000034-2020-06-summary/"/>
      <url>/2020/07/02/00000034-2020-06-summary/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．一応緊急事態宣言は明けているものの大学も基本的に入れず，家で引きこもっている私です．<br>本当に半年早期卒業することになってしまったので修論をヒーヒー言いながら書いています．そんなでも本能には抗えず，星見の誘いを目にしてしまったのでホイホイ美ヶ原まで行ってきてしまいました．<br>あと日食も撮ったので，それについても少し書き留めておきます．</p><span id="more"></span><h3 id="晴れの美ヶ原"><a href="#晴れの美ヶ原" class="headerlink" title="晴れの美ヶ原"></a>晴れの美ヶ原</h3><p>6月16日の昼過ぎに，知り合いの方から星見の誘いがありました．ガチガチの撮影はせず，ふらっと見て帰ろうという話です．当然僕は修論があるので無理！と言うつもりだったんですが，星見の欲には抗うことができず行くことにしました．お誘い頂いた方は別働隊で，我々はサークルでの後輩の家車で，他に参加してくれた後輩2人も連れて夜21時頃の東京を出発しました．</p><p><img src="/images/00000034-2020-06-summary/tw01.jpg" alt="いつもの片側交通トンネル">いつもの片側交通トンネル．</p><p>最近天城ばかりだったので本当に久々に美ヶ原に行きました．しかもめちゃくちゃ晴れている．こんな美ヶ原は一年以上ぶりです．到着はとうにてっぺんを回っており，天の川が垂直に立とうとしている頃でした．とても良い空だったので，美しの塔まで行って少し撮影しました．</p><p><img src="/images/00000034-2020-06-summary/utsukushi_01.jpg" alt="空に伸びゆく"></p><div style="text-align: center;">”空に伸びゆく”<br>2020年6月17日 午前2時35分～ 美ヶ原にて<br>Canon 24-70mm F2.8L II USM（24mm）<br>Canon EOS 6D<br>三脚使用<br>前景：ISO 12800 / F3.2 / 25s * 8 加算平均<br>背景：ISO 3200/ F3.2/ 25s * 1<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br><br></div><p><img src="/images/00000034-2020-06-summary/utsukushi_02.jpg" alt="車のメンツで集合写真も"></p><div style="text-align: center;">”車のメンツで集合写真も”<br>2020年6月17日 午前1時56分～ 美ヶ原にて<br>Canon 24-70mm F2.8L II USM（24mm）<br>Canon EOS 6D<br>三脚使用<br>ISO 3200/ F3.2/ 25s * 1<br>Adobe Lightroom CC / Photoshop CC<br><br></div><p>その後3時過ぎには出発して，結局朝の7時半頃には東京に到着というスピード感で帰ってきました．まるで夢の中にいたみたいだ…．運転してくれた後輩には感謝です．<br>7月の新月期はある程度執筆も片付いているはずなので，晴れたら山梨，長野方面に行きたいと思います．ウイルス関連の現状が悪化して，外出の規制が強化されないことを祈るばかりです．</p><p><img src="/images/00000034-2020-06-summary/tw02.jpg" alt="いい観測でした"></p><h3 id="部分日食"><a href="#部分日食" class="headerlink" title="部分日食"></a>部分日食</h3><p>話は変わって，美ヶ原に行った数日後には部分日食がありました．今回初めて太陽を撮影するということで，多少準備をする必要がありました．<br>Baader さんのアストロソーラーフィルターを購入し，FSQ（85mm），カメラ（82mm）用に少し工作．余った部分のうちレンズには使えなさそうな部分で簡単な観察グラスを作って，残りは単身赴任の父親にあげました．父親も X7 を持っていまして，赴任先で撮影していたようです．</p><p><img src="/images/00000034-2020-06-summary/tw03.jpg" alt="カメラレンズ用…">まずはカメラレンズ用．</p><p><img src="/images/00000034-2020-06-summary/tw04.jpg" alt="FSQ用">続いてFSQ用…．</p><p><img src="/images/00000034-2020-06-summary/tw05.jpg" alt="FSQ用，絞りあり">F7.5相当に絞る簡易絞りも貼っつけて完成．</p><p>当日はどん曇りで，ダメかと思いましたが，雲越しになんとか数枚，食の様子を撮影することができました．</p><p><img src="/images/00000034-2020-06-summary/eclipse_01.jpg" alt="16:12頃　欠け始め"></p><div style="text-align: center;">”16:12頃　欠け始め”<br>2020年6月21日 午後4時12分 自宅にて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>タカハシ EM-11 Temma2Jr. テキトー追尾<br>簡易絞りにて F7.5 相当に減光，Baader アストロソーラーフィルター使用<br>ISO 3200/ 1/500s<br>Adobe Lightroom CC / Photoshop CC<br><br></div><p>画像の左下（7時の方向）あたりが少し欠けているのがわかりますね．</p><p><img src="/images/00000034-2020-06-summary/eclipse_02.jpg" alt="17:06頃 食の最大4分前"></p><div style="text-align: center;">”17:06頃 食の最大4分前”<br>2020年6月21日 午後5時6分～ 自宅にて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>タカハシ EM-11 Temma2Jr. テキトー追尾<br>簡易絞りにて F7.5 相当に減光，Baader アストロソーラーフィルター使用<br>ISO 200/ 1/30s<br>Adobe Lightroom CC / Photoshop CC<br><br></div><p>こちらは食の最大付近で一瞬雲が退いてくれた時に撮影．欠けているのがよくわかります．</p><p>割と張り切って準備していたので少しでも見られて収穫はあったのかなと思います．できればフルで観察したかったですが…．<br>日食を初めてまともに見たのは2012年の金環食でしたが，高校生の当時は撮影するようになるなどとは微塵も思っていませんでしたｗ．<br>雲越しだとネットで調べて出てくる撮影設定も全然アテにならず，撮りながら勘でやってしまったというのは反省事項です．もう少しプランを練っておけばよかったです(´・ω・｀)<br>次の日食までかなり時間があるそうなので，機材拡充を進めたいと思います．</p><p>それではまた．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2020年5月 天城</title>
      <link href="/2020/06/01/00000033-2020-05-amagi/"/>
      <url>/2020/06/01/00000033-2020-05-amagi/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．大変なご時世ですが，いかがお過ごしでしょうか．3月の小諸から2ヶ月以上ぶりに星撮りに出かけてきましたので，さっくりと書いておきます．</p><span id="more"></span><p>かく言う私はこの時期をどう過ごしていたかというと，基本外には出ませんでしたが，のんびり研究したり，本を読んだり，一方で某振やオンライン国際学会の準備に追われたりして<s>学生にしては</s>忙しい2ヶ月余りを送っていました．かといって，半期飛んで卒業する可能性も出てきたので，こっから修論1ヶ月チャレンジをしなければなりません．全然暇にはならない()．</p><p>5月も遠征に行くのは諦めていたのですが，流石に2ヶ月も引きこもっていると星見の禁断症状が出てくる…というのは半分本当半分冗談です．実際，今回遠征に行こうと思ったのは，来月からの父親の単身赴任が決まったからなんですね．星撮りを5年程度やってきて，未だに親を連れて行ったことがないというのも個人的にどうなのかという気がしますし，しばらく離れて暮らすことになってしまうので，せっかくの梅雨入り前ラストチャンスということで父親を連れて行くことにしました．</p><p>自宅で夕食と風呂を済ませ，21時のGPV更新を見て天城に進路を決定．予報はイマイチでしたが，3-4時にあった晴れ間に賭けました．結局，着いてからほとんど曇ることはなかったです．いつもどおり少し明るめでしたが，シーイングは良好．</p><p>そうそう，天城への道中で時々使うコンビニが2箇所も潰れていてショックでした．自粛の影響は，自分が外に出ず見えていなかったところで確実に出ていたんだと…．</p><h3 id="撮ったもの"><a href="#撮ったもの" class="headerlink" title="撮ったもの"></a>撮ったもの</h3><p>到着自体が日付を回ってからですし，夜の時間も短い季節なので，そこまで長時間の露光はかけられませんでしたが，この時期にしか撮れないM8, M20を1時間弱撮ることができました．</p><p><img src="/images/00000033-2020-05-amagi/work_1.jpg" alt="M8, M20"></p><div style="text-align: center;">”M8, M20”<br>2020年5月30日 午前2時7分～ 天城高原ゴルフコースにて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>ISO 4000 / 180s * 18 = 54 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ライトダーク: ライトと同条件 * 8<br>フラット: 自宅にて ISO-1000 / 1/4000s * 16<br>フラットダーク: フラットと同条件 * 16<br>RStacker / ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br>[<a href="https://www.astrobin.com/nar6da/" target="_blank" rel="noopener">AstroBin</a>], [<a href="https://www.flickr.com/photos/138311056@N05/49952061151/in/dateposted-public/" target="_blank" rel="noopener">Flickr</a>], [<a href="https://astrodabo.tumblr.com/post/619549560067555330/m8-m20-at-amagi-plateau-golf-cource-in-shizuoka" target="_blank" rel="noopener">Tumblr</a>]<br><br></div><p>いやーやはり美しい天体ですね．北側の淡く赤（紫？）っぽい部分が好きです．<br>さて今回は，フラットをしっかり撮ってみることにしました．「フラットはライトと同条件で撮れ！」とシンプルによく言われますが，構図以外なにを同条件にすれば良いのか個人的にはサッパリ分からずこれまで敬遠していました（だって同条件で撮ったら絶対白飛びするじゃないか…(´・ω・｀)，たぶん僕の理解の仕方が良くない）．しかし，望遠鏡で撮っている以上フラットは避けて通るわけにはいきません．とりあえず，向きだけ合わせて，なるべくヒストグラムピークがライトと同じような位置になるような設定で撮影しました．フラットは自宅で，晴れた日に網戸をした窓に向かってトレーシングペーパーをかぶせて撮りました．こんな感じです↓<br><img src="/images/00000033-2020-05-amagi/tw01.jpg" alt="トレーシングペーパーフラット">付け焼き刃感がすごい．</p><p>強調前の処理手順は基本に忠実？に，</p><ol><li>ライトダークをコンポジットしてマスターダークを作る．(RStacker)</li><li>ライトからマスターダークを引く．(RStacker)</li><li>ライトをtifに変換．(Lr)</li><li>フラットダークからフラット用マスターダークを作る．(RStacker)</li><li>フラットからフラット用マスターダークを引いてコンポジットする．(RStacker)</li><li>ライトをコンポジットする．この時フラットを引く．(SI8)<br>というふうにしました．</li></ol><p>それでは効果を見てみましょう．フラット補正してコンポジットする前のtifとコンポジット後のtifを見比べてみます．</p><p><img src="/images/00000033-2020-05-amagi/flat_1.jpg" alt="フラットの効果1"></p><p>うーん…？確かに全体的なゴツゴツ感と中央の明るいもっこり感はなくなった気がする？よくわからないのでLrで強調してみましょう．</p><p>フラット補正前<br><img src="/images/00000033-2020-05-amagi/flat_2.jpg" alt="フラット補正前"></p><p>フラット補正後<br><img src="/images/00000033-2020-05-amagi/flat_3.jpg" alt="フラット補正後"></p><p>確かに，中央から中央右にかけて明るくなっているところが均されている感じがしますね．コンポジット時のトリミングの効果もありますが，左側の黒い落込みも改善されています．<br>構図だけしっかり覚えていれば，家で簡単にフラットが撮れると実感できたのは収穫でした．この後の強調編集でも，周辺減光やカブり補正のようなことは一切せず，とても楽でした．これからもめんどくさがらずにフラットは撮っていこう…．</p><p>ついでに父親も(撮ってくれと言うのでテキトーに)撮影しました．父親は山に登る人なので星空は見慣れているかと思っていましたが，かなりよく見えると感動していました．せっかく自分のカメラを持ってきたのに電池を忘れたと言うので，僕のカメラで撮影です．</p><p><img src="/images/00000033-2020-05-amagi/work_2.jpg" alt="父親と天の川"></p><p>僕ら以外には，Twitterで行こうかと相談していた<a href="https://twitter.com/AstronomyPisuke">ピースケさん</a>と，他に3,4台程度の車が下段の駐車場で機材を広げていました．しっかり5～10m程度の間隔は開いていました．良い空を味わえてよかったです．<br>梅雨が開けて今より状況が落ち着いてから，また遠征したいと思います．それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2020年3月 小諸</title>
      <link href="/2020/03/25/00000032-2020-03-komoro/"/>
      <url>/2020/03/25/00000032-2020-03-komoro/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>先日の三連休の間で小諸に星見に行ってきましたので，簡単にまとめておきます．</p><span id="more"></span><h3 id="小諸へ"><a href="#小諸へ" class="headerlink" title="小諸へ"></a>小諸へ</h3><p>私が所属する「屋根裏天文舎」というゆるい星見団体では，夏と冬に一回ずつ星見合宿をします．夏は乗鞍岳の「白雲荘」へ，冬は小諸にある「西川ペンション星の宿」に大体二泊三日で宿泊します．今回も（例年よりちょっと遅めになりますが）そこで星見をするということで，通算三回目（？）の参加をしてきました．夏の乗鞍と比べてしまうと標高の差が大きいので流石に見劣りしてしまう空ですが，何より宿の料理が美味しい，宿から出て15秒のところで観望ができる，コンビニがそれなりに近いというのが西川ペンションの大きな利点です．</p><p><img src="/images/00000032-2020-03-komoro/tw01.jpg" alt="今晩と明日の晩の星見処"><br>こんな感じで観測施設もあったりします．対空双眼鏡があるのでメシエ天体や他の銀河などを眺めるにはとても良いです．</p><p>毎回大雪が降ったりしてタダでは帰れない冬の星見合宿ですが，今回は特に大きなトラブルもなく，二晩ともそれなりの晴れに恵まれました．<br>今回も基本的に FSQ での撮影と，それからこの合宿の直前に買った Helinox ビーチチェアの使用感を確かめることが主な目的でした．</p><h3 id="Helinox-ビーチチェアについて"><a href="#Helinox-ビーチチェアについて" class="headerlink" title="Helinox ビーチチェアについて"></a>Helinox ビーチチェアについて</h3><p>先にチェアについて書いておこうと思います笑 このチェアを買ったのは，Twitter で誰かが良いと言っていたのを頭の片隅で覚えていたからなのです．実際に使ってみると，確かに使い勝手は良かったです．シンプルな構造（フレームをセットして椅子を四箇所で留めるだけ，ちょっと固いのでテンションをかけながら留める必要あり）なのでセッティングや片付けにそこまで時間はかからないし，何よりとても軽い．もともと山にも持っていけるようなものなので当然ですが，ここまで軽いとは驚きでした．それだけ軽いので，風が強い日は外には出せない気がします…笑　ブランケットも使えば，夏場は楽々寝られるでしょう．ある程度の背もたれの大きさがあるタイプなので，真上を見上げることは（相当座高が高くない限り）できませんが，それでも星空を楽しむ分には申し分ないと思います．早く夏の天の川に向かって座ってみたいものです．</p><p><img src="/images/00000032-2020-03-komoro/tw02.jpg" alt="至福">至福．</p><h3 id="一晩目-～-M81-M82-と-C-2019-Y4-アトラス彗星～"><a href="#一晩目-～-M81-M82-と-C-2019-Y4-アトラス彗星～" class="headerlink" title="一晩目 ～ M81&#x2F;M82 と C&#x2F;2019 Y4 アトラス彗星～"></a>一晩目 ～ M81&#x2F;M82 と C&#x2F;2019 Y4 アトラス彗星～</h3><p>本当はチェアに座ってぐうたらしていたいところですが，M81&#x2F;M82 とアトラス彗星が接近中，かつ FSQ の 450mm 写野でギリギリ両方写せるということで，一晩目は M81&#x2F;M82 を狙うことに決めていました．<br>が，夜半近くのこの領域は高度が高く，いつだったかの M106 のようにそもそも全然導入できない笑．結局，おおぐま座α星（ドゥペ）から目盛り環を使ってなんとか導入…．ファインダーがあれば幾分マシになると思うのですが…（買おうかな）．</p><p><img src="/images/00000032-2020-03-komoro/m8182_intro.jpg" alt="M81&#x2F;M82 の導入"></p><p>そしてさらに困難なのが，アトラス彗星と同写野に入れること．カメラの向きを東西南北揃えてはダメで，よしなに回転させる必要があります．これは気合でなんとかしました．<br>途中インターバルも3分にするというトラブルもあり，彗星をどうこうするというのは今後明るくなってからの課題にしたいと思いますが，とりあえず両方写っただけ万々歳です．</p><p><img src="/images/00000032-2020-03-komoro/work_1.jpg" alt="M81&#x2F;M82 と C&#x2F;2019 Y4 アトラス彗星"></p><div style="text-align: center;">”M81/M82 と C/2019 Y4 アトラス彗星”<br>2020年3月21日 午前0時57分～ 長野県小諸市西川ペンション星の宿にて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>ISO 3200 / 180s * 32 = 96 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p>強調したら分子雲がいたので少し炙ってみました．普通に恒星基準で加算平均コンポジットです．シグマクリッピングもしていないので，真ん中を飛行機やら人工衛星やらが通過していますが，まああまり気にしない感じで…笑．注目されているこの C&#x2F;2019 Y4 ですが，しっかり増光してくれるといいですね．</p><h3 id="小休止（銭湯-あぐりの湯こもろ-へ）"><a href="#小休止（銭湯-あぐりの湯こもろ-へ）" class="headerlink" title="小休止（銭湯 あぐりの湯こもろ へ）"></a>小休止（銭湯 あぐりの湯こもろ へ）</h3><p>翌日少しお腹の調子が悪かったのですが，朝食を食べてしばらくしたら復活したので，上の作品のコンポジットを仕掛けて温泉へ向かいました．ここらで温泉に入るのは三回目の参加にして初めてでしたが，とても良い温泉でした．もう1年早く知っておきたかった…．</p><p><img src="/images/00000032-2020-03-komoro/tw03.jpg" alt="あぐりの湯こもろ"></p><p>サウナは二段あって上段で暑すぎも寒すぎもせず，水風呂は15度と個人的には少し冷たいくらい．そして何より，脱衣所に湯上がり室という部屋があって，外気浴ができないほど寒い時期にはこの部屋が最適．バチバチに整うことができました．これで入館料500円なので，コスパはかなり良いと思います．また行きます．</p><h3 id="二晩目-～M51-M13～"><a href="#二晩目-～M51-M13～" class="headerlink" title="二晩目 ～M51, M13～"></a>二晩目 ～M51, M13～</h3><p>一晩目で苦労したので，今回は楽に撮影できる対象を主に狙いました．M51 子持ち銀河と M13 球状星団．450mm では少し小さめですが，両方とも導入は楽な対象です．</p><p><img src="/images/00000032-2020-03-komoro/work_2.jpg" alt="M51 子持ち銀河"></p><div style="text-align: center;">”M51 子持ち銀河”<br>2020年3月21日 午後10時10分～ 長野県小諸市西川ペンション星の宿にて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>ISO 3200 / 180s * 36 = 108 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p>まずM51．フラットがめんどくさかったので上下はトリミングしました．しっかりと自分の中の子持ちらしい出来になったかなと思います．</p><p><img src="/images/00000032-2020-03-komoro/work_3.jpg" alt="M13 球状星団"></p><div style="text-align: center;">”M13 球状星団”<br>2020年3月22日 午前0時24分～ 長野県小諸市西川ペンション星の宿にて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>ISO 3200 / 180s * 32 = 96 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p>こちらはM13．やはりトリミング．大規模な星団なだけあって写真でも見応えがあって美しいですね．<br>本当はもう少し春の銀河を撮ってみたさもありますが，今シーズンはこれくらいになりますかね．今回の新月期も上弦までまだ少しありますが，天気的に遠征に出られるかどうかは怪しいです．次の新月期では恐らく夏の天の川を狙うことになるでしょう（どこを撮るかは既に決めています，といってもオーソドックスな場所ですが）．</p><p>それでは～．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2019年12月 おんたけ2240（天文ガイド入選）</title>
      <link href="/2020/03/04/00000031-2019-12-otaki/"/>
      <url>/2020/03/04/00000031-2019-12-otaki/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>昨年末に，久々に長野県王滝村に遠征に行きましたので，撮影したものと遠征記を簡単に書いておきます．</p><span id="more"></span><h3 id="都内から王滝へ"><a href="#都内から王滝へ" class="headerlink" title="都内から王滝へ"></a>都内から王滝へ</h3><p>冒頭「久々」，と書きましたが，最初に王滝村を星見で訪れたのは，私が学部1年→2年に上がる2月頃でした．その頃はまだ撮影を始めたばかりで，ろくな防寒知識もなく（とりあえずたくさん着重ねておけばいいでしょという考え），-20℃近い中呻きながら寝ていたのを覚えています．しかもその時は極寒の中二晩も観測したのでした…．<br>その時からお世話になっていて，今回も連れてってくださる方は都内在住なので，予め自分の機材をそちらに運んでおき，その方の車で都内出発ということになりました．</p><p><img src="/images/00000031-2019-12-otaki/tw01.jpg" alt="いいお天気！">いいお天気！</p><p>中央道を通り，諏訪湖でアホなことをしつつ少し休憩．途中王滝に向かう山道手前のスーパーでカップ麺を備蓄（一晩だけなのになぜか5つも買ってしまった）し，こちらの方面に住んでいるK君とも合流，王滝村に向かいました．<br>道中には猿がたくさんいました．ここ以外だと日光戦場ヶ原に行く際にいろは坂などで見ることが多いですが，こちらの野生猿はとにかく数が多かった．狭路の真ん中に居座っていたりするので，轢きそうで怖い．<br>そんなこんなで王滝村に着き，とりあえず温泉と夕飯処が無いかということで，まずは観光案内所を訪ねました．ここの案内所のおばちゃんはとてもフランクでお優しい方で，こちらの質問に丁寧に答えてくださったのが印象的で，なおかつ「銀河の雫」という非売品の水までもらってしまいました．ありがたや…．<br>結局，夕飯はカップ麺の備蓄があるので省略することにし，温泉はおんたけ2240スキー場にあるスキー客用のものに入ることにしました．おんたけ2240の駐車場にも以前一度行ったことがあったので，久々の訪問になります．</p><p><img src="/images/00000031-2019-12-otaki/tw02.jpg" alt="おんたけスキー場から">おんたけスキー場から，気温はこのときすでに1℃くらい．</p><p>観光案内所からここまでの道中，若干雪が残っていましたが，スタッドレスで止まることなく上っていったので特に滑ることはありませんでした．翌朝帰る際は心配だったのでチェーンを巻いていただきました．<br>温泉を出て（スキー客のためか？ここのお湯はけっこう熱い）18時頃からセッティング開始．19時から翌朝4時頃まで，とても長い冬の夜を過ごしました．</p><p><img src="/images/00000031-2019-12-otaki/tw03.jpg" alt="深く，長い夜がはじまる">深く，長い夜がはじまる．</p><p>セッティング途中でとりあえずテキトーに自撮り．</p><h3 id="掲載作品"><a href="#掲載作品" class="headerlink" title="掲載作品"></a>掲載作品</h3><p>この長い夜で撮影した作品ですが，月間天文ガイド2020年4月号ビギナーの部に掲載していただきました．天文ガイドに載るのは初めてなので，嬉しいです．</p><p><img src="/images/00000031-2019-12-otaki/work_1.jpg" alt="貴女の苦しみ"></p><div style="text-align: center;">”貴女の苦しみ”<br>2019年12月28日 午後19時4分～ 長野県王滝村おんたけ2240スキー場駐車場にて<br>SIGMA 135mm F1.8 DG HSM Art (F2.8)<br>Canon EOS 6D<br>ISO 2500 / 180s * 130 = 390 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br>月刊 天文ガイド2020年4月号ビギナーの部 掲載<br><br></div><p>応募時から若干色味を変えています．僕はどうやら明るい部分を黄色に寄せすぎるクセがあるらしく，あとから赤（オレンジ？）に寄せてごまかすことが多いです笑．<br>ポイントは6.5時間も露光できたことですかね．牡牛座が東から西へ移動する間中ひたすら露光できました．驚いたのは，バッテリー（SG-3500）が極寒の中ここまで保ったということです．いくら重くない機材とはいえ，冬の夜に一晩保つとは思っていませんでした．今回の MVP です．<br>いつもコンポジットにはステライメージ8を使っていますが，これだけの枚数あるとものすごい量のキャッシュを吐くので，そのためにカツカツの PC 容量を空ける必要があり大変でした．<br>それから，タイトルについて本誌でも触れられていますが，牡牛座にまつわる神話を少し調べてつけました．大神ゼウスが牛に姿を変え，エウロパをさらったという神話が有名なようですが，今回はこちらではなく，ゼウスの妻ヘラが，ゼウスに愛されるイオという女性を嫉妬から牛の姿に変えたという方から採用しました．分子雲の美しくも禍々しい見た目が，こちらの神話の方によりリンクするかなあと思ったためですね．坂本真綾楽曲に詳しい人は，このタイトルとある曲の歌詞がリンクしたりするんじゃないかなあと思っています笑．<br>あ，あとこの写真の現像は日本酒を飲みながらやりました．観測明けでヘロヘロの中，さらにお酒を入れながら現像するのはなかなか良いのかもしれません(？)．</p><h3 id="もう一枚"><a href="#もう一枚" class="headerlink" title="もう一枚"></a>もう一枚</h3><p>牡牛座が西に傾いてから薄明までしばらく時間があったので，カメラを北に向け（というのも，南関東で撮影することが多く，いつもより北の空が暗い印象だったためです），M81, 82付近の分子雲にトライしてみることにしました．</p><p><img src="/images/00000031-2019-12-otaki/work_2.jpg" alt="すぐ傍の彼方から"></p><div style="text-align: center;">”すぐ傍の彼方から”<br>2019年12月29日 午前2時6分～ 長野県王滝村おんたけ2240スキー場駐車場にて<br>SIGMA 135mm F1.8 DG HSM Art (F2.8)<br>Canon EOS 6D<br>ISO 2500 / 210s * 47 = 164.5 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p>ここの分子雲は以前の撮影で薄雲に沈み大敗した対象なので，今回これだけ分子雲の存在が確認できてかなり満足です．タイトルは坂本真綾楽曲から，まあ分かる人には分かるでしょう．</p><p><img src="/images/00000031-2019-12-otaki/tw04.jpg" alt="2月に撮ったとき">2月に撮影した領域，雲泥の差ですｗ．</p><p>こちらは星ナビに応募し，密かに同時掲載を狙っていたのですが，無事失敗に終わりました笑．まあ銀河のディテールも飛んでしまっているし，粗を探せばきりが無いので，仕方ないですね．同時掲載は一筋縄ではいかないということで，今後も精進してまいります．</p><p>今年は FSQ で一回くらい入選してみたいものですが，焦点距離が伸びれば伸びるほど技術の外で勝負が効かなくなってくるので，下手の横好きでやっている自分はあまり自信がありません．まあとにかく頑張ってみようと思います．それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FSQ85-EDP ファーストライト！</title>
      <link href="/2020/02/24/00000030-fsq-first-light/"/>
      <url>/2020/02/24/00000030-fsq-first-light/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>いつもお世話になっている方からの遠征のお誘いを受け，23日の日曜日，当日の遠征で FSQ-85EDP のファーストライト（買ってから一ヶ月以上経ちました…）を決行するために必要なパーツを揃えるために秋葉原へ行きました．</p><span id="more"></span><h3 id="余談"><a href="#余談" class="headerlink" title="余談"></a>余談</h3><p>いきなり天文とは全く関係のない余談なのですが，パーツ買いの前に「さよならの朝に約束の花を飾ろう（通称『さよ朝』）」の復活上映が秋葉原 UDX シアターであるということで，チケットを取って見に行ってきました．<br>この作品，アニメ映画なのですが，「人がなぜ人と出会い，人を愛し，人と別れ，生きるのか」という大きなテーマが根本にありまして，「愛」がもつ光と闇，暖かさ，冷たさ，切なさを同時に見ることができ，他作品に比べあまりメジャーではないもののコアな層に人気がある作品になっています．昨日24日で公開から2周年ということなのですが，私が最初に見たのは昨年夏のことで，とても素晴らしかった記憶がありこの日も2回目を見に行きました．ストーリーを知っているので，開始15分程度のタイトルコールから既に涙溢れ（他の観客の方からも鼻をすする音が聞こえてきました），ラストまでほぼ泣きっぱなしというなかなか他には無い映画でした．エンディングが終わってからは自然と拍手が湧き，周りの観客はほぼ全員号泣，中には顔を真っ赤にしておいおい泣いている人もいて，愛されている作品だと感じました．<br>2回目を見ることで，初見ではきちんと気づいて飲み込めていなかった設定や描写を知ることができたのも良かったですね．とにかく最近のアニメ映画の中では個人的には最高峰だと思っています．まだご覧に鳴っていない方は是非．</p><h3 id="買ったもの"><a href="#買ったもの" class="headerlink" title="買ったもの"></a>買ったもの</h3><p>それはそれでおいておいて，真っ赤に泣き腫らした目でスターベース東京さんへ．必要なカメラマウント DX-WR(EOS)，鏡筒バンド(95S-GT)，鏡筒バッグ(屈折用S)を買いまして，お昼をとってから一旦帰宅．<br>仮眠をとり，迎えが来てくれるまで少し組み立てて使用感を確認．</p><p><img src="/images/00000030-fsq-first-light/tw01.jpg" alt="ブッピガーン！"></p><p>カメラを構える形で持ってみるとかなり重く，飛行機撮影は苦労するなと思ったり…笑．</p><h3 id="天城へ"><a href="#天城へ" class="headerlink" title="天城へ"></a>天城へ</h3><p>今回はスターベースで働いてるM君とそのお友達も同行するということで，それぞれ私の地元周辺で拾い（わざわざこちらまで来ていただいてありがたい限りです），天城高原へ向かいました．途中網代のガストで夕食をとり，ささっといつもの駐車場へ．<br>出発が19時過ぎだったこともあり，到着は22時半を過ぎた頃でした．駐車場は三連休中日の夜，快晴とあって大繁盛でした．天城といえど，2月ということでかなり寒さがありました．防寒をサボったので朝まで凍えることになりました．少し明るい（最近の天城は明るい印象です）ですが，到着時のシーイングは良かったように思います．<br>現地では既に何度かお会いしている<a href="https://twitter.com/ShonanAstroPhot">けーたろさん</a>や<a href="https://twitter.com/magicalflute77">Aramisさん</a>の他，<a href="https://twitter.com/kyuri_shumi">きゅうりさん</a>や<a href="https://twitter.com/starphoto_nabe">nabeさん</a>にも初めてお会いすることができました．ご挨拶どうもありがとうございましたm(_ _)m．</p><p><img src="/images/00000030-fsq-first-light/tw02.jpg" alt="ファーストライト！"></p><p>ドヤ顔で自撮りをかまし撮影準備を開始．<br>FSQ の使用感はなかなか良く，P鏡筒である(?)こともあって撮影システムを組むのはかなり楽でした．組み上げ，極軸合わせまではほぼいつもどおりうまくいったのですが，問題なのは導入．450mm と春の銀河を撮るにしては広角なので，ある程度大きな M106 でも撮るかと思っていたのですが，いざ導入しようと思うと全然入らない．これまで135mmでお気楽でやっていたツケです．1時間ほどウンウン言いながら知り合いの方に見せていただいた星図とにらめっこしていたのですが，ふと気づきました．</p><p><img src="/images/00000030-fsq-first-light/01.jpg" alt="M106 を導入したい"></p><p>ここにステラナビゲータさんで表示したおおぐま座のおしり部分があります．導入したいのは赤丸の部分です．何かに気づきませんか？<br>そうです！おおぐま座χ星が，目標天体とほぼ同じ赤緯にあるではあーりませんか（なぜもっと早く気が付かなかったのか）！　そしてこのχ星は北斗七星を構成するγ星(フェクダ)と似たような赤経上にありますね．</p><p><img src="/images/00000030-fsq-first-light/02.png" alt="M106 の導入方法の一例"></p><p>つまりこのように，γ星(ライブビューで見える，撮影するとM109が近くに写るのでわかりやすいです)→(赤緯モーター)→χ星(これもライブビューで写ります)→(赤経モーター)→M106という風に導入できるわけですね．また一つ勉強になりました．<br>ステラナビゲータでシミュレーションしてみると，エクステンダーをつけた680mmでもこの方法で導入できそうですね．1000mm近くなってくるとγ星→χ星を一度にやるのがちょっと厳しそうですので，おとなしくファインダーを使うなりしたほうが無難です．というわけでちゃんと導入できたので，本撮影開始．</p><p><img src="/images/00000030-fsq-first-light/work_1.jpg" alt="M106 Galaxy"></p><div style="text-align: center;">”M106 Galaxy”<br>2020年2月24日 午前0時51分～ 天城高原ゴルフコースにて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>ISO 3200 / 210s * 22 = 77 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p>結局すぐに子午線を迎えてしまったので，1時間程度の露光になりましたが，初めてにしては上出来です．改めてしっかり現像してみると，この筒のすごさがよく分かりました．天の川や星雲を撮影するのが楽しみです（今回バンビも撮ろうかと思ったのですが，天の川がしっかり上ってくるのは薄明前後になってしまう &amp; 眠すぎたのでやめました）．<br>その後はトリプレットを導入して露光開始．こちらの導入は M106 に比べると簡単ですね．</p><p><img src="/images/00000030-fsq-first-light/work_2.jpg" alt="Triplet―M66 Group"></p><div style="text-align: center;">”Triplet―M66 Group”<br>2020年2月24日 午前2時30分～ 天城高原ゴルフコースにて<br>タカハシ FSQ-85EDP (450mm F5.3)<br>Canon EOS 6D<br>ISO 4000 / 240s * 1 + 180s * 30 = 94 min<br>タカハシ EM-11 Temma2Jr. ノータッチガイド<br>ステライメージ8 / Adobe Lightroom CC / Photoshop CC<br><br></div><p>「M65, 66, ハンバーガー」のトリオです．ハンバーガーの旗(アホ毛みたいな？)を出すのは厳しかったのでやめました笑．またしっかり撮る機会にやりたいと思います．</p><h3 id="FSQ-を使ってみて"><a href="#FSQ-を使ってみて" class="headerlink" title="FSQ を使ってみて"></a>FSQ を使ってみて</h3><p>以下に今回の FSQ ファーストライト(撮影)で良かった点と課題を書いておきます．</p><h4 id="良かった点"><a href="#良かった点" class="headerlink" title="良かった点"></a>良かった点</h4><ul><li>使っている EM-11 とよく合う．カッコいい．</li><li>撮影までのセッティングがひじょうに簡単で楽．特に難しいことは何も考える必要がない．</li><li>筒がある程度大きいのでバッテリー交換が容易（当たり前体操，しかし 135mm だとこれが上手くいかなかったのです…）．</li><li>しっかり現像してみると改めて分かるが，やはり星像も色乗りの良さもピカイチ（他と比較したわけではないですが…）．補正レンズなし，ダークなし，フラットなしフルサイズ(フラットについては，Lightroom で補正後，背景を黒く落とすことで誤魔化しています)で上のような写真が撮れることを考えていただければお分かりかと思います．</li><li>課題にもつながることですが，長焦点なので導入が難しい分，撮りたい対象以外の知識もつくし，やはり楽しい．</li></ul><h4 id="課題"><a href="#課題" class="headerlink" title="課題"></a>課題</h4><ul><li>全然関係ないですが，自分の 6D のセンサ汚すぎ（クリーンに出しましょう）．</li><li>冷えるとめちゃくちゃ冷たい（手袋をしましょう）．</li><li>赤緯方向のバランス．カメラをつけるとどうしても接眼側が重くなる．これは専用のプレート(KBプレートS)を買うことで解決します．</li><li>450mm なので3分～4分の露光時間でも少し流れてしまう．エクステンダーまで揃えることを考え，ちゃんとガイドを組まないといけませんね．</li><li>長焦点なので導入が難しい（良かった点に書いたとおり，良い部分でもある）．</li></ul><p>以上です．まだまだ色々伸び代があるシステムなので，ここから数年かけてのんびり楽しんでいこうと思います．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 機材 </tag>
            
            <tag> 鏡筒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>タカハシ FSQ-85EDP 購入しました</title>
      <link href="/2020/01/07/00000029-fsp85edp-purchased/"/>
      <url>/2020/01/07/00000029-fsp85edp-purchased/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>新年あけましておめでとうございます．今年は喪中なのであまりこの言葉は言わないほうがいいそうなのですが，今年もよろしくおねがいします．</p><p>本当はこの記事の前に年末ライブの感想記事を書いているところなのですが，短めのこちらを先に公開してしまおうと思います．</p><span id="more"></span><h3 id="やってしまった…"><a href="#やってしまった…" class="headerlink" title="やってしまった…"></a>やってしまった…</h3><p>タイトルの通りなのですが，先日ついに初タカハシ鏡筒， FSQ-85EDP というガチ屈折望遠鏡を購入しました．本当はもうちょっと後に買う予定だったのですが，1月と2月は忙しくなることが予想されるのと，ずっと欲しかったものでいてもたってもいられなかったこともあり，金欠覚悟でさっさと買ってしまおうと思い立ったわけです．ちょうど5日には大学院の友人らと神保町のカフェに行く予定もあったので，近場の秋葉原まで歩いていって買うことにしました．</p><p><img src="/images/00000029-fsp85edp-purchased/01.jpg" alt="網棚に置かれる FSQ"><br>電車で運搬中の望遠鏡．置き去りフラグではないですよ？！</p><p><img src="/images/00000029-fsp85edp-purchased/02.jpg" alt="無事帰宅"><br>というわけで無事に持ち帰りました．</p><p><img src="/images/00000029-fsp85edp-purchased/03.jpg" alt="御開帳"><br><span style="font-size: 500%">やってしまった…</span><br><br><br></p><p><img src="/images/00000029-fsp85edp-purchased/04.jpg" alt="記念撮影"><br>部屋で急遽記念撮影．汚部屋なのでここ以外は写せませんが笑</p><p>月末は誕生日なので，自分への誕プレのつもりです．今まで135mm以下で極軸もテキトーにぬくぬくやっていたわけですが，ここにきて「長焦点撮影のスタートラインに立った．もう逃げられない．」という気持ちですね．書いたとおりまだ嬉しさよりもやってしまった感のほうが強いという笑．一応人に頂いた R200SS を持ってはいますが，まだ撮影運用できていなかったので，これを機に撮影鏡筒に仕上げていくというところもやっていきたいですね．どうせガイドシステムを組んでいったりしなければいけないですから．<br>本体以外は本当に何も買っていないので，今のところはただの置物です．早いとこカメラマウントと鏡筒バンドを買って，最低限試せるようにはしたいと思っていますが，本格的にシステムを組んでガチ撮影にもっていくのは今年中の目標ということで，のんびり一生モノにしていきたいと考えています．</p><p>また細々と買ったものがあればここでも報告します．それでは！</p>]]></content>
      
      
      <categories>
          
          <category> 機材 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> 機材 </tag>
            
            <tag> 鏡筒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【坂本真綾】今日だけの音楽ライブツアーに参加してきました</title>
      <link href="/2020/01/01/00000028-music-for-today-only-live/"/>
      <url>/2020/01/01/00000028-music-for-today-only-live/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>あけましておめでとうございます．今年は喪中なのであまりこの言葉は言わないほうがいいそうなのですが，本年もよろしくおねがいします．<br>さて，先月の26, 27, 31日の3日間，坂本真綾さんのライブツアー「今日だけの音楽」に参戦してきたので簡単に感想を書いておこうと思います．</p><span id="more"></span><h3 id="座席について"><a href="#座席について" class="headerlink" title="座席について"></a>座席について</h3><p>オーチャードホール26日は1階5列目左，27日は2階4列目右，国際フォーラムホールA 31日は1階12列目中央右通路側というなかなかに良く，結果的に色々な角度から楽しめるバランスのとれた席だったと思います．</p><h3 id="音楽について"><a href="#音楽について" class="headerlink" title="音楽について"></a>音楽について</h3><p>「今日だけの音楽」そのものについては初聴の感想を<a href="/2019/11/28/00000026-music-for-today-only/">こちら</a>に書いとりますのでそちらを参考に．今回はあくまでライブの感想についてです．セトリ順に，簡単に書いていきます．</p><ol><li><p>はじまり<br>引き込みとして十分な強さを持ったインストです．最初の低いピアノの一音，「夢の中で　音楽を聴いた」から始まる語り，紗幕に薄暗く映し出される模様．今回のアルバムの世界観にずっしりと沈み込んでいくような感覚．</p></li><li><p>Hidden Notes<br>ライブで化けたと思った曲その1．いやもともと好きではあったんですがね．紗幕にショートムービー撮影地の海辺や橋，どこかの道が映し出され，角度によってはその場に坂本真綾のミニチュアが立っているように見えて面白かったです．大サビ前の「悲しみや怒りを恥じないで　内なる情熱を止めないで」という一節が大好きだったのですが，ライブではここで草花や空と雲，通り過ぎる自転車，雫，少女の背中，どこかのホームなどが走馬灯のように次々と映し出される演出がなされ，26日は初見でボロボロに泣いてしまいました．感情が爆発して泣くのはたぶんこれが初めてだったと思います．映像作ってくれた人には感謝．MV にして売ってほしいなと思ってます．</p></li><li><p>ホーキングの空に<br>紗幕に幾何学的模様な CG 映像が映し出されながら展開していきました．佐野康夫さんのドラムと連動して光る豆腐が面白かったです．「解き放て」から紗幕に坂本真綾の影が大きく映される演出も良く，同じ2番のパートで幕が上がり，バンドメンバーがはっきり見えるようになるのも，霧が晴れたようで印象的でしたね．最後にどこかの星雲がモノクロ CCD で撮影されたかのように映し出されていましたが，何の星雲かはよくわかりませんでした．実在しない絵なのかもしれませんが，にしてはよくできていたなあと思います．</p></li><li><p>お望み通り<br>大好きな一曲．佐野康夫さんのサビでのドラムアレンジがすごすぎてそっちばかりに目が行ってしまいました．手拍子してる人が多かったですね．僕も最後は裏でリズムをとってました（大体みんな表でとるのですが，楽曲は最後のサビは裏がメインで鳴ってるからこっちで叩きたい）．</p></li><li><p>オールドファッション<br>こういうキャッチーな曲を前半に持ってくるのはいいですね．基本裏で手拍子．A メロの軽快なリズム，最後のインストのギター二人のアレンジなどが聴いていて良かったです．</p></li><li><p>細やかに蓋をして<br>「悲喜こもごも」から「細やかな感情だけ受け取るわ」に至るまでのたたみかけのパートが大好きなので，ライブではここが本当に力強く歌われていてよかったです．</p></li><li><p>火曜日<br>どこかの田舎？町の風景が映し出されていて，夕暮れを思わせるようなオレンジ色のライトがテーマとして点灯します．とても美しかったです．</p></li><li><p>ディーゼル<br>これも手拍子ですね．31日の公演で大神田智彦さんが静かになるパートで手拍子してもいいんだよとコントラバス(？)の上で手拍子して見せてたのが印象的でした．最後の「パララッパーラッパーラ」がシンガロングしていて楽しかったです．</p></li><li><p>ユーランゴブレット<br>CDでは「ホーキングの空に」の直後に入っていたこの曲ですが，ライブではここに入ってきたかという感じですね．後のトロイメライとのつながりは確かにとても良いのかも．</p></li><li><p>トロイメライ<br>歌も良いんですが，真綾さんがはけてからのインストが良かったです．音に飲み込まれていく感じ．</p></li><li><p>ニコラ -instrumental-<br>ニコラをやったというネタバレツイートを見てかなりワクワクしていたのですが，まさか instrument だとは思ってませんでした笑．ギター三人で弾かれると，歌ありとはまた違った優しい感情が溢れてきて，毎度泣きそうになりました．コーラスさんの手拍子，原曲と若干違ったような気がして(ﾀﾀﾝ，の位置)違和感があったのですが，おそらくクラップしやすいような配慮だったんだと思います．</p></li><li><p>cloud9<br>人気高いということも知ってたんですけど，機会がなかったので実はあまり聴いたことがなかったです．CD 買って勉強しないと…．</p></li><li><p>秘密<br>地味に聴きたかった一曲なので，今回聴けてよかったです．サビの緑色のライトの演出が印象的でした．</p></li><li><p>序曲<br>LEDライト登場．曲とマッチしていてよかったです．この曲はまだ自分には早すぎると思う．10年，20年後に聴いたら，きっとまた違った感情になるんだと思います．</p></li><li><p>宇宙の記憶<br>ここでも LED ライト．MV を意識したものだと思われますね．周期を微妙にずらした振り子を同時に振ると面白い→<a href="https://www.youtube.com/watch?v=gViLqrT6UUU&t=46s">（動画）</a>のですがそれを思い浮かべていました笑．最後のダーンで動きがスローになる演出がカッコよかった．原曲と違ってペットの部分などがギターに置き換えられており賛否両論あるみたいですが僕はギターの音も良かったと思います．</p></li><li><p>Buddy<br>坂本真綾を聴き始めた時によく聴いていて，最近あまり聴いてなかった一曲です．まさかここにきてライブで聴けるとは…．やっぱりかっこいい曲ですね．</p></li><li><p>ソラヲミロ<br>ライブで化けた曲その2．最初に行った FMUP 国際フォーラムで聴いた色彩が原曲に比べて強すぎて印象深かったのですが，今回はこの曲が原曲に比べてライブだとこんなに力強いのかと気付かされました．「それが僕の全て」の歌い方が本当に命を削るものだったと思います．聴いていて自然と涙が出ました．</p></li><li><p>青い瞳（12&#x2F;31）<br>あまり聴かない曲でした．すみません笑．メロディラインとかかなり好みだと思うんですけど，こういうあまり聴けてない曲がまだまだ存在します．</p></li><li><p>ともだち（12&#x2F;31）<br>こちらもたまにしか聴きません．英語版を機会があったらライブで聴いてみたいものですね．</p></li><li><p>逆光<br>相変わらずどんなテンションで聴けばいいのかわからないｗ．とりあえず左右に揺れるくらいしかできないっす．</p></li><li><p>マジックナンバー<br>年越し曲としておなじみだそうで．去年のスタンディングで聴いてたし，慣れたなあと思ってましたが，とにかく年越しの MC が最高でした．あれだけテンションが高い真綾さんというのも初めて見ました．こちらもテンションが上がりすぎて，ほとんど記憶がないです．「二階席ーーーッッッ！！」って叫んでるのになぜか一階席の我々が反応してたとか笑．</p></li><li><p>光あれ<br>ライブ前はいよいよこれが聴けるとワクワクしていたんですけど，初日は Hidden Notes が良すぎてあまり感動しませんでした笑．逆に27日はこの曲で泣きました．改めて語るまでもない名曲だと思います．</p></li><li><p>今日だけの音楽<br>豆腐に入ってく演出が面白かったですｗ．最後豆腐が回転するタイミングが26日と27日で違ったような気がして(たぶんそんなことはないです)，27日は全然回転しないもんだから，（あれ，もしかして演出バグったか？）と内心ハラハラしてしまいました．最後の，また一歩踏み出すような予感をもつメロディで締めるのはとても良かったです．</p></li></ol><p>En.1. ことみち（12&#x2F;26）<br>そもそもトラインアングラーをあまり聴かないのでカップリングのこっちもあまり聴いてなかったです．が，歌詞みるとすげぇいい曲だなこれ…．</p><p>En.2. アルカロイド（12&#x2F;27）<br>これは大当たりでした．最初のラララを歌えたりしたのがすごい良かったです．花瓶とかの Lucy 曲もライブで聴きたいものです．</p><p>En.3. A HAPPY NEW YEAR（12&#x2F;31）<br>新年はやはりこれを聴かないとダメだと思います．</p><p>En.4. ポケットを空にして（12&#x2F;26, 27）<br>自分は ALL CLEAR のダブルアンコールは聴けなかったので，4年ぶりに聴けました．26日も27日も最初からみんなちゃんと歌ってて感動しました（4年前はフラれたとこしか歌ってなかった印象）．</p><p>En.5. シンガーソングライター（12&#x2F;31）<br>大晦日もポケ空なんだろうなと思ってたんですけどもこっちでした．もうすっかり定番ですね．</p><h3 id="立って聴くか座って聴くか問題"><a href="#立って聴くか座って聴くか問題" class="headerlink" title="立って聴くか座って聴くか問題"></a>立って聴くか座って聴くか問題</h3><p>話は全然変わるんですが，ライブでどうするかというのが今回も一部で話題になりました．僕個人としては，現状ではどんな意見が出てきてもしょうがないと考えています．周りの人間を考えろ，自由にやらせろ，どちらの意見を肯定することも否定することもできないです．運営側がルールを設定するか，座席や参加スタイルによって価格を変えるか（こちらはかなり非現実的だと考えます）しない限り，万人が納得するライブは永遠に不可能だと思っています．一番簡単なのはレギュレーションをきちんと定めることです．「私のライブなんだからこうだ，新参もわかるでしょ？」という姿勢で仮にあったとするなら，保守的で良いとは思えず，残念なことだと思います．本人が気にしてないのならそれで良いのかもしれませんが，観客側では同様の問題は今後起こり続けるでしょう．</p><h3 id="人について"><a href="#人について" class="headerlink" title="人について"></a>人について</h3><p>今回も色々な人に会うことが出来ました．はじめましての方や，4年前からの知り合い，今年群馬でお世話になった方々など，ご挨拶させていただいた方，ありがとうございました．2日目に倒れてしまった方を介抱された知り合いなど，あらためて真綾ファンのあたたかさに触れることができた3日間でした．ファン全員が良い人だと断言はできませんが，少なくとも僕の周りには良い人がたくさんで嬉しいです．<br>今回金欠だったのもあり，お会いした方には安く済む（おい）名刺を渡させていただきました．覚えていただければ幸いです笑．本年もまたどこかでお会いしましょう．</p>]]></content>
      
      
      <categories>
          
          <category> 坂本真綾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 坂本真綾 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2019年9月 富士宮口五合目（星ナビ入選）</title>
      <link href="/2019/12/05/00000027-2019-09-26-fuji5th/"/>
      <url>/2019/12/05/00000027-2019-09-26-fuji5th/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．今回は9月に行った五合目への遠征と，撮影したものについて簡単に書いておきます．</p><span id="more"></span><h3 id="大学から五合目へ"><a href="#大学から五合目へ" class="headerlink" title="大学から五合目へ"></a>大学から五合目へ</h3><p>その日は平日だったので車で大学に行き，夕方まであったゼミを終えてから後輩3人を連れて五合目へ出発しました．直接東名には乗らず，第三京浜から東名へ行くルートを選択しましたが渋滞もあったので結果は微妙．もしかしたら直接東名を走ったほうが早かったかも…．海老名SAで夕飯を済ませ，途中コンビニに寄りつつ五合目へ直行しました．<br>当日の天気はあまり良い予報ではなく，下層にのみ雲が出現することを期待して五合目へ行ったわけですが，道中は霧も出ておらず，「うーん，コレは今日はダメかもしれんねえ」などと後輩と話しておりました．にしても五合目までには鹿が多いですね．天城より多いんじゃないでしょうか？<br>到着してみると，「あれ？少し晴れてる」<br>後輩らはすぐに機材の展開をはじめましたが自分は特にやる気もなかったのでしばらく車中でぬくぬく．<br>日付が変わって0時くらいになってみると，「あれ？めっちゃ晴れてね？」「誰だよダメかもしれんとか言ったヤツ」<br>南は御殿場の明かりで厳しいのはともかく，北の高いところがものすごい．もしかしたら山梨側は低層に雲があったのかもしれません．自分もやる気が出てきたのですぐに機材を展開して撮影開始．<br>その後は北には雲もなく，4時間弱露光できまして，先日星ナビに投げたところ2020年1月号に掲載されました．</p><h3 id="掲載作品"><a href="#掲載作品" class="headerlink" title="掲載作品"></a>掲載作品</h3><p>掲載されたのは以下の写真になります．</p><p><img src="/images/00000027-2019-09-26-fuji5th/work_1.jpg" alt="Beloved, Pacman"></p><div style="text-align: center;">”Beloved, Pacman”2019年9月27日 午前0時27分 静岡県富士宮口五合目にてSIGMA 135mm F1.8 DG HSM Art (F2.8)Canon EOS 6DISO 2000 / 240s \* 55 + 210s \* 2 = 227 minタカハシ EM-11 Temma2Jr. ノータッチガイドステライメージ8 / Adobe Lightroom CC / Photoshop CC月刊 星ナビ2020年1月号 掲載<br></div><p>編集過程でのヒストグラムも載せてみます．<br><img src="/images/00000027-2019-09-26-fuji5th/histogram.jpg" alt="ヒストグラム"><br>滑らかでいい感じでは？これを見て，今回はイケる！と思いました．</p><p>星ナビには「みんな大好き」と書きましたが，”Beloved” にはどちらかというと「愛しの」という意味を込めました．雑誌コメントに「愛しの」と書くのはちょっと恥ずかしいので，「みんな大好き」と言葉を濁したわけです笑．パックマンも好きですが，天の川の中をさっとハケで掃いたような暗黒帯がとても美しく，気に入っています．<br>私の作品の下には<a href="https://nakacyg.com/">nakacyg 氏</a>の<a href="https://www.astrobin.com/mp5xvr/?nc=user">渾身の40mm作品</a>が掲載されています．私が本作品を撮ろうと思ったのは，この作品の天の川からそうでないところ（アンドロメダ方向）へ向かうグラデーションがとても美しいと思ったことがきっかけなので，星ナビさんには私の意を汲んでくれてありがたい限りです．「構図が斬新」とのコメントも頂きました，ありがとうございます（確かに135mmではあまり見ない構図ですね）．AstroBinでIOTDをとった作品と並べられてとても光栄であり恐れ多くもありますが，私の作品の荒が目立ってしまってなんとも恥ずかしい気持ちもあります(汗)．</p><p>遠征はその後，何事もなくささっと帰りました！明け方，車内で爆睡していたところスターベースの某S店員（私の先輩です．たまたま？五合目に来ていたっぽい．）にいきなり窓を叩かれ、「やぁ！」と声をかけられました．心臓が止まりました．とても驚きましたが，会えて嬉しかったです．</p><h3 id="後輩ちゃんも入選"><a href="#後輩ちゃんも入選" class="headerlink" title="後輩ちゃんも入選"></a>後輩ちゃんも入選</h3><p>もう一つ，嬉しいことが．昨年五合目に行った際，サークルの<a href="https://twitter.com/hahe_0131">後輩ちゃん</a>に自分のカメラ以外の機材を丸投げしてオリオン周辺を撮らせてあげたのですが，その作品が見事天文ガイド2020年1月号に掲載されました！正直自分の作品よりもこっちのほうが嬉しい．彼女とは誕生日が1月同日という関係もあり，見事誕生月号にダブル入選を果たしたということになりますね．今年でサークル（天文研究会）を引退するので，お疲れ様の意も込めて，良い餞になったのではないでしょうか．本人の許可を頂いて，以下に作品を掲載させていただきます．</p><p><img src="/images/00000027-2019-09-26-fuji5th/work_2.jpg" alt="冬の主役"></p><div style="text-align: center;">”冬の主役”taken by <a href="https://twitter.com/hahe_0131">はへろろ</a>2018年10月7日 午前1時55分 静岡県富士宮口五合目にてSIGMA 135mm F1.8 DG HSM Art (F2.5)Canon EOS Kiss X9ISO 800 / WB Auto / 180s * 31 = 93 minタカハシ EM-11 Temma2Jr. ノータッチガイドステライメージ8 / Adobe Lightroom CC / Photoshop CC月刊 天文ガイド2020年1月号 掲載<br></div><p>大学の学園祭では出展のための選考に漏れてしまった作品だったので，日の目を見られて良かったですね．</p><p>さて，支離滅裂な内容になってしまいましたが，なんだかんだで今年は天文雑誌には写真を4回ほど（3回だったかも？落ちたことは記憶から抹消しているので，よく覚えていません）送って，2回掲載されました．来年以降もまあこんな感じで，天体写真は無理なくのんびりやっていきたいなと思います．<br>年明けには念願の「アレ」も買う予定です．お楽しみに．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【坂本真綾】今日だけの音楽を聴いて</title>
      <link href="/2019/11/28/00000026-music-for-today-only/"/>
      <url>/2019/11/28/00000026-music-for-today-only/</url>
      
        <content type="html"><![CDATA[<p>坂本真綾10枚目のアルバム「今日だけの音楽」が届いて，<a href="https://natalie.mu/music/pp/maaya11">今日だけの音楽を集める旅</a>，<a href="https://realsound.jp/2019/11/post-451617.html">坂本真綾が体現した“時間芸術”と“一回性の芸術”　最新作『今日だけの音楽』を聴いて</a>を読んだので，感じたことを書き留めておく．</p><span id="more"></span><h3 id="今日だけの音楽-～一回性～"><a href="#今日だけの音楽-～一回性～" class="headerlink" title="今日だけの音楽 ～一回性～"></a>今日だけの音楽 ～一回性～</h3><p>人の多くは夜，眠りにつき，そして夢を見る．そして，朝日とともに目覚める．一日がはじまる．</p><p>このアルバムは，夢の中で聴く音楽～誰も知らないところから生まれる音楽～をテーマにしたものだ．既発表曲を一切入れないアルバムは「少年アリス」以来16年ぶりらしい．「少年アリス」発売時は私はファンではなかったので，イマイチピンとはこない．歌詞カードに付属のブックレットを読み，順番通りに聴く，というのが彼女の推奨する聴き方だそうなので，素直にこれに従った．<br>ブックレットを読んですぐ，「これはメッセージアルバムだな」と思った．彼女はこれまで「コンセプトアルバム」というものを何枚か出していて，夜だったり冬だったりといったものをテーマにしていた．他にも，メッセージ性のある曲はいくらでもあった．だが，今回は違った．アルバムが，明確なメッセージを含んで作られていた．まどろみに落ちていくような「はじまり」にはじまり，そしてすぐ，”Hidden Notes” において「メッセージ」が打ち出される．その内容は，すでに<a href="https://natalie.mu/music/pp/maaya11">ここ</a>で彼女が解答を述べている．</p><blockquote><p>本当に核となるテーマについて歌っているのは「Hidden Notes」だけで。過去に戻りたいというお願いや、永遠に続くものを欲しいと思う、今じゃない時間軸を望む人に「今生きているこの瞬間にも目を向けてみようよ」と歌っている歌</p></blockquote><p>このアルバムでは「<a href="https://realsound.jp/2019/11/post-451617.html">一回性</a>」が中心的な役割を担っていることがわかる．一瞬，一瞬．今，今．これらは，最近の彼女の楽曲において繰り返し出てくるテーマだ．</p><blockquote><p>自信がなくてもはじめるんだ　いつかじゃなくて今<br>– CLEAR –</p></blockquote><blockquote><p>今，今が生まれて<br>今，今が終わる<br>今　今　今を積み上げる　今<br>– 序曲 –</p></blockquote><p>さて，アルバムに話を戻す．あいにく私は音楽の専門家でもなんでもないので，各楽曲の中身に色々踏み込むのは他の方にお任せする．ここから始まるのは，「夢の中で出会った人が思い思いに聴かせてくれる楽曲」だ．坂本真綾本人が関わったものもあるが，基本的に多様なアーティストによる多様な音楽が紡がれる．そこにはあまり彼女の良さを引き出すものはあっても，「シンガーソングライター」で見えるようなものはあまり感じない．それもそのはず，なぜならこれは「夢の中で出会った人が思い思いに聴かせてくれる楽曲」だからだ．夢の中では突拍子もない事が起こる．自分の脳みそで見る夢だが，そこに自分らしさは欠片ほどもないことと一緒だ．<br>これらの楽曲の中に，一回性は見られるだろうか．</p><blockquote><p>永遠なんてない　一瞬だって無い<br>–ホーキングの空に–</p></blockquote><blockquote><p>昨日はあったし Today は今 &#x2F; 今日が終わるまでは<br>– ユーランゴブレット –</p></blockquote><blockquote><p>ただ一度きりのあなたの人生に<br>– お望み通り –</p></blockquote><blockquote><p>たった一度ほんとの愛に触れたくて<br>– オールドファッション –</p></blockquote><p>ちゃんとある．”Hidden Notes” でどかんと出されたメッセージがここに生きている．ところが曲を追っていくとどうだろうか．この一回性のさらに根本的なもの，周りにあるものがじわりじわりと浮かび上がってくる．<br>人のすべては無限の時間の中の有限の生を生きている．今日という「スパン」を生きる．</p><p>そう，「時間」だ．</p><h3 id="今日だけの音楽-～時間性～"><a href="#今日だけの音楽-～時間性～" class="headerlink" title="今日だけの音楽 ～時間性～"></a>今日だけの音楽 ～時間性～</h3><p>一回性を強調したが，このアルバムはそれだけではないように感じる．一回性を一回性たらしめる「時間」というものから目を背けることは決してない．一瞬一瞬，今は「戻ってこない」，不可逆なものであって，なぜならそれは不可逆な時間の中を一方向に，一瞬ではなく連続的に，流れ続けるものだからだ．時間とは時に残酷なものである．時間が解決してくれる問題もあったりするが，そうでないものも多い．そして，最終的に突き詰めていくと時間は，人を究極的に不可逆的なもの，「死」へと追いやる．</p><blockquote><p>人はひとり　ひとり　ひとり違っていても<br>最後に行き着く場所は同じでしょう<br>何を抱いて　抱いて　抱いて生きても<br>それは置いていく約束<br>– 序曲 –</p></blockquote><p>このアルバムでも，時間の不可逆性を描くことに妥協は全くない．</p><blockquote><p>「さよなら」は<br>僕を戻す　火曜日に<br>想い出が　降り積もってく丘へ<br>– 火曜日 –</p></blockquote><blockquote><p>一か八かオンボロロケットに飛び乗って<br>– トロイメライ –</p></blockquote><blockquote><p>季節と誰かを跨ぐ度　少しずつの負を請け負いすぎた &#x2F; 明日のあなたの役目はないけど　それもわかって<br>– 細やかに蓋をして –</p></blockquote><p>しかし，時間はそんな無慈悲なものであるだけでありえるだろうか．<br>不可逆なものの中に，人が作り出した，戻ってくるものがある．日常，つまり惑星の周期運動によってもたらされるところの「今日」だ．</p><blockquote><p>細胞分裂を　前進と後退を　延々と繰り返して　永遠を蹴散らして行け<br>– トロイメライ –</p></blockquote><blockquote><p>変わってゆくんだよね　同じ毎日　繰り返しながら<br>– ディーゼル –</p></blockquote><p>あえて後半の曲ばかりを挙げたが，前半の曲にも時間についての歌詞はチラホラと見受けられる．<br>つまりは，楽曲を時間性という断面で見たとき，人間の，無限の時間の中で有限の時を，有限の周期を設定してぐるぐる回りながら生きている，生活している，営んでいる，という面が見えてくる．<br>そこから，ラストナンバー，「今日だけの音楽」につながる．つまり，彼女は，前述した人間の性質の中から，「営み」を掬い上げ，救い上げるのだ．</p><h3 id="「今日だけの音楽」はいつだって自分の中に"><a href="#「今日だけの音楽」はいつだって自分の中に" class="headerlink" title="「今日だけの音楽」はいつだって自分の中に"></a>「今日だけの音楽」はいつだって自分の中に</h3><p>「営み」が掬い上げられた時，人々は自分の中の日常を「想起」する．今日何時に起きて，何を食べ，電車の中で何があって，上司や後輩とどんな話をして．良かったこと，悪かったこと．嬉しかったこと，悲しかったこと．それらはすべて自分の中にあるものだ．そしてこの「想起」は，決して連続的なものではない．ふとしたとき，それこそこのアルバムを聴いてる時や，夢を見ている時にそれは起こる．</p><blockquote><p>私だけが知ってるメロディ　途切れても続いてるメロディ<br>– 今日だけの音楽 –</p></blockquote><p>坂本真綾にとって，「生きることは音楽」だ．<br>そして思い出してみると，何よりずっと，それは自由なことであった．</p><blockquote><p>こんなに自由な<br>こんなに確かな<br>僕がいるのに<br>– I.D. –</p></blockquote><blockquote><p>誰かに聞かせるためじゃなくて　イルカが泳ぐように自由に歌ったんだ<br>–今日だけの音楽 –</p></blockquote><p>「営み」が「想起」され掬われた時，彼女は救われたのかもしれない．そして，きっと自分の歌で人々も救われたら，と思っているのかもしれない．</p><p>人々が「想起」する時，それらは既に終わっていることも重要なポイントだ．そして，新たな「営み」が否応無しに始まっている．「想起」と「営み」を，並列にする，フォローアップことは，夢を見ながら生きることは，残念ながら人間には決してできない．</p><blockquote><p>抱きしめたら消えちゃうメロディ　さよならから始まるメロディ　こぼれてく<br>– 今日だけの音楽 –</p></blockquote><p>このように考えてみると，「今日だけの音楽」とは，一回性，そしてその根本にある時間性の中から浮かび上がってくる人間という生き物が毎日当たり前のように行う「営み」の切なさを，尊さを，夢という誰もが見る現象に絡めて描写し，本質的なメッセージとしたものであると感じる．そしてこれは我々にハッキリと向けられたものであるのと同時に，”I.D.” から続く彼女の「営み」の大きな「想起」なのかもしれない．<br>私は，坂本真綾が「もう死んでもいい」などと発言した理由を，少し理解したような気がする．</p><h3 id="私にとって，「今日だけの音楽」とは？"><a href="#私にとって，「今日だけの音楽」とは？" class="headerlink" title="私にとって，「今日だけの音楽」とは？"></a>私にとって，「今日だけの音楽」とは？</h3><p>余談だが，私は夜，時々あえて眠りにつかないことがある．天体観測をするとき．星の下で，明かりをすべて消して，地べたに寝転がり，自然と一体になる．夢は見ないが，確かに気分は夢見心地だ．<br>人々は私をロマンチストだと言う．だが自分はそうは思わない．私は星を眺める時にこそ，究極の孤独を感じ，「今，現実」をまっすぐ「生」きていることを感じ，そしてこれまでの「営み」を「想起」する．なので，私はこのアルバムに勝手な解釈ながら深く共感することができた．星空はいつ見ても同じという人がいるが，全くそんなことはない．自然はいつだって動的で，一晩だって同じ空が見られることはないのだ．<br>「今日だけの音楽」では，「営み」に帰る，夢から覚めることを夜明けで表現する．</p><blockquote><p>振り返ると朝日が照らしていた。　私の夢は終わる。　そしてまた，今日だけの音楽を忘れてしまうだろう。<br>– 「今日だけの音楽」ブックレットより –　</p></blockquote><blockquote><p>もうすぐ夢から醒める<br>夜明けが明日を連れてくる<br>二度と会えない今日のワタシ<br>抱き合ってさよなら<br>– 今日だけの音楽 –</p></blockquote><p>天体観測をしていても，夜明けは否応無しにやってくる．我々は「想起」をやめ，「営み」に帰るのだ．そして，「誰も知らない，今日だけの一日」が始まる．</p><blockquote><p>「どんな音楽だって、誰も知らないところから生まれ出るのよ」<br>– 「今日だけの音楽」ブックレットより –　</p></blockquote><p>さあ，</p><blockquote><p>歌え　今日だけの音楽を</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2019年11月 富士宮口五合目（初ストロボ星景）</title>
      <link href="/2019/11/03/00000025-2019-11-fuji5th/"/>
      <url>/2019/11/03/00000025-2019-11-fuji5th/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．先日の11月2日から3日にかけてサークルの後輩と富士宮口五合目に行ったので，その遠征記を早速記しておきたいと思います．<br>今回は初めてストロボを使った星景写真にもチャレンジしてみました．</p><span id="more"></span><h3 id="富士宮口五合目へ"><a href="#富士宮口五合目へ" class="headerlink" title="富士宮口五合目へ"></a>富士宮口五合目へ</h3><p>本来この日は予報もダメダメだったので，戦場ヶ原へ行って紅葉でも見ようかという話をしていたのですが，<a href="https://twitter.com/AstronomyPisuke">ピースケさん</a>の以下のツイートを見て，急遽判断を変更．</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/AstronomyPisuke/status/1190556453146247168"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>まだ首都高に乗る手前だったので，東名方向に舵を切りました．東名に入る手前，三軒茶屋あたりまでは渋滞していましたが，なんとか抜け，海老名SAで夕飯と好例の鴨肉（海老名SA下りの屋台に鴨肉ロースを売っているお店があるんですがこれが最高にうまい）を食べ，御殿場で下りてコンビニに寄り，五合目へ向かいました．途中，大井松田～御殿場の左ルートが工事で封鎖されていたため渋滞していましたが，それ以外はある程度スムーズに行くことができました．この工事は12月20日頃まで続く予定なので，注意すべきですね．</p><h3 id="ストロボ星景にチャレンジ"><a href="#ストロボ星景にチャレンジ" class="headerlink" title="ストロボ星景にチャレンジ"></a>ストロボ星景にチャレンジ</h3><p>到着してみると，予報は高層雲だらけでダメダメだったにも関わらず星が見えるではありませんか！</p><p><img src="/images/00000025-2019-11-fuji5th/01.jpg" alt="到着した時にはオリオンが登っていました"></p><p>薄雲は出ていたので今回は直焦はせず，眺めたり星景写真を撮って遊ぶことに．気温は2℃くらいで，風も出ていたのでめちゃくちゃ寒いです．すぐに防寒をして，カメラの準備をしました．<br>後輩の<a href="https://twitter.com/yoshito4441">りかじん</a>がストロボを持ってきていたので，なるべく人の少ないところを選んでコレを借りて写真を撮影することにしました．<br>天体写真を撮る人には，「明るい光を発する」ということで車のライト同様あまり好ましく思われないかもしれないストロボですが，うまく使えば色々と面白い表現ができます．ストロボを使わない場合，星景写真は数十秒の露光だけで光を集めることになります．そのため人のいる地上景は黒く落ちやすく，その細かい表情などを判別することは難しいです．また，面白いポーズをキメたい時は数十秒間静止する力が求められます．新星景写真を撮るような場合では，ストロボを使わない場合は地上景が暗いので，なるべく高感度で枚数を撮るため撮影時間がとられてしまいます．これを一気に解決するのがストロボです．<br>百聞は一見にしかずなので，色々と作例を載せていきます．<br><br><br><br></p><p><img src="/images/00000025-2019-11-fuji5th/02.jpg" alt="到着した時に撮影"><br>到着した時にテストで撮影したものです．この時にはもう雲がかなり出始めていたので，星はあまり見えませんが，地上の人物や景色はストロボの効果で明るく詳細に描写できていることがわかります．<br><br><br><br></p><p><img src="/images/00000025-2019-11-fuji5th/03.jpg" alt="アンダーめで下界を臨む"><br>薄雲の下に広がる街を眺めているところです．先程よりは少し暗めですが，これもストロボを使っています．<br><br><br><br></p><p><img src="/images/00000025-2019-11-fuji5th/04.jpg" alt="秋の空を眺める"><br>一枚目と似たような構図で，秋の夜空を眺めます．地上にいる人物もそうですが，秋の天の川やアンドロメダ銀河もしっかりと写っていることがわかります．<br><br><br><br></p><p><img src="/images/00000025-2019-11-fuji5th/05.jpg" alt="失敗例1"><br>三脚を使った面白い失敗例．上下を固定するネジがレンズの重さに耐えられず緩んでゆっくりと下に落ち，まるでを星を流して撮ったようになっていますね．背景に少しおかしなところはありますが，地上の人間は割としっかり写っています．「30分間このポーズで座ってたんですよ～ｗ」などとぬかしても一瞬信じてもらえそうです．<br><br><br><br></p><p><img src="/images/00000025-2019-11-fuji5th/06.jpg" alt="雲間を指差す"><br>先ほどと同じ場所で．星が見えたぞ！ということで雲の上を指差しているところです．<br><br><br><br></p><p><img src="/images/00000025-2019-11-fuji5th/07.jpg" alt="ジャンプ"><br>極めつけはこのジャンプ．星が見えた喜びを全力で体現した一枚です．数十秒間，空中に浮いていたわけではないですよ？無線ボタンでストロボを発光させるのが確実ですが，今回はそれができなかったのでストップウォッチを使ってタイミングを測っていっせーの！で飛んでいます．何度も失敗しました．右側で一番飛べてないのが僕です笑．<br><br><br><br></p><p><img src="/images/00000025-2019-11-fuji5th/08.jpg" alt="失敗例2"><br>こちらは何度もした失敗の中で生まれた一枚．最初からカメラの前に棒立ちしていたので，まるで幽体離脱したようになっています．ちょっと怖い．<br><br><br><br></p><p>いかがでしょうか．目で見た暗さをそのまま表現するという意味では，ストロボはオススメできませんが，ポートレートと同様人物の表情や一瞬の躍動感，喜びなどを生みたい時は，使ってみると面白い表現ができるんだなあとわかりました．</p><p>以下にストロボを使うメリット，デメリットをまとめてみます．</p><h4 id="ストロボを使うメリット"><a href="#ストロボを使うメリット" class="headerlink" title="ストロボを使うメリット"></a>ストロボを使うメリット</h4><ul><li>人物の表情などが詳細に表現できるため，当時の感情が伝わりやすい．</li><li>通常の写真と同様一瞬を切り取ることができるので，躍動感のある写真を撮ることができる．</li><li>シャッターを開けっぱにする数十秒間の間の静止力は必要ない．</li><li>新星景写真を撮る際，そこまで地上景を高感度で撮る必要がない．一発撮りでも十分耐えられるのではないかと思う．</li></ul><h4 id="ストロボを使うデメリット"><a href="#ストロボを使うデメリット" class="headerlink" title="ストロボを使うデメリット"></a>ストロボを使うデメリット</h4><ul><li>一瞬でも明るい光を発するので（それでも車のヘッドライトに比べればずっとマシだと思う），周りに撮影をしている人がいる場合はできない．避けるべき．</li><li>被写体がストロボの方を向いている場合，暗順応が一瞬にして破壊されるので，観望中である場合は特に注意．本当に眩しい．</li><li>その場の「暗さ」が伝わらない．</li><li>地上景もある程度明るく写るため，編集段階（二値マスクなど）で星空との分離がやりにくいかもしれない．</li></ul><p>こんなところでしょうか？とにかく，用法用量を守れば，うまいこと面白い写真を撮ることができます．ストロボを使ってアマチュアで撮っている方はあまり見かけないので，皆さんもチャレンジしてみてはいかがでしょうか？</p><h3 id="余談（トイレについて）"><a href="#余談（トイレについて）" class="headerlink" title="余談（トイレについて）"></a>余談（トイレについて）</h3><p>富士宮口五合目はたしかにダメダメ予報でしたが，Windyは3時頃に高層雲が消えるチャンスがあることを告げていたので，この時には星を眺めたいねぇという話をしていました．<br>富士宮口五合目には山道を100mほど進んだところを含めてトイレが三箇所あります．観望中，後輩の女性陣がトイレに行き，男二人は湯を沸かしてうどんを食らっていたのですが，なんと女性陣二人が絶望的な顔をして帰ってきました．</p><p>「トイレ全部閉まってる…」</p><p>二時半のことでした．<br>普通に僕らもトイレに行きたかったのですぐに撤収し，山を下り始めました．このままでは3時の晴れに間に合わない！<br>すると捨てる神あれば拾う神あり．山道を9km弱下ったところに公衆トイレがあるではありませんか．開いてるか確認してみると，身体障害者用のトイレだけが使用でき，水もちゃんと使えたのでありがたく使わさせてもらいました．管理人の方の慈悲なのでしょうか，とてもありがたかったです．<br>山道を急いで駆け上がり，3時ギリギリに到着．先程の秋の夜空を眺めている場面は，実はトイレから帰ってきたあとだったりします笑．</p><h3 id="朝霧→精進湖→温泉からの帰還"><a href="#朝霧→精進湖→温泉からの帰還" class="headerlink" title="朝霧→精進湖→温泉からの帰還"></a>朝霧→精進湖→温泉からの帰還</h3><p>一通り遊んでから，明け方までは朝霧高原までのんびり下って過ごすことにしました．というのも，他のサークルの後輩は朝霧にいるようだったのです．が，早めにほったらかし温泉の方面に向かってしまったようで会うことはかないませんでした．残念．<br>9時頃まで朝霧高原で仮眠をとり，精進湖で記念撮影．この日は波がそれなりに穏やかで，鏡富士っぽいものを見ることができました．</p><p><img src="/images/00000025-2019-11-fuji5th/09.jpg" alt="精進湖にて"></p><p>その後，近場の<a href="https://www.fuji-yurari.jp/">富士眺望の湯ゆらり</a>さんで温泉に入って，帰りました．ここはとても人気が高いようで，自分らが出発した11時頃には駐車場はほとんどいっぱいになっていました．1500円なので学生には少し割高かもでしたが，たくさんの種類の温泉やサウナ，休憩所などがあり，良かったです．</p><p>今回，日産eシェアモビを使ってセレナを借りたのですが，四人で行ったにも関わらず費用は一人5000円を切るくらいになりまして，それもとても良かったですね（おそらくトヨタレンタカーなどで同クラスのボクシーなどを借りると倍ほどかかります）．</p><p>今回は，トイレのドタバタやストロボ星景を含めコンテンツ性がとても高く，久々に「仲間と行く観測旅行」を全力で楽しんだ感じがしました．<br>サークルを引退して思うのは，一緒にこうしてふらっと星見旅行に行ってくれる仲間がいるのはとても貴重で，仲間がいることで，一回ごとの遠征の思い出の質が自分の中で高くなるな，と思うのです．今回来てくれた女性二人は寒いのがとても苦手なので，暖かくなったらまた行こうと言って解散しました．また春に行けるといいな．</p><p>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面分光研究会2019で発表してきました</title>
      <link href="/2019/11/01/00000024-ifu-2019-report/"/>
      <url>/2019/11/01/00000024-ifu-2019-report/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．<br><a href="https://dabokun.github.io/2019/09/24/00000020-ifu-2019/">先日の投稿</a>にも書きました通り，国立天文台で行われた面分光研究会という研究会で，招待講演者の一人として発表してきました．<br>今年は3月の天文学会年会にも参加したのですが，今回の研究会は発表の時間制約が緩かったり（本当は守ったほうがいいんですが，そのため実機で時間をかけて開発ソフトのデモをすることができました），人がそこまで多くないので蜜な議論ができる環境があったり，同年代の天文学を専攻する優秀な学生がいたり，私の先輩や先生も発表したこともあって，かなりインパクトを与えることができたのではないかと思っています．発表では色々失敗もあり，反省すべき点は多々あったのですが，自分の研究を発信し，今後につなげていく大きな機会であったことは間違いないと思っています．自分の研究や研究室で開発している面分光可視化分析ソフトウェアに天文学者が興味をもっていただけるのはとてもありがたいこと（天文学者はそういうものに積極的に興味を持ってくれる方が多いです）ですね．</p><p>研究室内発表（プロポーザルの練習のようなもの）も一息ついたので，そろそろたまっている遠征記を消化しないとなあと考えています．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>オリオン座三ツ星付近</title>
      <link href="/2019/10/25/00000023-orion-work/"/>
      <url>/2019/10/25/00000023-orion-work/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．先日今年5回目か6回目の天城へ行ってきました．<br>最近は月末に国立天文台で発表や研究室内での発表を同時に控えているのもあっててんてこ舞いになり久々のブログ更新です．</p><p>今回は遠征記は書かず撮影した写真だけドンど紹介して終わりです．忙しいので．<br>遠征記は来月になったら書きます．</p><span id="more"></span><h3 id="三ツ星周辺"><a href="#三ツ星周辺" class="headerlink" title="三ツ星周辺"></a>三ツ星周辺</h3><p><a href="https://www.flickr.com/photos/138311056@N05/48929767581/in/dateposted-public/">flickr</a>にはこっそり載せてたりするのですが，その他で特にどこかに発表するアテもないかなあ，と思っていた作品なのでブログに載っけるにとどめておきます．</p><p><img src="/images/00000023-orion-work/work.jpg" alt="オリオン座三ツ星周辺"></p><div style="text-align: center;">”オリオン座三ツ星周辺”2019年10月5日 午前2時2分~ 静岡県伊豆市天城高原ゴルフコース にてFS-60CB + Reducer(255mm F4.2)Canon EOS 6DEM-11 Temma2 Jr. ノータッチガイドISO 4000 / 180 s * 54 (total 162 min)SI8 / Adobe Lightroom CC / Photoshop CC</div><p>今季初オリオンになります．FS60-CBとレデューサのセットはお仲間の<a href="https://twitter.com/ymd_astro">Y君</a>に借りました．代わりと言っちゃあなんですが僕は彼にSIGMA 135mmを貸しました．等価交換(？)ってやつです．台風一過でチラついていたのであまり期待はしていなかったんですが，いざ編集してみると意外とインパクトある感じになりました．いつもどおり，拡大すれば荒だらけって感じですね．多段露光も別にしていないので大星雲中心付近は飛ばしています．多段やるのはここをクローズアップしたい時でいいかな．<br>馬頭星雲の赤い部分もそうですが，その上の反射星雲（アルニラムやミンタカの光を受けてるのかな？）も僕は好きで，よく注目しながら編集しています．あと大星雲の下の複雑な分子雲もいいですよね．いつかガッツリいってみたいもんです…．<br>この日は研究室の先輩や，僕の所属する天文団体の方と一緒だったので書くことはいくつかありますが，その時のお話はまた．</p><p>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 天体写真 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2019年9月 浄土平</title>
      <link href="/2019/10/07/00000022-2019-09-jodo/"/>
      <url>/2019/10/07/00000022-2019-09-jodo/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．<br><a href="/2019/09/30/00000021-sigma-intern/">前回の記事</a>でSIGMA社の1Dayインターンへ行った話を書きましたが，今回はその後，浄土平まで羽根を伸ばしてみた話を書きます．</p><span id="more"></span><h3 id="浄土平へ"><a href="#浄土平へ" class="headerlink" title="浄土平へ"></a>浄土平へ</h3><p>インターンついでに普段は関東から遠くてなかなか行こうと思えない浄土平へ行けるな…と計画を練っていた頃，ちょうどインターンの日に学部時代サークルで夏に毎年宿泊していた宿に，サークル同期や先輩が泊まっていることが判明していたので，浄土平へまっすぐは向かわず，まずはその宿に行きました．車は会津若松まで行って借りました．宿に到着するとちょうど夕飯の時間だったので，自分もコンビニ買った夕飯を皆と食べていると，不意に豚汁を振る舞われました．ありがたすぎる．<br><img src="/images/00000022-2019-09-jodo/01.jpg" alt="豚汁，涙が出るうまさ"><br>宿でしばらく同期や先輩とナポレオン(トランプゲーム)をして，9:30頃に浄土平へ一人で出発．もともと天気は良くなかったのであまり期待はしていませんでしたが，とりあえず行くだけ行ってみることが目標です．夜に交通規制がしかれていない南側の道から行ったのですが，道は関東圏の観望地と比べて割と狭い場所が多いなあという印象でした．道中動物に会うかなとも思いましたが，裏磐梯で子狸のような生き物がいた以外には特に会いませんでした．もっと強そうな鹿とか出てくると思っていたのでちょっと残念(？)．<br>浄土平が近づいてくるとうっすらと硫化水素のにおいがして，ここがつい最近噴火警戒レベルが1に引き下げられたにすぎない地であることを思い出させます．<br>到着してみると，人っ子一人おらず．天気はほとんど曇りで低空に明るい星が1つか2つ見える程度．熊が出るかもしれないと聞いていたので少し心細かったですが，ラジオをかけながらトイレに行き，タイムラプスをしかけ，車で寝ました．朝までに何度か目を覚まして外を見ましたが晴れてる様子は全く無かったので，結局そのまま寝て過ごしたことになります笑．ちょくちょく寒いなと思ったので気温を見てみると外気温は9℃．さすがは東北の標高1600mといったところでしょうか．暖房をかけていないとジワリジワリと寒さが体を蝕みます．<br><img src="/images/00000022-2019-09-jodo/02.jpg" alt="外気温は9℃"></p><h3 id="ご来光と雲海"><a href="#ご来光と雲海" class="headerlink" title="ご来光と雲海"></a>ご来光と雲海</h3><p>ちょうど薄明が始まったころに再び目を覚ましました．すると来た時は誰もいなかった浄土平に結構な数の車がいます．夜の間も何度か人が出入りしていたのですが，その時より明らかに数が多いです．もしかしてご来光目当て？と思ってトイレまで行くついでに東側を眺めてみると，なんととてつもない雲海が広がっているではありませんか！<br>インターンまでの疲れも出ていたので少し迷いましたが，せっかくだからということでカメラを回収し，駐車場前にそびえる吾妻小富士に登ってご来光を眺めることにしました．この時2つミスを犯しました．まず，タイムラプスで消耗しきっているカメラのバッテリー交換を忘れました．雲海の写真は撮れましたが，ずっとバッテリー切れにヒヤヒヤしながらの登山でした．もう1つは，タイムラプス用のjpeg設定をRawに変え忘れていたことです．両方あるあるなので反省．道中はラジオをかけて，ゆっくり登っていきました．<br>吾妻小富士頂上まで30分ほどで登頂．着いてみると本当に美しい雲海が．自分のいる小富士のちょうど足元から雲が北と東に広がっていて，海にぽっかり浮かんでいる島にいる気分でした．雲間からご来光も見ることができたので，何枚か撮影して下山しました．自分はロクな登山装備ではなかったので，下山中に細かい石ばかりのところで滑って尻もちをつきました．小さい山ですが，頂上手前の傾斜がキツくあまりナメてはいけないなと思いました．<br>以下，小富士から撮影した写真です↓．</p><p>ご来光と雲海．本当に神々しかった．<br><img src="/images/00000022-2019-09-jodo/03.jpg" alt="ご来光"></p><p>天使の梯子．光のあたっているところの雲まで行ってみたいものですね．<br><img src="/images/00000022-2019-09-jodo/04.jpg" alt="天使の梯子"></p><p>足元の雲海．距離感が難しいですが下まで高低差100mくらいあると思います．<br><img src="/images/00000022-2019-09-jodo/05.jpg" alt="足元の雲海"></p><p>浄土平から北側へ伸びる道．遠くには蔵王の山々が．<br><img src="/images/00000022-2019-09-jodo/06.jpg" alt="雲海"></p><p>一切経山からの噴気．夜中からずっとボワァーという音がするので気になっていましたがこの音でした．<br><img src="/images/00000022-2019-09-jodo/07.jpg" alt="一切経山からの噴気"></p><p>小富士から駐車場，天文台を臨む．ありがとうございました．<br><img src="/images/00000022-2019-09-jodo/08.jpg" alt="浄土平"></p><p>それからは朝にもう一度宿に戻って挨拶をし，朝ごはんを食べて(なぜか僕の分が用意されていたのでいただいてしまった，至れり尽くせり…)会津若松まで戻りました．<br>車を返すまでの間このあたりに住んでいる坂本真綾ファンのフォロワーさんに会って話をしたり，富士の湯という会津若松駅前のスパでサ活をしたり，少し走ったところにある牛乳屋食堂さんでお昼を食べたりしました．基本一人旅でしたが，多くの人に会えて楽しい旅になりました．<br>会津は関東からは遠いですが，今回行けなかったところを含めまた来たいと思います．何より星空を拝めなかったので次回はちゃんと晴れを狙って行こうと思います．それでは！</p><p>最後にどん曇りタイムラプスを置いておきますｗ<br><img src="/images/00000022-2019-09-jodo/timelaps.gif" alt="タイムラプス"></p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SIGMAの1Dayインターンに行ってきました</title>
      <link href="/2019/09/30/00000021-sigma-intern/"/>
      <url>/2019/09/30/00000021-sigma-intern/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．先月SIGMA社の会津工場に行ってきました．当初はこの件をブログで書いていいものかと思いましたが，社員さんが「秘密事項に関わることでなければSNS等で発信してくれて構わない」とおっしゃっていたので感想をざっと書くことにしました．<br>また，同じ日に会津若松で車を借りて浄土平にも行っているのですがそれはまた別の記事にします．</p><span id="more"></span><h3 id="インターンへ"><a href="#インターンへ" class="headerlink" title="インターンへ"></a>インターンへ</h3><p>SIGMAの会津工場の最寄りは磐越西線の磐梯町駅です．自分は関東の人間なので会津方面は遠く，当初は車で行こうかと思っていましたが往復約720kmというのを見てビビって電車で行くことにしました笑<br>東京から東北新幹線1.5時間弱で郡山，郡山から磐越西線1時間で磐梯町に着きます．磐梯町駅からは会社のバスで工場へ．参加者は15人ほどだったと思いますが，自分だけ一泊するためアホみたいな大荷物でめちゃくちゃ恥ずかしかったです笑．工場まではバスで10分程度，当日は曇っていて磐梯山が見えず少し残念でした．<br>お昼頃に到着したので，会社説明を受ける間もなくとりあえずお昼ご飯になりました．工場スペースは普通に工場っぽい雰囲気でしたが，途中のオフィススペースや食堂はとても綺麗でした．メニューも普通に食堂のメニューって感じでした．食べ放題，ありがたし．自分は当然うどんをチョイス．それはそれとして，お昼の時間になるとどっと社員さんがやってくるのであの人数を捌く食堂のスタッフさんは大変だなと思ったり…。この場で他の参加者さんとも少しお話をしましたがやはり皆さん写真をやってらっしゃる方ばかりで，カメラを持っていないという人は一人もいませんでした．自分のように星をメインで撮ってる人は少なかったですが．</p><h3 id="レンズを分解？！"><a href="#レンズを分解？！" class="headerlink" title="レンズを分解？！"></a>レンズを分解？！</h3><p>そんなこんなで戻ってくると，机には1人1つの某SIGMA Artレンズと分解用のドライバや作業マットが置かれていました．簡単に会社説明を受けた後，次に目の前にあるレンズを分解してレンズの仕組みや機能を見てみようというプログラムになっていました．<br>最初はあのArtレンズを！？みたいな感じでかなりの背徳感に苛まれながら主にドライバを使ってレンズを分解していきました．最初に，一群の前玉がゴロッと取れました．<br>やってしまった…．<br>もう後戻りができないことを悟るとだんだんと楽しくなってきて，どこがAFMFを決めてるだとか，この群のレンズはこういう役割でこういう曲面をしてレンズの中でこういう動きをするだとか，この基盤はカメラとどう接続されていてどういうやりとりをするだとかいう説明を面白く聞きながら分解を進めていきました．<br>最終的にHSMの部分が見えるまで分解し，HSMってこういう仕組みなんですよーという説明を受け，絞り羽根を一旦バラしてから組み立てる作業をしました．この最後の絞り羽根を組み立てる作業が不器用な自分ではなかなか難しく，少し手間取りましたがなんとか完遂．今までレンズって漠然と高いもんだと思っていましたが，どれだけのパーツ，そして何より技術が組み込まれているかということをありありと知ることになりました．こりゃ高くて当然ですね！(また金銭感覚が狂う)</p><h3 id="工場見学"><a href="#工場見学" class="headerlink" title="工場見学"></a>工場見学</h3><p>レンズ分解と解説が一通り終わると工場見学へ．ここで見た企業秘密的なものは外部に漏らしたらまずいのですが，自分は企業秘密的なものがなにかよくわからなかったのであまり細かいことを述べるのは避けておきます．<br>ガラス素材からレンズを切り出し研磨する工程や，プラスチック部品を製作する工程，部品に文字を印字する工程，部品に必要な金型等を作成，管理する部分，レンズ評価のためにSIGMA社で作られたチャートなどを見ました．僕はソフトウェア寄りの人間なので，ガチのものづくり的なことはあまりよくわかりませんでしたが，工場という閉じた中でレンズやカメラに関わる様々なものを作ることができる能力を感じました．<br>工場見学から戻ってくると，先程バラしたレンズがほとんど社員さんの手によって元に戻っていて驚きました．こんな瞬時に組み上げられるのか…．<br>最後に質疑応答をして終了となりました．</p><h3 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h3><p>カメラメーカー系に潜るのは初めてだったので興味深く，普段使っている製品ということもあって楽しい一時でした．工場と言ってもガチガチの現場以外は綺麗で，個人的には働きやすそうな印象でした．<br>残念だったのは，工場であまり現場の部屋に入れない(もちろん入れるところもあります) &amp; 通路側に向いてる装置が少なく，実際にどういう装置なのかをまじまじ見ることができなかったこと，工場の中は色々な装置が動いていて説明の声が場所によっては届きにくかったこと，当日ソフトウェアをやっている人がいなかったのでその辺の話を聞くことができなかったことですね．質疑応答では画像処理や関係するソフトウェア開発について質問したのですが，ハード系の人しかおらず，もうちょっと具体的な答えが欲しかったなあと思います．<br>ネガティブポイントをつらつらと書いてしまいましたが，個人的にはかなり好印象でした．おそらくカメラをやっていてこのインターンを面白くないと思う人はいないと思います．社員さんも優しく，十数人のインターン生に対してたくさんのプロの方たちに来ていただいてとてもありがたかったですね．<br>そんなこんなで再びバスへ磐梯町駅へ．自分以外の全員が郡山へ帰っていく中自分だけ会津若松へ行き，このあと車を借りて浄土平へ行きました．その時の記事はまたいずれ．それでは！</p>]]></content>
      
      
      <categories>
          
          <category> 機材 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> カメラ </tag>
            
            <tag> 機材 </tag>
            
            <tag> レンズ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2019年8月 乗鞍岳</title>
      <link href="/2019/09/29/00000019-2019-08-30-norikura/"/>
      <url>/2019/09/29/00000019-2019-08-30-norikura/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>今年も行ってきました乗鞍．大学に入ってから毎年行き続けて，もう5回目になります．今回はその時のお話を少し書きます．</p><span id="more"></span><h3 id="病み上がり"><a href="#病み上がり" class="headerlink" title="病み上がり"></a>病み上がり</h3><p>日程は8月30日～9月1日だったのですが，なんと8月24日頃から体調を崩し，前々日まで39℃近い熱を出すという事態に．<br>夏風邪をひくということはそうそう無いのですが，よりにもよって毎年楽しみにしている乗鞍の直前にひいてしまって割と絶望しました．が，なんとか前日までに解熱剤なしで平熱まで戻したので参加しました．</p><h3 id="まさかのピンチ？"><a href="#まさかのピンチ？" class="headerlink" title="まさかのピンチ？"></a>まさかのピンチ？</h3><p>さて，去年から我々はバスを一台貸し切って畳平まで上がるようにしています．出発当日の天気は芳しくなく，これはいつものことだったのですが，松本手前のPAで，何やら乗鞍エコーラインという，畳平までの道が時間で封鎖される可能性があるという不穏情報が舞い込んできました．<br>話を聞いてみると，どうやらエコーラインの天気は今いる場所よりも相当悪いようで，危険なので畳平発の最終便で封鎖されるとのこと．我々のバスはちょうど間に合うか間に合わないかというタイミングだったので，ここで運転手さん，めちゃくちゃ飛ばします笑<br>エコーラインの山道を，観光バスは40～60km&#x2F;h(これは流石に盛りすぎ？)ほどのスピードでぐんぐん上がっていきます．勾配のきついカーブはエンストしないように一速全開．前後左右上下にぐわんぐわん揺られます．病み上がりで後方の座席に座っていた私．完全に酔いました．<br>到着してみると畳平は本当に濃霧の土砂降り．荷物運ぶ作業をするわけですが気分の悪い私は軽めの機材だけ運びました．<br>そんなこんなで一日目は全く晴れる気配もなく，宿でひたすらゴキブリポーカーをやっていましたとさ．ゴキブリポーカー，有名なボードゲームですがこの時初めてやってハマりました．こういうルールがシンプルなゲーム好きですね．</p><h3 id="晴れ間"><a href="#晴れ間" class="headerlink" title="晴れ間"></a>晴れ間</h3><p>2泊目の昼間は気持ちよく晴れたので，機材を出しに行ったり，病み上がりで無理はせず宿の周りを散歩したり．今年はライチョウに会えなかったのが少し残念でした．<br>夜になると結局また曇りだしたので，ちょくちょく見に出たりを繰り返しているとそれなりの晴れ間に遭遇．眼視用のR200SSを展開し，普段は観測に来ないフォロワーさんに見せたりしていました．<br>曇ったのでまた宿に戻り，また少し見えたり曇ったりを1,2時間ほど繰り返していると，再び30分ほどの晴れ間に遭遇．機材を展開している場所まで移動するのは時間がもったいないと思い，宿の前でしばらく眺めていました．<br>自分はカメラをその時機材置き場に置いていたので，宿の前でカメラを使えたKくんやTくんに何枚か写真を撮ってもらいました．</p><p>宿（乗鞍白雲荘）の前にて（K君撮影）　やっぱり乗鞍の星空は別格！<br><img src="/images/00000019-2019-08-30-norikura/01.jpg" alt="宿の前にて（K君撮影）"></p><p>宿の前にて（K君撮影）　雲がありますが，これもこれで幻想的ですね．<br><img src="/images/00000019-2019-08-30-norikura/02.jpg" alt="宿の前にて（K君撮影）"></p><h3 id="朝焼け"><a href="#朝焼け" class="headerlink" title="朝焼け"></a>朝焼け</h3><p>朝もいい感じの天気になるだろうと思い，日の出頃に何人かで近場の大黒岳に登りました．富士見岳や魔王岳，剣ヶ峰は登ったことがありますが，大黒岳には初めてです．ガレ場も少なく斜面もそれなりに緩やかで，魔王岳と同様登りやすい印象です（ただ魔王岳は奥の方に入っていくと岩場があります）．<br>登ってみると綺麗な雲海が広がっていました．自分は山の人間ではないですが，こういうのを見ると山も良いものだなあと思います．</p><p>大黒岳，2771m！<br><img src="/images/00000019-2019-08-30-norikura/03.jpg" alt="大黒岳"></p><p>今回初参加のフォロワーさん．去年の坂本真綾ライブで友人になりました．<br><img src="/images/00000019-2019-08-30-norikura/04.jpg" alt="R"></p><p>時々一緒に出かけるHくん．雲海の向こうには槍や穂高が見えますね．<br><img src="/images/00000019-2019-08-30-norikura/05.jpg" alt="H"></p><p>ご来光の時間になると，それ目当ての人たちがモリモリ登ってきたので，混雑する前に撤収しました．</p><p>ご来光．乗鞍でちゃんと見るのは意外に初めてかも？<br><img src="/images/00000019-2019-08-30-norikura/06.jpg" alt="ご来光"></p><p>それからはいつもどおり，宿で朝ごはんを食べ，貸切バスで帰路につきました．<br>病み上がりでしたがとても充実した時間でした．来年は健康な状態でまた訪れたいものですね．</p><p>フォロワーさんにはこんな感想も言ってもらいました．嬉しい．<br><img src="/images/00000019-2019-08-30-norikura/07.jpg" alt="Tweet"></p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【告知】面分光研究会2019 で講演します！</title>
      <link href="/2019/09/24/00000020-ifu-2019/"/>
      <url>/2019/09/24/00000020-ifu-2019/</url>
      
        <content type="html"><![CDATA[<h3 id="告知"><a href="#告知" class="headerlink" title="告知"></a>告知</h3><p>こんにちは．突然ですが，今年の10月29日，30日に国立天文台三鷹キャンパスで開かれる「面分光研究会2019-新面分光装置で花開く新しいサイエンス-」で招待講演をさせていただくことになりました．<br>面分光とは天体の場所ごとのスペクトルを一度の露出で得ることができる画期的な技術で，日本でもすばる望遠鏡や最近運用が開始されたせいめい望遠鏡でその利用が開始されました．</p><p>今回のプログラムは</p><ul><li>国内面分光装置（計画）の現状</li><li>面分光に関わる可視化などのソフトウェア</li><li>面分光用いたサイエンスケース</li></ul><p>のようなジャンルで分けられており，私は「面分光に関わるソフトウェア」の中で20分ほど，面分光データを利用した研究の応用例に関して発表させていただく予定です．<br>割とがんばって準備しているので，当日天文学者の方々と有益な議論ができればと思っています．</p><p>詳しくは以下のページをご覧ください．<br><a href="http://www.ioa.s.u-tokyo.ac.jp/ifu/ifu_meeting_2019.html">面分光研究会2019 -新面分光装置で花開く新しいサイエンス- </a></p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2019年8月 天城高原</title>
      <link href="/2019/08/05/00000018-2019-08-03-amagi/"/>
      <url>/2019/08/05/00000018-2019-08-03-amagi/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．少し時間が前後してしまいますが，先日天城高原まで三ヶ月ぶりに出向いてきたので，遠征記を書きたいと思います．</p><span id="more"></span><h3 id="大学→一夜城→伊東マリンタウン"><a href="#大学→一夜城→伊東マリンタウン" class="headerlink" title="大学→一夜城→伊東マリンタウン"></a>大学→一夜城→伊東マリンタウン</h3><p>今回は研究室の友人を二人連れていくということで，待ち合わせは大学近くの駅前に．2時半頃に出発して，東名高速→小田原厚木道路といつも通りの道を走りました．途中少し渋滞もありましたが，4時頃には一夜城に到着．アイスクリームを食べて，少し遠回りをして伊豆スカイライン側から伊東マリンタウンに向かいました．ナビにおとなしく従い，伊豆スカイラインまでにターンパイク箱根を走りました．ここを通るのはなんだかんだで初めてだったのですが，道幅も広くとても走っていて気持ちのいい道だったので，走り屋に人気(？)なのもうなずけます．</p><p>一夜城のアイスクリーム（撮影は友人）．この日はブルーベリーでした．<br><img src="/images/00000018-2019-08-03-amagi/ichiya.jpg" alt="一夜城のアイスクリーム"></p><p>ターンパイク後半で霧に見舞われまたりもしましたが，無事伊豆スカイラインを抜けて亀石峠で降り，海沿いを走って伊東マリンタウンに到着です．観測後はすぐに帰るということでここで温泉に入り，夕飯を食べました．ここのレストランですが，そば・うどんのお店が6月に少し移動して，もとの場所に伊豆浜焼本舗が新しく開店していました．せっかくなのでここでマグロテールのホイル焼きを食べてみましたがとても美味しかったです．生ものと焼きものがセットで並んでいるというのは魅力的です．</p><h3 id="伊東マリンタウン→天城高原GC"><a href="#伊東マリンタウン→天城高原GC" class="headerlink" title="伊東マリンタウン→天城高原GC"></a>伊東マリンタウン→天城高原GC</h3><p>その後はいつもどおり，途中コンビニに寄って，天城高原GCに向かいました．海岸で花火が打ち上げられていて，コンビニから出る時にちょうど見ることができました（写真はありませんが）．</p><p>天城高原に到着すると，予報通りよく晴れています．早速展開して，撮影，といきたいところですが，友人にも色々と見せたい対象があったりしますので，最初は今ではもっぱら眼視用になっているR200SSを乗せて，カメラでは何枚か遊びで撮影しました．</p><p>星空記念写真（後ろに流星写ってますね）<br><img src="/images/00000018-2019-08-03-amagi/01.jpg" alt="星空記念写真"></p><p>フリーダムに<br><img src="/images/00000018-2019-08-03-amagi/02.jpg" alt="フリーダムに"></p><p>おわかりいただけるだろうか…<br><img src="/images/00000018-2019-08-03-amagi/03.jpg" alt="心霊写真(風)"></p><p>友人には木星，アンタレス，アルビレオ，M31，M27，h-χなどを見てもらいました．今回は双眼鏡も持ってきたので，それで遊んだりもしましたね．<br>なんだかんだで1時半くらいまでは晴れたり曇ったりと撮影には向かない天気だったのですが，ちょうどそろそろ撮ろうかなと思っていた矢先にすっきりと晴れだしましたので，撮影を開始．結果1時間ちょい露光することができました．<br>今回は，や座～こぎつね座東側にかけての星野です．この領域は一見すると地味ですが，天の川を走る暗黒帯の他にも，個人的に好きなM27やNGC6823，コートハンガー星団などが位置しており，写真でも眼視でも見飽きません．今年の夏はどこかでここを撮りたいなあとずっと思っていたので，1時間でも露光できて満足です．</p><p><img src="/images/00000018-2019-08-03-amagi/work.jpg" alt="や座～こぎつね座星野写真"></p><div style="text-align: center;">”や座～こぎつね座周辺”2019年8月4日 午前1時30分 静岡県天城高原にてSIGMA 135mm F1.8 DG HSM Art (135mm F2.5)Canon EOS 6DISO 1600 / 180s * 22 = 66minSI8 / Adobe Lightroom CC / Photoshop CC</div><br><p>星座線を入れると，こんな感じ．<br><img src="/images/00000018-2019-08-03-amagi/work_as.jpg" alt="や座～こぎつね座星野写真(星座線入)"></p><p>なかなかの出来になったなあと個人的には思いますが，いかがでしょうか？<br>この日はガスって星像が肥大するということはありませんでしたが，やっぱり本当に本気出している時に比べると明るかったかなあという印象があります．最近の天城，どうしちゃったんでしょうね？（いい時に自分が行けてないだけかもしれませんが）</p><p>その後は4時半ごろに出発して，途中休憩をはさみながらまっすぐ帰りました．<br>次の新月はいよいよ今年も乗鞍に行きますので，（色々とやることは山積みなのですが……）楽しんでいきたいと思います．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【完全に乗り遅れ感】StarNet++を使ってみた</title>
      <link href="/2019/08/02/00000017-starnet-first-impression/"/>
      <url>/2019/08/02/00000017-starnet-first-impression/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．</p><p>大学院での授業の課題等に追われて天体写真関係はほとんど追えていなかったのですが，久々に界隈を眺めていたところどうやらStarNet++というソフトウェアが話題になってるっぽいので，自分も使ってみました．<br>昨日の今日でこの記事を書いているので，本当に最初の最初の感想という感じです．</p><span id="more"></span><h3 id="実際に使ってみて"><a href="#実際に使ってみて" class="headerlink" title="実際に使ってみて"></a>実際に使ってみて</h3><p>使い方自体は他の人がわかりやすい記事や動画を上げてくださっているのでそこに任せるとして，いくつか気になったこととしては（他の人も触れていることですが）CUIというのは今どき珍しい感がありますね．天体写真やっている方々が使うのにはそこまで抵抗はないと考えますし，もしかしたらツールとしてはまだ黎明期で，大衆的な実用段階ではないのかなあとも考えたりします．<br>それから，今のところ<a href="https://github.com/nekitmm/starnet">github</a>にはPythonのソースコードしか載っていない（自分は致命的にPythonのコードが読めない）のでよくわからなかったのですが，GPUを使った実装はされているのかなあと思いました．自分のノートパソコンで（C++による版を）実行したところかなり時間がかかったので，GPU使ったらもうちょい早くなるんじゃないかなあと思ったりします（C++のソースを読んでみないと実際に使ってるかどうかはわかりません）．<br>もう一点，画像生成にはGANを使っているということで（<del>最初普通に教師ありでやってると思ってたので教師データはどう用意していたのかが気になっていたのですがその部分については解消です，</del>(2019.08.05 追記:友人に相談したところGANもネットワーク初期化段階で教師データは存在しているそうです)ちなみにディープラーニングについては私は全くの素人です），<del>そこまではいいのですが，仮にGANを使うにしても，</del>少なくとも識別側はGround Truthを用意しているはず（githubにもGround Truthとの比較が示されている）で，そのGround Truthはどっからやってきたのかが気になりました．仮に用意するにしても，光学系によっていろいろ結果は変わってくるはずで，何をもってGround Truthをしているのかという出自の部分が曖昧だなあというふうに感じました（私の読みが甘いだけかもしれないので，ご存じの方がいたらご教授いただければ幸いです）．</p><h3 id="結果"><a href="#結果" class="headerlink" title="結果"></a>結果</h3><p>以下に簡単に結果を示しておきます．</p><p>元画像<br><img src="/images/00000017-starnet-first-impression/original.jpg" alt="元画像"></p><p>StarNet++による処理結果<br><img src="/images/00000017-starnet-first-impression/result.jpg" alt="StarNet++による処理結果"></p><p>上二枚に基づきよしなに処理<br><img src="/images/00000017-starnet-first-impression/composit.jpg" alt="上二枚に基づきよしなに処理"></p><p>実際に使ってみて結果画像を開いてみて最初に思ったこととしては，「Psで『明るさの最小値』を使った時に結果として出てくるものと似てるなあ…」ということです．<br>ということで実際にやってみたところ…。</p><p>Photoshop「明るさの最小値」ピクセルサイズ1.5<br><img src="/images/00000017-starnet-first-impression/ps_res.jpg" alt="Photoshop「明るさの最小値」ピクセルサイズ1.5"></p><p>StarNet++による処理結果<br><img src="/images/00000017-starnet-first-impression/starnet_res.jpg" alt="StarNet++による処理結果"></p><p>二枚の差分<br><img src="/images/00000017-starnet-first-impression/diff_res.jpg" alt="二枚の差分"></p><p>…結構似てます？<br>違いとしては星雲がStarNet++の方が星雲が明るくなめらかである（おそらくGround Truthがなめらかでありそこに合わせようとしている）ことと，輝星がしっかり消されていて星雲だけを出力できていること，くらいでしょうか．</p><p>簡単にまとめると，私の処理では時間がとてもかかるので，星雲を破綻なしに強調し，かつハイクオリティなものを求めるなら良いかもしれませんが，とりあえずざっくり処理してみたい時にはあまり向かないかなあという印象です（マシンパワーがあればいいかもしれませんが）．また，ディープラーニングは流行っていますが，あまりブラックボックスすぎるものは個人的には（自分が勉強するまでは）あまり使わないかな，とも思っています（それでも面白い結果が得られそうなら使ってしまいそうですけどね）．<a href="https://github.com/nekitmm/starnet">github</a>にいくつかリファレンスの論文が載っていますので，時間があれば読んでみようと思います．それでは．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>中国SF「三体」がめちゃくちゃ面白かった話</title>
      <link href="/2019/07/10/00000016-santai-impression/"/>
      <url>/2019/07/10/00000016-santai-impression/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>今日は，「宇宙」・「天文」・「物理」といったワードが好きな人であれば誰しもが読むべきであろう中国SF小説「三体」のことを書こうかなと思います．<br>なんでまた…？と思われるかもしれませんが，端的に言ってめちゃくちゃ面白かったからです．以下，そもそも「三体」を知らない人にどういうものであるかを説明して，前半でネタバレ無しで感想を書いて，後半でネタバレありの感想を書いていこうと思います（反転を仕込んで配慮します）．</p><span id="more"></span><h3 id="「三体」とは？"><a href="#「三体」とは？" class="headerlink" title="「三体」とは？"></a>「三体」とは？</h3><p>中国の作家，劉慈欣による長編SF小説です．中国では2006年から「科幻世界」という雑誌で掲載されていたようで，国内では大変人気が高かったとか．その後ケン・リュウという中国系アメリカ人作家によって英語に翻訳され，来る2019年7月4日，日本語版が早川書房から出版されました．日本における発売から一週間経った現在，既に10版，8万部以上売れている今ホットなSF小説です．研究室関係で何人か中国人留学生と会う機会があったのですが，ほとんどの人が知っていました笑．ちなみに自分は発売されてサークルの後輩に「面白いので買え」とそそのかされるまで，この本はおろか中国SFというジャンルすら知りませんでした…．</p><h3 id="感想（ネタバレ無し）"><a href="#感想（ネタバレ無し）" class="headerlink" title="感想（ネタバレ無し）"></a>感想（ネタバレ無し）</h3><p>そもそも私は活字を読むのが大変苦手なのですが，この本に至っては5日土曜に購入し，7日月曜夜には読み終わってしまうほど，まさに読み始めたら止まらない内容でした（ちなみに450ページほどあります）．<br>文化大革命という毛沢東主導の革命時代からスタートし，現在までのエピソードが描かれます．史実に基づいたところがありつつも，当然要所要所にフィクションが仕込まれていて，これがとてつもないスケール感で進行していきます．「宇宙」・「天文」・「物理」といったものを少しでもかじったことがあるのであれば，思わず「そんなことある？！」と言いたくなるような，「豊潤な科学の知識をベースにした出来事だけれどもとにかく大きなこと」がたくさん起こるのです．それに対して，文章はある程度平易（中国人の登場人物が出てくるので名前に慣れていないとわからなくなりがちですが）で長くなく，自分のような語彙が少ない人間でもそれなりにスラスラ読み進めることができました（だからこそ読み始めると止まらない理由でもある）．<br>とにかくネタバレ無しで感想を書くのは厳しい！ということで以下ネタバレありで書きますので注意．</p><h3 id="感想（ネタバレあり）"><a href="#感想（ネタバレあり）" class="headerlink" title="感想（ネタバレあり）"></a>感想（ネタバレあり）</h3><p>ここからネタバレです↓（反転）<br><font color="white"><br>まずはあらすじから書いていきます．<br>時は文化大革命時代，中国の清華大学の天体物理学専攻の女子大生葉文潔は，父を革命派に惨殺され，信頼をおけると思えた人物に裏切られ，人類という存在に絶望しはじめる．その後，紆余曲折を経て「紅岸基地」という異星人を探すための観測所に所属し，研究を進めていた．ある時に紅岸基地から送られた地球上の文明の内容を説明する電波は，地球から約4光年離れたアルファ・ケンタウリあたりに位置する惑星に存在する「三体文明」に届く．その頃，文潔は太陽にある周波数，強度の電波を照射すると，とてつもない増幅率で放射されるという現象を発見する．<br>三体文明は冷酷な世界であり，いわゆる3つの太陽が存在する世界である．太陽が3つあると恒星の軌道は解析的に解けずいわゆる「カオス的」となって，惑星の周りを1つの恒星が安定して回る「恒期」と，その安定性が失われ，太陽は全く現れず（あるいは彼方で小さな飛星となって輝く）惑星表面を生きていけないほど冷たい環境にする，もしくは近くに出現し惑星表面を灼熱地獄にする「乱期」がランダムに現れる世界であった．そのような環境で，三体文明は幾度となく滅亡し，復興することを繰り返してきた．そんな中，前述した電波を三体文明のある平和主義者が受け取った．三体文明から見て，地球は一つの太陽が安定して周回する楽園である．三体文明は地球を征服しに行くに違いないと判断したこの平和主義者は，地球に向けて，もうこれ以上電波を送信して応答するなというメッセージを発する．彼の警告もむなしく，人類に絶望し，「人類が抱えている問題は人類の文明だけでは解決できない」と考え始めていた文潔は警告を無視して，「三体文明の力が人類には必要であるから，来てほしい」という旨の電波を送信する．ほどなくして，三体文明による「侵略」が始まる．<br>三体文明による「侵略」が始まった頃，ナノマテリアル科学者であった汪淼はある怪現象に悩まされる．自分が撮影した写真にのみ感光される，そして自分の網膜にのみ現れる，謎のカウントダウンが出現し始めたのだ．助けを求めに「科学フロンティア」の人間にあたると，解決法は「ナノマテリアル科学研究を中止せよ」ということであった．事実，そのようにすると謎のカウントダウンは停止し，出現しなくなった．<br>実はこの現象は，地球の科学の発展を止めたい（なぜなら三体文明が地球に到着するまで400年以上かかり，その間に地球の科学文明が発展して返り討ちにされては困るので）三体文明が放った「智子」というたった2つの陽子によるものであった．三体文明はM理論における11次元時空をミクロスケールで操作する技術を身に着けており，「智子」は陽子の11次元構造を2次元に展開し，その上に集積回路と人工知能を乗せて，もう一度もとの陽子に戻したものだったのである．この「智子」により，世界にある粒子加速器の実験結果は信頼できない（加速器の中に「智子」が出現してでたらめな実験結果をもたらす，しかもここでぶつかった「智子」は壊れず分裂できる）ものとなり，地球の素粒子分野の科学進歩は三体文明に遅れをとったままストップすることとなった（「智子」は11次元の存在なので閉じた3次元空間にも入ることができるし，亜光速で移動することもできる）．また，この「智子」による感光現象が，汪淼を悩ませていたものだったのである．<br>その頃地球では「地球三体組織(ETO)」という，文潔の思想から発展し，「人類など皆三体文明に滅ぼされるべきである」という思想をもったグループが同士を集めるために三体文明の興亡を見ながらその本質に迫っていくVRゲーム「三体」を製作していた．汪淼も，このゲームをプレイし，ETOに近づいていく．史警官と協力しながらその内部に潜入し，ついにはETOのメイン母体である船を壊滅させることに成功，三体文明の地球侵略計画を公のものとして知ることとなった．だが，「智子」に監視されている事実，あと450年もすれば三体文明が攻めてくるという事実に変わりは無く，来るべき戦いへの準備にせまられることとなる…．</p><p>というのが最初の1巻の（おおざっぱな）内容になります．いくつか面白かったと思う点を挙げていきますね．<br>まず面白い点として，文化大革命のような史実に基づいた内容が多く盛り込まれており，中国的かつ文学的な描写（といっても詳しくないので本当にそうかは不明ですが）が多く見られることが挙げられます．例えば文潔の過去の話で，彼女が紅岸基地を去った後近くの村で生活する場面があるのですが，貧しいながらも幸福に生きる様子は，今も貧富の差が大きい中国社会を反映しているのかなと思ったりもするのです．そして，このあたりも含めて要所要所に文学的な文章を入れ込んでくるのが良い．これによって，圧倒的なスケール感や，エモーショナルな情景が眼前に広がります．<br>次は，三体文明の存在と設定，そしてVRゲームです．3つの太陽があって，その軌道が解析的に解けないという設定の時点でなんだか凄まじいものを感じますね．前述のあらすじでは書きませんでしたが，三体星人はこのような環境の中で，やばいとなると，「脱水」することができるんです．体中の水分を抜いて皮だけになる感じ．なんだそれって感じですが，面白い設定ですね．そして，抜かしてはならないのはVRゲーム「三体」の存在です．ちょくちょく汪淼がこのゲームを進めていくうちにいくつかの文明が滅びる様子を読むことになるのですが，これがまた大変おもしろい．「円」とよばれる別の短編集のお話が盛り込まれていて，これは秦の始皇帝が数百万の黒と白の旗を持った兵士を使ってコンピュータを再現し，円周率を計算させるというものです．本作では三太陽の軌道計算のために同様のアプローチが取られています．このゲームが，地球文明と三体文明における，両文明それぞれの事情を対比的に描くためインタフェースとなっているということも重要なポイントであると言えるでしょう．<br>そして最後，なにより面白いのは三体文明の侵略の仕方ですね．「智子」のお話などは本の最後部分に位置するのですが，圧巻です．陽子2個を送ってきた→それでどうやって地球の科学進歩を止めるのか？という流れが非常に秀逸で，この部分は読んでて特に止まらなかったポイントになります．陽子を2次元に展開するって思いつかんでしょ普通…笑．<br></font></p><h3 id="おわりに"><a href="#おわりに" class="headerlink" title="おわりに"></a>おわりに</h3><p>とまあ軽く書いてみたんですが自分の説明は下手くそなので，皆さんご自分で読んでください笑．とにかく面白いです．読み終わってからも，めちゃくちゃ続きが気になる一冊です．胸を張っておすすめします．私は写真が趣味で，一発目に見える表現が好きだったのですが，活字の表現力を改めて知ることとなりました…．<br>皆さんも買いましょう．amazonリンクは<a href="https://www.amazon.co.jp/%E4%B8%89%E4%BD%93-%E5%8A%89-%E6%85%88%E6%AC%A3-ebook/dp/B07TS9XTSD/ref=sr_1_1?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&keywords=%E4%B8%89%E4%BD%93&qid=1562861434&s=gateway&sr=8-1">こちら</a>（アフィじゃないですよ！）</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】2019年4月 天城高原</title>
      <link href="/2019/07/10/00000015-2019-04-amagi/"/>
      <url>/2019/07/10/00000015-2019-04-amagi/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．もう7月になってしまいますが，4月の遠征記事を書いておこうと思います．4月は2回ほど天城高原に訪れていましたが，しっかり一晩晴れたのは前半の4月5日-7日での遠征でしたので，その時の話です．</p><span id="more"></span><h3 id="天城高原"><a href="#天城高原" class="headerlink" title="天城高原"></a>天城高原</h3><p>実は今回の遠征の主目的は星見ではなく，小淵沢の「<a href="http://mahounofue.com/">魔法の笛</a>」さんという宿に泊まることだったのですが，同期と星を見たい気持ちもあったので，その前日の夜に，唯一晴れそうな天城に向かうことにしました．自分と同期たち6人で今回の旅行をする予定で，車を運転するのは自分ともうひとり．その彼が夜まで大学で用事があったので，夜21時頃に家を出発し，最寄り駅で車を運転しない同期を2人拾って，西湘バイパスを走ってのんびり天城に向かいました．<br>麓のコンビニで彼の車と合流．彼は大変車が好きで，BMW M4 Competitionというスポーツクーペに乗っています（どれだけすごい車かは調べてもらえばわかると思いますが，にしても本当に大学生か？）．自分も二回ほどドライブで乗せてもらったことがありますが，めちゃくちゃ速いです．<br>道中鹿の犠牲になるなら自分の車の方がいいだろうということで，自分が先導してのんびり山登りしました．案の定道中かなりの数の鹿と出くわすことになり，その度ハザードで警告したので事故らずに済みました．<br>到着してみると，予報通り風がひどい時の天城で，体が吹き飛ばされそうでした．それでもよく晴れていたので，なんとか機材を展開し，同期のうち何人かはミラーレスを持っていたので，彼らに赤道儀を使わせてあげました．彼らにとって長時間露光でもしっかり点に写るというのは初めてらしく，とても感動していたので良かったです．<br>金曜の夜ということで人もあまりいなかったので，少し車を動かして何枚か撮影．<br><img src="/images/00000015-2019-04-amagi/m_upon_the_earth.jpg" alt="M upon the earth"></p><div style="text-align: center;">”M upon the earth”2019年4月6日 午前3時46分 静岡県天城高原にてEF24-70mm F2.8L II USM (24mm F4)Canon EOS 6DISO 3200 / 25sAdobe Lightroom CC / Photoshop CC</div><br>タイトルは「地上に降り立ったM」のような意味です．BMW MシリーズのMと，MessierのMをかけています（事実，空にはもう1つのM4が写っているのが天文マニアの方であればすぐわかるでしょう）．<p><img src="/images/00000015-2019-04-amagi/m_and_fit.jpg" alt="M4とFit"></p><div style="text-align: center; padding-top:-90px">2台で撮影．ライトはVixenの減光ライトの白色光を使用しました．なかなかいい感じですね．</div><br><p><img src="/images/00000015-2019-04-amagi/amanogawa.jpg" alt="天の川を支えるポーズ"></p><div style="text-align: center; padding-top:-90px">天の川を支えるポーズ．25秒露光ですが，この体勢を25秒間キープするのは至難の業です．まだまだ修行が足りない．</div><br><h3 id="本栖湖，精進湖"><a href="#本栖湖，精進湖" class="headerlink" title="本栖湖，精進湖"></a>本栖湖，精進湖</h3><p>明け方前の4時頃に天城高原を出発しました．冷川インターで降りて朝からやっている温泉に浸かり，ブランチ？にさわやかを食べ，新東名を経由して朝霧方面から本栖湖と精進湖へ．少し雲もありましたが晴れていて富士山もよく見える．</p><p><img src="/images/00000015-2019-04-amagi/lake_shoji.jpg" alt="精進湖にて"></p><div style="text-align: center;">精進湖にて</div><br>星見のときもそうですが，精進湖は湖畔に降りられるのがいいですね．路面が厳しいので同期の車はかなりビビりながら侵入してましたが笑．<h3 id="魔法の笛"><a href="#魔法の笛" class="headerlink" title="魔法の笛"></a>魔法の笛</h3><p>それからは3月のライブの時と同じルートで魔法の笛さんに直行．同期の車が速すぎて高速道路で置いてきぼりにされたりなどしましたが無事到着．移動の疲れ（主に車を運転していた2人は死にそうでした）を，ゆっくり羽を伸ばして癒やしました．</p><p><img src="/images/00000015-2019-04-amagi/mahounohue01.jpg" alt="魔法の笛の内装"></p><p><img src="/images/00000015-2019-04-amagi/mahounohue02.jpg" alt="魔法の笛の内装"></p><div style="text-align: center;">内装はこんな感じで，とてもおしゃれ．暖炉やグランドピアノがあったりボードゲームができたりします．</div><br>実はこの宿は自分が学部1年生にも宿泊したことがあり，料理がめちゃくちゃ美味しくて忘れられなかったので，同期との旅行という適当な口実をつけて来たかった宿になります笑．同期も料理にとても満足していたので結果オーライといったところでしょうか．<p><img src="/images/00000015-2019-04-amagi/mahounohue03.jpg" alt="魔法の笛の食事"></p><p><img src="/images/00000015-2019-04-amagi/mahounohue04.jpg" alt="魔法の笛の食事"></p><div style="text-align: center;">料理はイタリアンです．やっぱりめちゃくちゃ美味しい！</div><br>オーナーさんも気さくなとても良い方で，週末にしか営業していないのがもったいないくらい素敵な宿です．また何か理由をつけて行きたいと思います．<p><img src="/images/00000015-2019-04-amagi/mahounohue05.jpg" alt="集合写真 魔法の笛玄関前にて"></p><div style="text-align: center;">宿の玄関前で撮ってもらいました，ありがとうございました！</div><br>その後は渋滞も嫌だったので，そのまま帰りました．夏はこのメンツでコテージに泊まりに行く（予定）なのでとても楽しみですね．]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ABC 131 (Fまで)</title>
      <link href="/2019/06/23/00000014-abc-131/"/>
      <url>/2019/06/23/00000014-abc-131/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>ABC 131に参加してました．Dまでで4完してその後E, Fも解いたので考え方を書いておきます．解答例は<a href="https://github.com/dabokun/competitive-programming/tree/master/atcoder/131">こちら</a>．</p><span id="more"></span><h3 id="A問題"><a href="#A問題" class="headerlink" title="A問題"></a>A問題</h3><p>4桁の文字列(数値)をとって，連続した同じものがあればBadを，無ければGoodを出力せよという問題です．文字列をs[4]として，</p><pre><code class="hljs C++"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; ++i) &#123;    <span class="hljs-keyword">if</span> (s[i] == s[i + <span class="hljs-number">1</span>]) &#123;        flag = <span class="hljs-literal">true</span>;    &#125;&#125;</code></pre><p>flagがtrueならGood，そうでなければBadですね．</p><h3 id="B問題"><a href="#B問題" class="headerlink" title="B問題"></a>B問題</h3><p>最初そのままいちいち差の絶対値を計算して出してACしちゃいましたが，絶対値が小さい味のものを食べないようにしたほうが簡潔ですね．食べない味の符号を反転したまま覚えておかないことにだけ注意しましょう．n, lを入力の値として，</p><pre><code class="hljs C++"><span class="hljs-type">int</span> min = INF;<span class="hljs-type">int</span> not_eat = <span class="hljs-number">0</span>;<span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = l; i &lt; l + n; ++i)&#123;    sum += i;    <span class="hljs-keyword">if</span> (min &gt; <span class="hljs-built_in">abs</span>(i)) &#123;        min = <span class="hljs-built_in">abs</span>(i);        not_eat = i;    &#125;&#125;cout &lt;&lt; sum - not_eat &lt;&lt; endl;</code></pre><p>これで通ります．</p><h3 id="C問題"><a href="#C問題" class="headerlink" title="C問題"></a>C問題</h3><p>A以上B以下の整数のうち，CでもDでも割り切れないものはいくつあるかという，中学受験の算数でありそうな問題ですね（高校受験か…？）．頭の中にベン図を思い浮かべればいいでしょう．E &#x3D; lcm(C, D)とすれば，<br>(B - (B以下のCの倍数 + B以下のDの倍数 - B以下のEの倍数)) - (A - 1 - (A未満のCの倍数 + A未満のDの倍数 - A未満のEの倍数))で答えが求まりますね．<br>汚いですがこんな感じ…gcdやlcmがC++にあるのを知らなかったので自前でユークリッドの互除法を書きました…．</p><pre><code class="hljs C++"><span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> a, aa, b;<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> c, d, cc, dd;cin &gt;&gt; aa &gt;&gt; b &gt;&gt; c &gt;&gt; d;a = aa - <span class="hljs-number">1</span>;<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> gcd;<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> r;cc = c, dd = d;r = cc % dd;<span class="hljs-keyword">while</span> (r != <span class="hljs-number">0</span>) &#123;    cc = dd;    dd = r;    r = cc % dd;&#125;gcd = c * d / dd;<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> bdivc, bdivd, bdivgcd, divb;<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> adivc, adivd, adivgcd, diva;bdivc = b / c, bdivd = b / d, bdivgcd = b / gcd;adivc = a / c, adivd = a / d, adivgcd = a / gcd;divb = b - (bdivc + bdivd - bdivgcd);diva = a - (adivc + adivd - adivgcd);cout &lt;&lt; (divb - diva) &lt;&lt; endl;</code></pre><h3 id="D問題"><a href="#D問題" class="headerlink" title="D問題"></a>D問題</h3><p>0から時間がスタートします．N個のタスクがあり，締め切り時間B_iまでに，時間A_iかかるタスクたち(1 &lt;&#x3D; i &lt;&#x3D; N)をスケジューリングできますか？という問題です．自分は<a href="https://ja.wikipedia.org/wiki/Earliest_Deadline_First">EDF（Earliest Deadline First）</a>と呼ばれる締切時間優先のアルゴリズムで解きましたが，どうやらそれで正しかったようです（本当にこれでいいのかわからず，DMやRMみたいな他のアルゴリズムもあるので調べていて時間を食いました）．</p><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">compare_by_b</span><span class="hljs-params">(pair&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>&gt; a, pair&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>&gt; b)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-keyword">if</span> (a.second != b.second) &#123;        <span class="hljs-keyword">return</span> a.second &lt; b.second;    &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-keyword">return</span> a.first &gt; b.first;    &#125;&#125;<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-type">int</span> n;    cin &gt;&gt; n;    vector&lt;pair&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>&gt;&gt; task;    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;        <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> bufa, bufb;        pair&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>&gt; p;        cin &gt;&gt; bufa &gt;&gt; bufb;        p = <span class="hljs-built_in">make_pair</span>(bufa, bufb);        task.<span class="hljs-built_in">push_back</span>(p);    &#125;    <span class="hljs-built_in">sort</span>(task.<span class="hljs-built_in">begin</span>(), task.<span class="hljs-built_in">end</span>(), compare_by_b);    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> sumtime = <span class="hljs-number">0</span>;    <span class="hljs-type">bool</span> flag = <span class="hljs-literal">true</span>;    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; task.<span class="hljs-built_in">size</span>(); ++i) &#123;        sumtime += task[i].first;        <span class="hljs-keyword">if</span> (sumtime &gt; task[i].second) &#123;            flag = <span class="hljs-literal">false</span>;            <span class="hljs-keyword">break</span>;        &#125;    &#125;    <span class="hljs-keyword">if</span> (flag) &#123;        cout &lt;&lt; <span class="hljs-string">&quot;Yes&quot;</span> &lt;&lt; endl;    &#125; <span class="hljs-keyword">else</span> &#123;        cout &lt;&lt; <span class="hljs-string">&quot;No&quot;</span> &lt;&lt; endl;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p>secondを使ってtaskをソートしますが，デフォルトのsortはfirstを使ってソートするので，独自のソートルールを定義しています（こういう書き方ができるんだ…）．</p><h3 id="E問題"><a href="#E問題" class="headerlink" title="E問題"></a>E問題</h3><p>数字NとKが与えられた時，N頂点の単純かつ連結なグラフで，最短経路が2であるK個の頂点の組が存在するか（するならグラフのエッジ本数と構成を出力し，しないなら-1を出力せよ）という問題です．スターが最大っぽいな…というのはなんとなくわかっていたのですがそれが(N-1)(N-2)&#x2F;2であることに気づけずタイムアップしました．手がかりとしては</p><ul><li>スターグラフのときが最大である．</li><li>完全グラフのとき0である（全部つながってるので）．</li></ul><p>あたりかなと思っています．こういう問題はとにかく試す（一本の鎖のようにつながったグラフ，完全グラフ，スターグラフあたり）のがいいかなと思いました．<br>証明の手順としては，N頂点は最低でもN-1本の辺で結ばれる．したがって，K &gt; N(N-1)&#x2F;2 - (N-1) &#x3D; (N-1)(N-2)&#x2F;2 では解は存在し得ない．スターの時，ある点以外のN-1個の頂点間の最短距離を2にできて，その数は(N-1)(N-2)&#x2F;2である，といった感じです．<br>このようなスターが構成できれば，残りのN-1個の頂点に辺を1本ずつ張っていくことで，最短経路2の頂点の組を一つずつ減らすことができ，結局0以上(N-1)(N-2)&#x2F;2以下の組数で可能であることがわかります．<br>ここまで理解できれば実装はさほど困難ではなく，</p><pre><code class="hljs C++"><span class="hljs-type">int</span> n, k;cin &gt;&gt; n &gt;&gt; k;<span class="hljs-type">int</span> max = (n - <span class="hljs-number">1</span>) * (n - <span class="hljs-number">2</span>) / <span class="hljs-number">2</span>;<span class="hljs-keyword">if</span> (k &gt; max) &#123;    cout &lt;&lt; <span class="hljs-number">-1</span> &lt;&lt; endl;&#125; <span class="hljs-keyword">else</span> &#123;  cout &lt;&lt; (n - <span class="hljs-number">1</span>) + (max - k) &lt;&lt; endl;  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;      cout &lt;&lt; <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; i + <span class="hljs-number">2</span> &lt;&lt; endl;  &#125;  <span class="hljs-type">int</span> it = max - k;  <span class="hljs-type">int</span> begin = <span class="hljs-number">2</span>, end = begin + <span class="hljs-number">1</span>;  <span class="hljs-keyword">while</span> (it &gt; <span class="hljs-number">0</span>) &#123;      cout &lt;&lt; begin &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; end &lt;&lt; endl;      end++;      <span class="hljs-keyword">if</span> (end &gt; n) &#123;          begin++;          end = begin + <span class="hljs-number">1</span>;      &#125;      it--;  &#125;&#125;</code></pre><p>4行目のif文では明らかに大きなものを判定．答えは(n - 1)(スター) + (max - k)(残りの部分に張る辺の数)になるのでこれを7行目で出力．あとは辺の張り方を出力します．8-10行目でスターの部分，11-21行目でスターの端点同士の辺の出力をしています．</p><h3 id="F問題"><a href="#F問題" class="headerlink" title="F問題"></a>F問題</h3><p>N個の点があり，格子点に沿って四角形を形成できる三点の組を見つけ，残りの一点を見つけて追加していく操作を再帰的に何回繰り返せるかという問題です．<br>愚直に考えるのは到底無理なので，以下のようなグラフの問題に言い換えます．</p><ul><li>格子点のX座標を頂点X_i，Y座標を頂点Y_iとし，(x_i, y_i)に点が存在する時頂点X_iとY_iに辺を張る．</li><li>できたグラフに対して，それぞれの頂点から(自身を含め)いくつの(X, Y)の頂点に到達できるかを調べて，その組を(ex_i, ey_i)とする．ただし，一度訪問した点はカウントから除外する．</li><li>(Σex_i * ey_i) - nが答えとなる．</li></ul><p>２つ目がミソかなあと思います．もし自身を含め(ex_i, ey_i)個の頂点にアクセスする辺が存在するなら，四角形を作るとは，全部でex_i * ey_i個の辺を張ることに相当します．<br>したがって，DFS等でいくつの頂点にアクセスできるかを数え，訪問した頂点は除外するという処理を書く必要があります．</p><pre><code class="hljs C++"><span class="hljs-type">const</span> <span class="hljs-type">int</span> V = <span class="hljs-number">100005</span>;vector&lt;<span class="hljs-type">int</span>&gt; to[V * <span class="hljs-number">2</span>];<span class="hljs-type">bool</span> visited[V * <span class="hljs-number">2</span>];vector&lt;<span class="hljs-type">int</span>&gt; cnt;<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">//cout &lt;&lt; &quot;dfs(&quot; &lt;&lt; v &lt;&lt; &quot;)&quot; &lt;&lt; endl;</span>    <span class="hljs-keyword">if</span> (visited[v]) &#123;        <span class="hljs-comment">//cout &lt;&lt; v &lt;&lt; &quot; is visited(in dfs).&quot; &lt;&lt; endl;</span>        <span class="hljs-keyword">return</span>;    &#125;    visited[v] = <span class="hljs-literal">true</span>;    cnt[v / V]++;    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> u : to[v]) &#123;        <span class="hljs-built_in">dfs</span>(u);    &#125;&#125;<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-type">int</span> n;    cin &gt;&gt; n;    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;        <span class="hljs-type">int</span> x, y;        cin &gt;&gt; x &gt;&gt; y;        y += V;        to[x].<span class="hljs-built_in">push_back</span>(y);        to[y].<span class="hljs-built_in">push_back</span>(x);    &#125;    <span class="hljs-type">long</span> <span class="hljs-type">long</span> ans = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; V * <span class="hljs-number">2</span>; ++i) &#123;        <span class="hljs-keyword">if</span> (visited[i]) &#123;            <span class="hljs-comment">//cout &lt;&lt; i &lt;&lt; &quot; is visited at first.&quot; &lt;&lt; endl;</span>            <span class="hljs-comment">//cout &lt;&lt; i &lt;&lt; &quot;:&quot; &lt;&lt; cnt[0] &lt;&lt; &quot; &quot; &lt;&lt; cnt[1] &lt;&lt; endl;</span>            <span class="hljs-keyword">continue</span>;        &#125;        cnt = <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>);        <span class="hljs-built_in">dfs</span>(i);        ans += (<span class="hljs-type">long</span> <span class="hljs-type">long</span>)cnt[<span class="hljs-number">0</span>] * cnt[<span class="hljs-number">1</span>];        <span class="hljs-comment">//cout &lt;&lt; i &lt;&lt; &quot;:&quot; &lt;&lt; cnt[0] &lt;&lt; &quot; &quot; &lt;&lt; cnt[1] &lt;&lt; endl;</span>    &#125;    ans -= n;    cout &lt;&lt; ans &lt;&lt; endl;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> 競技プログラミング </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> 競技プログラミング </tag>
            
            <tag> AtCoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ABC 130（はじめました）</title>
      <link href="/2019/06/17/00000012-abc-130/"/>
      <url>/2019/06/17/00000012-abc-130/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．最近何かと新しいことに挑戦しがち（先日の星ナビもその一環なのですが）なのですが，最近6,7年ぶりくらいに競技プログラミングに挑戦しています．今回はAtCoder Beginner Contest 130でした．私の解答例は<a href="https://github.com/dabokun/competitive-programming/tree/master/atcoder/130">こちら</a>．※E, Fは解いてません．</p><span id="more"></span><h4 id="A問題"><a href="#A問題" class="headerlink" title="A問題"></a>A問題</h4><p>特筆すべきことはありません．<br>X &lt; A ? 0 : 10を出力します．</p><h4 id="B問題"><a href="#B問題" class="headerlink" title="B問題"></a>B問題</h4><p>これも特に難しい点はないですね．<br>現在の座標をdとして，d &lt;&#x3D; Xの間だけカウントしつつdを更新し，満たさなくなれば終了します．O(N)です．</p><h4 id="C問題"><a href="#C問題" class="headerlink" title="C問題"></a>C問題</h4><p>長方形の内部または周辺の点Pを通る直線で長方形を2つに分割する時，小さい方の最大値を求め，分割する方法が1つか複数かを判定しろという問題です．<br>問題文はややこしいですが，とりあえずど真ん中の点を通る直線を引けば必ず半分にすることができて，半分になった時に題意を満たすことは明らかです．W, Hが10^9までとりえるので，64bitで計算する必要があることに注意です．<br>分割する方法に関してですが，点がど真ん中以外の時は一位に定まり，ど真ん中の時は無数に存在します．サンプルケースが理解の助けになりました．点Pを(x, y)とすればif (x * 2 &#x3D;&#x3D; W &amp;&amp; y * 2 &#x3D;&#x3D; H)のように判別できますね（自分はW &#x2F; 2を計算してキャストの問題でWA出しました，反省）．</p><h4 id="D問題"><a href="#D問題" class="headerlink" title="D問題"></a>D問題</h4><p>長さNの整数列の部分列で，和がK以上のものは何通りあるかという問題です．<br>累積和を使って考えたいというのが僕の方針で，実際それで解けましたが，実際にはしゃくとり法を使うといいっぽいです．なぜなら累積和は単調増加するので，超えたところから右は判定する必要がなく，右の超えた位置を保持しながら左を進めることで計算量を減らせます．具体的には，累積和を計算した配列をsums（最初は0），端点をleft, rightとすれば，</p><pre><code class="hljs C++"><span class="hljs-keyword">while</span> (left &lt;= n) &#123;    right = <span class="hljs-built_in">max</span>(left + <span class="hljs-number">1</span>, pbuf);    <span class="hljs-keyword">while</span> (right &lt;= n &amp;&amp; sums[right] - sums[left] &lt; k)    &#123;        ++right;    &#125;    pbuf = right;    counter += n - right + <span class="hljs-number">1</span>;    ++left;&#125;</code></pre><p>のようにすれば，counterに答えが求まります．pbufは現在の右端の値を保持しておきます（maxを使っていてしゃくとり法として微妙な感じがありますが，通ったのでこれでよしとします）．自分の提出コードはもっと汚いですが，原理的にはしゃくとり法と同じことをやっているんだなあと思いました．数列の長さは最大10^5ですが，計算する累積和やKは10^10までとりえるのでオーバーフローに注意します．<br>E,Fも気が向いたら解いてみたいと思います．</p>]]></content>
      
      
      <categories>
          
          <category> 競技プログラミング </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> 競技プログラミング </tag>
            
            <tag> AtCoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【遠征記】月刊星ナビ2019年7月号に入選しました</title>
      <link href="/2019/06/05/00000010-hoshinavi-2019-07/"/>
      <url>/2019/06/05/00000010-hoshinavi-2019-07/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．本日発売になった月刊星ナビ7月号の読者投稿に掲載されましたので，その報告ついでに，その時の遠征記を書きたいと思います．この日は星を撮りに行くというのが本質的な目的ではなくて，坂本真綾さんのバースデーライブを見に行くことが目的でしたので，主にライブの感想を書くことになると思います笑．</p><span id="more"></span><h3 id="掲載作品"><a href="#掲載作品" class="headerlink" title="掲載作品"></a>掲載作品</h3><p>掲載されたのは以下の写真になります．</p><p><img src="/images/00000010-hoshinavi-2019-07/work.jpg" alt="work"></p><div style="text-align: center;">”The Beginning of The Spring”2019年3月31日 午前4時10分 山梨県精進湖にてEF24-70mm F2.8L II USM (24mm F2.8)Canon EOS 6DISO 2000 / 25sAdobe Lightroom CC / Photoshop CC月刊 星ナビ2019年7月号 掲載</div><h4 id="所感"><a href="#所感" class="headerlink" title="所感"></a>所感</h4><p>写真を撮り始めて4年になりますが，SNS以外の雑誌のような場に出すのは初めてでした．初回特典（？）ビギナーズラック（？）であるかもしれないとはいえ，掲載され，雑誌をご覧になる方にも自身の作品を発信できるのは嬉しいものがありますね．<br>雑誌では上下にもう一枚ずつ，他の方の写真もあるのですが，自分のこの写真は星空部分がめちゃくちゃ明るいという印象ですね…．基本大学の文化祭で毎年開かれていた写真展以外の機会で自分の写真を印刷するということはあまり無く，画面との差異，雑誌に掲載されたものとの差異を意識したことはありませんでしたので，今後はこういったものもよく考えて送付できればなあと思いました．<br>素材はまだまだあるので，今後このような場での発信の機会を増やしていければなあと考えています．</p><h3 id="遠征記"><a href="#遠征記" class="headerlink" title="遠征記"></a>遠征記</h3><p>写真の話はこれくらいにして，遠征記兼ライブの感想を書こうと思います．3月30日朝6時過ぎに自宅を出発し，写真でも一緒に写っている星仲間の友人を武蔵小杉で拾って，河口湖へ向かいました．土曜の下りなので渋滞を予想しかなり早い出発になりましたが，首都高の渋滞もそれほどではなく，予定より2時間ほど早く談合坂に到着．途中覆面にビビりながら河口湖近辺の<a href="http://moosehills.jp/">ムースヒルズバーガー</a>さんに立ち寄りました．ここのハンバーガー，めちゃくちゃ美味しいのでオススメです．<br>食事を終えて<a href="https://www.stellartheater.jp/">河口湖ステラシアター(ライブ会場)</a>に到着．この会場は半野外のような感じで，屋根はついておりつつ外への抜けが存在します．既にリハーサルが始まっており，軽くネタバレ状態…．「紅茶」のコーラスが聞こえてきたときはうわぁぁってなりましたね…(たぶん伝わらない)．あ，紹介が遅れましたが私が敬愛する<a href="https://www.jvcmusic.co.jp/maaya/">坂本真綾</a>さんとは，ナレーションや舞台女優，声優，歌手など多様なお仕事をしていらっしゃる方です．スターウォーズのパドメ・アミダラの吹き替え，ぼくなつのお姉ちゃんキャラの中の人…と言えば伝わるでしょうか．私はこの方の歌が(大学に入ってからなので新参もいいところなのですが)とても好きで，今回のようにわざわざ河口湖まで出向くくらいです．<br>ライブ会場は寒くなることが予想されたので，特別にブランケットが用意されました．このブランケットが，写真で掲げているものになります．実際入ってみると…いやめちゃくちゃ寒い．正直，冬前くらいの観測地の寒さを想像していただければいいと思います．ブランケットにはあまり期待していなかったのですが，これがかなり暖かく，ライブ後の観測でも大活躍しています．このブランケットにくるまって，彼女の歌声を楽しみました．曲目については後述します．<br>真綾さんの誕生日は30日ではなく31日で，すなわち２日連続のライブでした．別で来ていた真綾さんファンの友人とほうとうを食べ，ホテルに送り届け，休みたいところではありましたが，せっかく河口湖まで来たし！ということで，河口湖近辺をドライブ&amp;仮眠をしつつのんびり精進湖へ向かいました．当時は曇り～雨の予報で，途中かなり激しく降られたりもしたのですが，明け方に着いてみると天の川が見えるくらいには星が見えるではありませんか！せっかくライブTシャツも着てるし，ということで半袖でブランケットを掲げて掲載写真を撮ったわけですが，3月末とはいえ精進湖は2℃．半分震えながらの撮影になりました笑．<br>その後は休まず精進湖を出発し，国道358号を抜けてほったらかし温泉へ．朝日を見ながら温泉に入り，11時ごろまで仮眠．給油をして河口湖へ戻り，前日ほうとうを食べた真綾さんファンの友人と今度はうどんを食べ（笑），またライブを楽しみ，（中央道が混んでいたのもあって）道志みちを通って帰りました．充実以外のなにものでもなかったですね…また河口湖でライブやってほしいなと思います．</p><h4 id="ライブについて"><a href="#ライブについて" class="headerlink" title="ライブについて"></a>ライブについて</h4><p>真綾さんはこれまで毎回最高のライブを更新してくるのですが，今回も例外ではありませんでした．曲目は以下です．</p><ol><li>Driving in the silence</li><li>Sayonara Santa</li><li>冬ですか</li><li>Rule～色あせない日々～(3&#x2F;30) &#x2F; 木登りと赤いスカート(3&#x2F;31)</li><li>真昼が雪</li><li>みずうみ</li><li>孤独</li><li>03</li><li>カザミドリ</li><li>紅茶</li><li>レコード</li><li>a happy ending</li><li>なりたい</li><li>ボクらの歴史</li><li>CLEAR</li><li>誓い</li><li>シンガーソングライター</li></ol><p>本ライブのタイトルは”The End of The Winter”（写真のタイトルも当然ひっかけです）であり，冬を題材にした曲からじんわり少しずつ春を題材にした曲に変わっていくような感じで，メジャー曲も少なく，会場のピリッとした寒さにとても合うセトリだったと思います．Ruleや紅茶，孤独，03のような「Lucy」「少年アリス」の楽曲が聴けたのは嬉しかったですね．カザミドリ，誓いも聴けて満足以外の言葉が見つかりません．2日目のシンガーソングライターではステージ後ろの扉が開いて，富士山をバックに花火が打ち上がりました．一緒に行った友人も，ライブ自体が初めてだったそうですが，とても良かったと好評でした．誘ってよかったです．</p><p>以上！星ナビ掲載写真の裏話でした．</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 遠征記 </tag>
            
            <tag> 坂本真綾 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rustのrawloader Crateを使ってみる</title>
      <link href="/2019/06/04/00000009-rust-raw-loader-crate/"/>
      <url>/2019/06/04/00000009-rust-raw-loader-crate/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．最近の新月期の土日はなかなかぱっとしない天気ですね．こんな時は遠征記でも書きたいのですが，タイミング的にまだ違うと思ったので，代わりの記事になります．今流行り（？）のRustを使った小ネタです．</p><span id="more"></span><h3 id="Rustとは"><a href="#Rustとは" class="headerlink" title="Rustとは"></a>Rustとは</h3><p>Rustについて言及するのはこのブログでは初めてですが，<a href="https://www.rust-lang.org/">Rust</a>とは，FireFox等を開発するMozillaによる比較的新しいプログラミング言語です．メモリ安全性，C,C++等の言語が吐くバイナリに匹敵する速度，安全性によってもたらされる並行性などに焦点をあてながら開発されており，現在人気の高いプログラミング言語の一つになっています．実は私の研究で開発に携わっているフレームワークはこの言語で開発されています．</p><h3 id="rawloader-Crateとは"><a href="#rawloader-Crateとは" class="headerlink" title="rawloader Crateとは"></a>rawloader Crateとは</h3><p>Crateというのは他の言語でいうところのライブラリのようなものです．crates.ioというページで公開されていて，このCrateがあることで，プログラムの依存ライブラリの管理が容易になっています．その中で，rawloader crateはその名の通り，様々なカメラ製品から出力されるRaw画像や，付随するメタデータを読み込むためのライブラリです．著作権は<a href="https://github.com/pedrocr">pedrocr氏</a>にあります．Python等でも同様のライブラリはあるようですが，Rustではこれくらいしかなさそうなので，実際に読み込んで遊んでみたいと思います．</p><h3 id="実際にRawを読んでみる"><a href="#実際にRawを読んでみる" class="headerlink" title="実際にRawを読んでみる"></a>実際にRawを読んでみる</h3><p>githubにあるサンプルプログラム通りに書いてみますが，自分の場合Canon EOS 6Dから出力されるRaw画像を扱うので，ほんのちょっと工夫が必要です．<br>以下がプログラムです．</p><pre><code class="hljs Rust"><span class="hljs-comment">// main.rs</span><span class="hljs-comment">// c.f. https://github.com/pedrocr/rawloader</span><span class="hljs-keyword">use</span> std::env;<span class="hljs-keyword">use</span> std::fs::File;<span class="hljs-keyword">use</span> std::io::prelude::*;<span class="hljs-keyword">use</span> std::io::BufWriter;<span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> rawloader;<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;    <span class="hljs-keyword">let</span> <span class="hljs-variable">args</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = env::<span class="hljs-title function_ invoke__">args</span>().<span class="hljs-title function_ invoke__">collect</span>();    <span class="hljs-keyword">if</span> args.<span class="hljs-title function_ invoke__">len</span>() != <span class="hljs-number">2</span> &#123;        <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Usage: &#123;&#125; [file]&quot;</span>, args[<span class="hljs-number">0</span>]);        std::process::<span class="hljs-title function_ invoke__">exit</span>(<span class="hljs-number">2</span>);    &#125;    <span class="hljs-keyword">let</span> <span class="hljs-variable">file</span> = &amp;args[<span class="hljs-number">1</span>];    <span class="hljs-keyword">let</span> <span class="hljs-variable">image</span> = rawloader::<span class="hljs-title function_ invoke__">decode_file</span>(file).<span class="hljs-title function_ invoke__">unwrap</span>();    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, image.make);    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, image.model);    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, image.width, image.height);    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, image.cpp);    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">f</span> = BufWriter::<span class="hljs-title function_ invoke__">new</span>(File::<span class="hljs-title function_ invoke__">create</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;.ppm&quot;</span>, file)).<span class="hljs-title function_ invoke__">unwrap</span>());    <span class="hljs-keyword">let</span> <span class="hljs-variable">preamble</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;P3\n&#123;&#125; &#123;&#125;\n&#123;&#125;\n&quot;</span>, image.width, image.height, <span class="hljs-number">16383</span>).<span class="hljs-title function_ invoke__">into_bytes</span>(); <span class="hljs-comment">//.CR2 -&gt; 14bit</span>    f.<span class="hljs-title function_ invoke__">write_all</span>(&amp;preamble).<span class="hljs-title function_ invoke__">unwrap</span>();    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">counter</span> = <span class="hljs-number">0</span>;    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">rawloader</span>::RawImageData::<span class="hljs-title function_ invoke__">Integer</span>(data) = image.data &#123;        <span class="hljs-keyword">for</span> <span class="hljs-variable">pix</span> <span class="hljs-keyword">in</span> data &#123;            <span class="hljs-comment">// interpret data as RG/GB Bayer Array</span>            <span class="hljs-keyword">if</span> (counter / image.width) % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &#123;                <span class="hljs-keyword">if</span> (counter - (counter / image.width) * image.width) % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &#123;                    <span class="hljs-keyword">let</span> <span class="hljs-variable">d</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125; 0 0\n&quot;</span>, pix).<span class="hljs-title function_ invoke__">into_bytes</span>();                    f.<span class="hljs-title function_ invoke__">write_all</span>(&amp;d).<span class="hljs-title function_ invoke__">unwrap</span>();                &#125; <span class="hljs-keyword">else</span> &#123;                    <span class="hljs-keyword">let</span> <span class="hljs-variable">d</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;0 &#123;&#125; 0\n&quot;</span>, pix).<span class="hljs-title function_ invoke__">into_bytes</span>();                    f.<span class="hljs-title function_ invoke__">write_all</span>(&amp;d).<span class="hljs-title function_ invoke__">unwrap</span>();                &#125;            &#125; <span class="hljs-keyword">else</span> &#123;                <span class="hljs-keyword">if</span> (counter - (counter / image.width) * image.width) % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> &#123;                    <span class="hljs-keyword">let</span> <span class="hljs-variable">d</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;0 &#123;&#125; 0\n&quot;</span>, pix).<span class="hljs-title function_ invoke__">into_bytes</span>();                    f.<span class="hljs-title function_ invoke__">write_all</span>(&amp;d).<span class="hljs-title function_ invoke__">unwrap</span>();                &#125; <span class="hljs-keyword">else</span> &#123;                    <span class="hljs-keyword">let</span> <span class="hljs-variable">d</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;0 0 &#123;&#125;\n&quot;</span>, pix).<span class="hljs-title function_ invoke__">into_bytes</span>();                    f.<span class="hljs-title function_ invoke__">write_all</span>(&amp;d).<span class="hljs-title function_ invoke__">unwrap</span>();                &#125;            &#125;            counter += <span class="hljs-number">1</span>;        &#125;    &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-built_in">eprintln!</span>(<span class="hljs-string">&quot;Don&#x27;t know how to process non-integer raw files&quot;</span>);    &#125;&#125;</code></pre><p>if let rawloader::RawImageData::Integer(data) &#x3D; image.data<br>で画像データ(image.data)を新しいデータ(data)に束縛しています．image.dataの型はrawloader::RawImageDataで，これをInteger(Vec&lt;u16&gt;)と解釈します．なのでInteger(data)のdataの型はVec&lt;u16&gt;ですね．他にも，ドキュメンテーションを見るとRawImageDataはFloat(Vec&lt;f32&gt;)もサポートしているっぽいです．<br>6Dのデータは14bitなので，1画素あたり0～16383までの値が16bitのメモリ領域に収まっています．あとはこれをベイヤー配列の色(RG&#x2F;GB)に変換して，書き出しています．もしこれを単に値として書き出して，プリアンブル部をP3からP2(グレースケール)とすれば単に輝度のモノクロベイヤー配列が得られるでしょう．出力形式は今のところ理解しやすいようにテキスト(PNMフォーマット)なので容量はめっちゃ増えます(20MB→100MBくらい)．</p><h3 id="使い方"><a href="#使い方" class="headerlink" title="使い方"></a>使い方</h3><p>ビルドして，</p><pre><code class="hljs plaintext">$ [binary file] [raw file]</code></pre><p>しばらく待つと[raw file].ppmができます．</p><h3 id="結果"><a href="#結果" class="headerlink" title="結果"></a>結果</h3><p>テキトーなRawを突っ込んでGIMPで開いてみました．いい感じですね．</p><p>GIMP（上記プログラムから吐かれた.ppmファイル）<br><img src="/images/00000009-rust-raw-loader-crate/gimp.jpg" alt="gimp"><br>一つわからないのが，画像左と上に謎の暗部ができてしまっていることです．どうやら上記プログラムでサイズ（image.widthとimage.height）が正しく読めていないっぽいのですが，理由がよくわかりません．</p><p>SI8（元の.CR2ファイル）<br><img src="/images/00000009-rust-raw-loader-crate/si8.jpg" alt="si8"></p><p>ベイヤー(GIMPで開いた画像を拡大)<br><img src="/images/00000009-rust-raw-loader-crate/bayer.jpg" alt="bayer"></p><p>ちゃんとベイヤー配列も得られていることがわかりますね．</p><h3 id="TODO-デモザイクもしてみる"><a href="#TODO-デモザイクもしてみる" class="headerlink" title="TODO! デモザイクもしてみる"></a>TODO! デモザイクもしてみる</h3><p>ベイヤーデータが得られたのでデモザイキングをすればカラー画像に変換できそうです．今後やってみたいと思います．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> カメラ </tag>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>よしなに画像の四隅を切り出してみる</title>
      <link href="/2019/05/28/00000008-suitably-corner-make/"/>
      <url>/2019/05/28/00000008-suitably-corner-make/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．もう5月も終盤ということで，時間が経つのは早いですね．<br>16bit tiff形式の画像から四隅（フルサイズと仮定された場合はAPSCの四隅も）を切り出して画像にするプログラムを書きました．（無いものは作ろう）<br>Visual Studio 2017で開発して<a href="https://github.com/dabokun/corner_maker">github</a>にそのまま上げてます（いいのかこれ…？）．同じような環境があるなら.slnを開いて，OpenCVの設定だけ自分の環境に合わせていただければ動くと思います．そうでなく，C++のコンパイラとOpenCVが入った環境なら，以下のプログラムコードを参考にしてください．</p><span id="more"></span><h3 id="モチベーション"><a href="#モチベーション" class="headerlink" title="モチベーション"></a>モチベーション</h3><p><a href="https://twitter.com/richie_astropho">りっちー氏</a>の以下のツイートを見て</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/richie_astropho/status/1131550050721525760"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>割と簡単に書けるのでは？と思ったので書いてみました．</p><h3 id="プログラム"><a href="#プログラム" class="headerlink" title="プログラム"></a>プログラム</h3><p>きれいなプログラムではないですが以下がプログラムです．</p><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdafx.h&quot;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;opencv2/opencv.hpp&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">define</span> PI 3.14159265358979</span><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> &#123; <span class="hljs-type">int</span> x;  <span class="hljs-type">int</span> y; &#125; _point;<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><span class="hljs-function"></span>&#123;    std::string inputfilename, configfilename;    <span class="hljs-keyword">if</span> (argc != <span class="hljs-number">3</span>) &#123;        std::cerr &lt;&lt; <span class="hljs-string">&quot;Usage: corner_maker [filename] [config]&quot;</span> &lt;&lt; std::endl;        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;    inputfilename = argv[<span class="hljs-number">1</span>];    configfilename = argv[<span class="hljs-number">2</span>];    <span class="hljs-comment">// 設定ファイル読み込み</span>    <span class="hljs-function">std::ifstream <span class="hljs-title">ifs</span><span class="hljs-params">(configfilename)</span></span>;        <span class="hljs-keyword">if</span> (!ifs.<span class="hljs-built_in">is_open</span>()) &#123;        std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: Couldn&#x27;t read config: &quot;</span> &lt;&lt; argv[<span class="hljs-number">2</span>] &lt;&lt; std::endl;        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;        <span class="hljs-comment">// 設定ファイル検査</span>    <span class="hljs-type">double</span> f = <span class="hljs-number">0.0</span>;    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> side = <span class="hljs-number">0</span>;    std::string pattern;    <span class="hljs-type">int</span> drawable[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">0</span>&#125;;        ifs &gt;&gt; f &gt;&gt; side &gt;&gt; pattern;        <span class="hljs-keyword">if</span> (f &lt;= <span class="hljs-number">0.0</span>) &#123;        std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: Invalid focal length: &quot;</span> &lt;&lt; f  &lt;&lt; <span class="hljs-string">&quot;mm &gt; 0.0mm.&quot;</span> &lt;&lt; std::endl;        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (side &lt;= <span class="hljs-number">0</span>) &#123;        std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: Invalid side pixels: &quot;</span> &lt;&lt; side &lt;&lt; <span class="hljs-string">&quot; &gt; 0.&quot;</span> &lt;&lt; std::endl;        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pattern != <span class="hljs-string">&quot;full-size&quot;</span> &amp;&amp; pattern != <span class="hljs-string">&quot;apsc&quot;</span>) &#123;        std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: Invalid angle pattern &quot;</span> &lt;&lt; pattern  &lt;&lt; <span class="hljs-string">&quot; = full-size or apsc.&quot;</span>&lt;&lt; std::endl;        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;    <span class="hljs-keyword">if</span> (pattern == <span class="hljs-string">&quot;full-size&quot;</span>) &#123;        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; ++i) &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">5</span>; ++j) &#123;                ifs &gt;&gt; drawable[i][j];                <span class="hljs-keyword">if</span> (ifs.<span class="hljs-built_in">eof</span>() &amp;&amp; i != <span class="hljs-number">4</span> &amp;&amp; j != <span class="hljs-number">4</span>) &#123;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: Lack of drawing squares.&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;     if use full-size pattern, describe in your config as follows&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;    1 1 1 1 1&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;    1 1 1 1 1&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;    1 1 1 1 1&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;    1 1 1 1 1&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;    1 1 1 1 1&quot;</span> &lt;&lt; std::endl;                    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;                &#125;            &#125;        &#125;    &#125;    <span class="hljs-keyword">else</span> &#123;        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; ++i) &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; ++j) &#123;                ifs &gt;&gt; drawable[i][j];                <span class="hljs-keyword">if</span> (ifs.<span class="hljs-built_in">eof</span>() &amp;&amp; i != <span class="hljs-number">2</span> &amp;&amp; j != <span class="hljs-number">2</span>) &#123;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: Lack of drawing squares.&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;     if use apsc pattern, describe in your config as follows&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;    1 1 1&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;    1 1 1&quot;</span> &lt;&lt; std::endl;                    std::cerr &lt;&lt; <span class="hljs-string">&quot;    1 1 1&quot;</span> &lt;&lt; std::endl;                    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;                &#125;            &#125;        &#125;    &#125;        <span class="hljs-comment">// 画像読み込み</span>    cv::Mat image = cv::<span class="hljs-built_in">imread</span>(inputfilename, <span class="hljs-number">2</span> | <span class="hljs-number">4</span>);    <span class="hljs-keyword">if</span> (image.data == <span class="hljs-literal">NULL</span>) &#123;        std::cerr &lt;&lt; <span class="hljs-string">&quot;Error: Couldn&#x27;t read image file &quot;</span> &lt;&lt; inputfilename &lt;&lt; std::endl;        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;        <span class="hljs-type">int</span> xsize = image.cols, ysize = image.rows;    <span class="hljs-type">int</span> newxsize, newysize;    <span class="hljs-comment">// 画像が縦長の場合，横長（反時計回りに90度回す）に変換</span>    <span class="hljs-keyword">if</span> (xsize &lt; ysize) &#123;        newxsize = ysize;        newysize = xsize;    &#125;    <span class="hljs-keyword">else</span> &#123;        newxsize = xsize;        newysize = ysize;    &#125;    cv::Mat data = cv::Mat::<span class="hljs-built_in">zeros</span>(newysize, newxsize, CV_16UC3);        <span class="hljs-keyword">if</span> (xsize &lt; ysize) &#123;        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; ysize; ++j) &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; xsize; ++i) &#123;                data.<span class="hljs-built_in">at</span>&lt;cv::Vec3w&gt;(xsize - i - <span class="hljs-number">1</span>, j) = image.<span class="hljs-built_in">at</span>&lt;cv::Vec3w&gt;(j, i);            &#125;        &#125;    &#125;    <span class="hljs-keyword">else</span> &#123;        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; ysize; ++j) &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; xsize; ++i) &#123;                data.<span class="hljs-built_in">at</span>&lt;cv::Vec3w&gt;(j, i) = image.<span class="hljs-built_in">at</span>&lt;cv::Vec3w&gt;(j, i);            &#125;        &#125;    &#125;    <span class="hljs-comment">// 元画像のメモリを開放</span>    image.<span class="hljs-built_in">release</span>();    xsize = newxsize;    ysize = newysize;    <span class="hljs-comment">// 不要な処理．焦点距離から，1画素あたりの角度を算出．</span>    <span class="hljs-type">double</span> horizontal = (pattern == <span class="hljs-string">&quot;full-size&quot;</span>) ? <span class="hljs-number">2.0</span> * (<span class="hljs-built_in">atan</span>(<span class="hljs-number">36.0</span>  / (<span class="hljs-number">2.0</span> * f)) * <span class="hljs-number">180</span> / PI)        : <span class="hljs-number">2.0</span> * (<span class="hljs-built_in">atan</span>(<span class="hljs-number">23.4</span> / (<span class="hljs-number">2.0</span> * f)) * <span class="hljs-number">180</span> / PI);    std::cout &lt;&lt; horizontal * <span class="hljs-number">3600.0</span> / (<span class="hljs-type">double</span>)xsize &lt;&lt; <span class="hljs-string">&quot; arcsec / pixel&quot;</span> &lt;&lt; std::endl;    cv::Mat output = cv::Mat::<span class="hljs-built_in">zeros</span>(side * ((pattern == <span class="hljs-string">&quot;full-size&quot;</span>) ? <span class="hljs-number">5</span> : <span class="hljs-number">3</span>), side * ((pattern == <span class="hljs-string">&quot;full-size&quot;</span>) ? <span class="hljs-number">5</span> : <span class="hljs-number">3</span>), CV_16UC3);    <span class="hljs-comment">//画像の中央の座標</span>    _point center = &#123; (xsize / <span class="hljs-number">2</span>), (ysize / <span class="hljs-number">2</span>) &#125;;    <span class="hljs-comment">// 切り出しの開始点（左上の点）をpush</span>    std::queue&lt;_point&gt; start_points;    <span class="hljs-keyword">if</span> (pattern == <span class="hljs-string">&quot;full-size&quot;</span>) &#123;        start_points.<span class="hljs-built_in">push</span>(Point&#123; <span class="hljs-number">0</span>, <span class="hljs-number">0</span> &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">6.3</span> / <span class="hljs-number">36</span>), <span class="hljs-number">0</span> &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(center.x - side / <span class="hljs-number">2.0</span>), <span class="hljs-number">0</span> &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">29.7</span> / <span class="hljs-number">36.0</span> - side), <span class="hljs-number">0</span> &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; xsize - (<span class="hljs-type">int</span>)side, <span class="hljs-number">0</span> &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; <span class="hljs-number">0</span>, (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">3.65</span> / <span class="hljs-number">24.0</span>)&#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">6.3</span> / <span class="hljs-number">36</span>), (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">3.65</span> / <span class="hljs-number">24.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(center.x - side / <span class="hljs-number">2.0</span>), (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">3.65</span> / <span class="hljs-number">24.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">29.7</span> / <span class="hljs-number">36.0</span> - side), (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">3.65</span> / <span class="hljs-number">24.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; xsize - (<span class="hljs-type">int</span>)side, (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">3.65</span> / <span class="hljs-number">24.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; <span class="hljs-number">0</span>,(<span class="hljs-type">int</span>)(center.y - side / <span class="hljs-number">2.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">6.3</span> / <span class="hljs-number">36</span>), (<span class="hljs-type">int</span>)(center.y - side / <span class="hljs-number">2.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(center.x - side / <span class="hljs-number">2.0</span>), (<span class="hljs-type">int</span>)(center.y - side / <span class="hljs-number">2.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">29.7</span> / <span class="hljs-number">36.0</span> - side), (<span class="hljs-type">int</span>)(center.y - side / <span class="hljs-number">2.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; xsize - (<span class="hljs-type">int</span>)side, (<span class="hljs-type">int</span>)(center.y - side / <span class="hljs-number">2.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; <span class="hljs-number">0</span>, (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">20.35</span> / <span class="hljs-number">24.0</span> - side) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">6.3</span> / <span class="hljs-number">36</span>), (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">20.35</span> / <span class="hljs-number">24.0</span> - side) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(center.x - side / <span class="hljs-number">2.0</span>), (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">20.35</span> / <span class="hljs-number">24.0</span> - side) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">29.7</span> / <span class="hljs-number">36.0</span> - side), (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">20.35</span> / <span class="hljs-number">24.0</span> - side) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; xsize - (<span class="hljs-type">int</span>)side, (<span class="hljs-type">int</span>)(ysize * <span class="hljs-number">20.35</span> / <span class="hljs-number">24.0</span> - side) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; <span class="hljs-number">0</span>, ysize - (<span class="hljs-type">int</span>)side &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">6.3</span> / <span class="hljs-number">36</span>), ysize - (<span class="hljs-type">int</span>)side &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(center.x - side / <span class="hljs-number">2.0</span>), ysize - (<span class="hljs-type">int</span>)side &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(xsize * <span class="hljs-number">29.7</span> / <span class="hljs-number">36.0</span> - side), ysize - (<span class="hljs-type">int</span>)side &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; xsize - (<span class="hljs-type">int</span>)side, ysize - (<span class="hljs-type">int</span>)side &#125;);    &#125;    <span class="hljs-keyword">else</span> &#123;        start_points.<span class="hljs-built_in">push</span>(Point&#123; <span class="hljs-number">0</span>, <span class="hljs-number">0</span> &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(center.x - side / <span class="hljs-number">2.0</span>), <span class="hljs-number">0</span>&#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; xsize - (<span class="hljs-type">int</span>)side, <span class="hljs-number">0</span>&#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; <span class="hljs-number">0</span>, (<span class="hljs-type">int</span>)(center.y - side / <span class="hljs-number">2.0</span>)&#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(center.x - side / <span class="hljs-number">2.0</span>), (<span class="hljs-type">int</span>)(center.y - side / <span class="hljs-number">2.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; xsize - (<span class="hljs-type">int</span>)side, (<span class="hljs-type">int</span>)(center.y - side / <span class="hljs-number">2.0</span>) &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123;<span class="hljs-number">0</span>, ysize - (<span class="hljs-type">int</span>)side &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; (<span class="hljs-type">int</span>)(center.x - side / <span class="hljs-number">2.0</span>), ysize - (<span class="hljs-type">int</span>)side &#125;);        start_points.<span class="hljs-built_in">push</span>(Point&#123; xsize - (<span class="hljs-type">int</span>)side, ysize - (<span class="hljs-type">int</span>)side &#125;);    &#125;    <span class="hljs-comment">// 出力画像の描画</span>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> c = <span class="hljs-number">0</span>; c &lt; (pattern == <span class="hljs-string">&quot;full-size&quot;</span> ? <span class="hljs-number">5</span> : <span class="hljs-number">3</span>) ; ++c) &#123;        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> r = <span class="hljs-number">0</span>; r &lt; (pattern == <span class="hljs-string">&quot;full-size&quot;</span> ? <span class="hljs-number">5</span> : <span class="hljs-number">3</span>); ++r) &#123;            _point start = start_points.<span class="hljs-built_in">front</span>(); start_points.<span class="hljs-built_in">pop</span>();            <span class="hljs-keyword">if</span> (drawable[c][r] == <span class="hljs-number">1</span>) &#123;                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; (<span class="hljs-type">int</span>)side; ++j) &#123;                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; (<span class="hljs-type">int</span>)side; ++i) &#123;                        output.<span class="hljs-built_in">at</span>&lt;cv::Vec3w&gt;(c * side + j, r * side + i) = data.<span class="hljs-built_in">at</span>&lt;cv::Vec3w&gt;(start.y + j, start.x + i);                    &#125;                &#125;            &#125;            <span class="hljs-keyword">else</span> &#123;                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; (<span class="hljs-type">int</span>)side; ++j) &#123;                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; (<span class="hljs-type">int</span>)side; ++i) &#123;                        output.<span class="hljs-built_in">at</span>&lt;cv::Vec3w&gt;(c * side + j, r * side + i) = &#123; <span class="hljs-number">0xffff</span>, <span class="hljs-number">0xffff</span>, <span class="hljs-number">0xffff</span> &#125;;                    &#125;                &#125;            &#125;        &#125;    &#125;    cv::<span class="hljs-built_in">imwrite</span>(<span class="hljs-string">&quot;output.tif&quot;</span>, output);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><p>あまり簡単なコードではなくなっちゃいましたが，基本的に</p><ul><li>設定ファイルを読み込む（切り出す正方形の一辺は？フルサイズ？APS-C？）</li><li>画像を読み込む</li><li>画像が縦長なら反時計回りに90度回して，横長にする</li><li>切り出し開始点を計算</li><li>描画して画像に出力<br>というのをやっているだけです．<br>設定ファイルは以下のような書式をとります．</li></ul><pre><code class="hljs plaintext">135       // 焦点距離（0より大きな値なら特にプログラムに影響を与えません）300       // 切り出す正方形の一辺の画素数full-size // フルサイズかAPS-Cか？フルサイズなら以下に5×5，APS-Cなら3×3の行列を書きます．1 0 1 0 1 // どの部分が描画されるか？ 0 1 1 1 0 // 一番外側四隅がフルサイズ，一つ内側の四隅がAPS-C、中央は中央の正方形1 1 1 1 1 // 1 -&gt; 描画する / 0 -&gt; 描画されない0 1 1 1 01 0 1 0 1</code></pre><h3 id="使い方"><a href="#使い方" class="headerlink" title="使い方"></a>使い方</h3><p>ビルドして，以下のコマンドで動きます．</p><pre><code class="hljs plaintext">$ corner_maker [tiffファイル名] [設定ファイル名]</code></pre><h3 id="結果"><a href="#結果" class="headerlink" title="結果"></a>結果</h3><p>入力画像<br><img src="/images/00000008-suitably-corner-make/input.jpg" alt="入力画像"><br>出力画像<br><img src="/images/00000008-suitably-corner-make/output.jpg" alt="出力画像"><br>よしなに切り出せました．やったー．</p><h3 id="リミテーション"><a href="#リミテーション" class="headerlink" title="リミテーション"></a>リミテーション</h3><ul><li>16bit tiffしか読み込めません．</li><li>設定ファイルは簡単なエラーハンドリングしかしてません．変な入力を受けてクラッシュする可能性は大いにあります．</li><li>フルサイズとAPS-Cしか仮定できません．フルサイズは36mm×24mm，APS-Cは23.4mm×16.7mmを仮定しています．</li></ul>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>よしなにスターエンハンスしてみる</title>
      <link href="/2019/05/18/00000007-suitably-star-enhance/"/>
      <url>/2019/05/18/00000007-suitably-star-enhance/</url>
      
        <content type="html"><![CDATA[<h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．先日行ったあいあい岬で撮影したアンタレス付近を編集していて，こんなことをやってみましたので，その紹介記事です．</p><span id="more"></span><h3 id="モチベーション"><a href="#モチベーション" class="headerlink" title="モチベーション"></a>モチベーション</h3><p>Twitterでフォローしている<a href="https://twitter.com/pochomskii">nagahiro</a>さんの<a href="http://snct-astro.hatenadiary.jp/entry/2019/05/16/083952">こちら</a>の記事を見て，初めて”Ringing”という名前がついていることを知ったのですが，これは天体写真を編集しているとよくある現象です．例えば，Ps，Lrの「明るさの最小値」やSI8の「スターシャープ」をかけて星雲を強調していると，微光星の周りが暗く落ち込んでしまうということがよく起きます．画面上で見たり小さい写真用紙に印刷する時はあまり気になりませんが，A4写真用紙等に印刷すると主に星雲の中でかなり気になるレベルで影響が出てきます（僕の場合だけかもしれませんが笑）．これをなんとかしたいというのが今回のモチベーションになります．</p><h3 id="手法"><a href="#手法" class="headerlink" title="手法"></a>手法</h3><p>nagahiroさんはこれをハイパスを使って，かなりうまく補正していますね．私はそういった前提知識がなかったので，別の方法を考えてみました．具体的には以下の通りです．</p><ul><li>星雲の中の微光星を見た時，その輝度や彩度は内側から「微光星（めっちゃ明るい，彩度低）」→「Ringing（暗い，彩度低）」→「星雲（微光星ほどではないが明るく，かつ彩度が高い）」のようになっている，という仮定をおきます．</li><li>よって，テキトーなフィルタを使って周辺の画素を使って埋めてやる（何回か繰り返す）．</li><li>具体的にはRingingが起こっている画素を中心とした5×5のフィルタで，彩度が高い画素トップ9くらいを選んで，その平均をとってやる．<br><img src="/images/00000007-suitably-star-enhance/filter.jpg"><br>例えばこんな感じの5×5の並びがあった時に，Ringing Pixelは星雲あたりの黄色っぽい画素を使って置き換えてやればいい感じになるんじゃないかな？というアイデアです．</li></ul><p>とまあこんな感じになります．それでは実装していきます．</p><h3 id="プログラム"><a href="#プログラム" class="headerlink" title="プログラム"></a>プログラム</h3><p>実装にはC++（Visual Studio 2017に入ってるコンパイラ）とOpenCVを使います．OpenCVの導入については「<a href="https://qiita.com/h-adachi/items/aad3401b8900438b2acd">OpenCV 4.1.0をVisual Studio 2019から使用する時の手順</a>」あたりを参考にどうぞ．</p><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdafx.h&quot;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;opencv2/opencv.hpp&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sstream&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> cv;<span class="hljs-meta">#<span class="hljs-keyword">define</span> INF 10000000</span><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span></span><span class="hljs-function"></span>&#123;    string filename = <span class="hljs-string">&quot;input.tif&quot;</span>;    Mat image = <span class="hljs-built_in">imread</span>(filename, <span class="hljs-number">2</span> | <span class="hljs-number">4</span>);        <span class="hljs-comment">//画像読込み</span>    <span class="hljs-keyword">if</span> (image.data == <span class="hljs-literal">NULL</span>) &#123;         cerr &lt;&lt; <span class="hljs-string">&quot;Error: Couldn&#x27;t read file &quot;</span> &lt;&lt; filename &lt;&lt; endl;        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;    &#125;    <span class="hljs-type">int</span> xsize = image.cols;    <span class="hljs-type">int</span> ysize = image.rows;    <span class="hljs-type">int</span> th = <span class="hljs-number">10000</span>; <span class="hljs-comment">//輝度のスレッショルド</span>    Mat output = Mat::<span class="hljs-built_in">zeros</span>(ysize, xsize, CV_16UC3); <span class="hljs-comment">//16bit tifの場合こう</span>    <span class="hljs-type">double</span> sat[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>] = &#123; <span class="hljs-number">0.0</span> &#125;; <span class="hljs-comment">//彩度</span>    <span class="hljs-type">int</span> rank[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>] = &#123; <span class="hljs-number">0</span> &#125;; <span class="hljs-comment">//彩度のランク(大きいほど明るい)</span>    ushort maxc, minc;    maxc = -INF, minc = INF;    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> t = <span class="hljs-number">0</span>; t &lt; <span class="hljs-number">30</span>; t++) &#123; <span class="hljs-comment">//30回操作</span>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; ysize; j++) &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; xsize; i++) &#123;                <span class="hljs-keyword">if</span> (image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">0</span>] &lt; th  &amp;&amp; image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">1</span>] &lt; th &amp;&amp; image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">2</span>] &lt; th &amp;&amp; j &gt; <span class="hljs-number">2</span> &amp;&amp; i &gt; <span class="hljs-number">2</span> &amp;&amp; j &lt; ysize - <span class="hljs-number">2</span> &amp;&amp; i &lt; xsize - <span class="hljs-number">2</span>) &#123; <span class="hljs-comment">//Ringingが起きているなら</span>                    <span class="hljs-type">int</span> lc, mc;                    <span class="hljs-keyword">for</span> (lc = <span class="hljs-number">0</span>; lc &lt; <span class="hljs-number">5</span>; lc++) &#123;                        <span class="hljs-keyword">for</span> (mc = <span class="hljs-number">0</span>; mc &lt; <span class="hljs-number">5</span>; mc++) &#123;                            rank[lc][mc] = <span class="hljs-number">0</span>;                        &#125;                    &#125;                    lc = mc = <span class="hljs-number">0</span>;                    <span class="hljs-comment">// 周辺画素の彩度を計算</span>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = j - <span class="hljs-number">2</span>; l &lt;= j + <span class="hljs-number">2</span>; l++) &#123;                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> m = i - <span class="hljs-number">2</span>; m &lt;= i + <span class="hljs-number">2</span>; m++) &#123;                            maxc = <span class="hljs-built_in">max</span>(image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(l, m)[<span class="hljs-number">0</span>], image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(l, m)[<span class="hljs-number">1</span>]);                            minc = <span class="hljs-built_in">min</span>(image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(l, m)[<span class="hljs-number">0</span>], image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(l, m)[<span class="hljs-number">1</span>]);                            maxc = <span class="hljs-built_in">max</span>(maxc, image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(l, m)[<span class="hljs-number">2</span>]);                            minc = <span class="hljs-built_in">min</span>(minc, image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(l, m)[<span class="hljs-number">2</span>]);                            sat[lc][mc] = maxc == <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : ((<span class="hljs-type">double</span>)(maxc - minc) / (<span class="hljs-type">double</span>)maxc);                            mc++;                        &#125;                        lc++;                        mc = <span class="hljs-number">0</span>;                        maxc = -INF, minc = INF;                    &#125;                    <span class="hljs-comment">// 彩度でランキング</span>                    <span class="hljs-keyword">for</span> (lc = <span class="hljs-number">0</span>; lc &lt; <span class="hljs-number">5</span>; lc++) &#123;                        <span class="hljs-keyword">for</span> (mc = <span class="hljs-number">0</span>; mc &lt; <span class="hljs-number">5</span>; mc++) &#123;                            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> lcc = <span class="hljs-number">0</span>; lcc &lt; <span class="hljs-number">5</span>; lcc++) &#123;                                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> mcc = <span class="hljs-number">0</span>; mcc &lt; <span class="hljs-number">5</span>; mcc++) &#123;                                    <span class="hljs-keyword">if</span> (!(lc == lcc &amp;&amp; mc == mcc) &amp;&amp; sat[lc][mc] &gt; sat[lcc][mcc]) &#123;                                        rank[lc][mc]++;                                    &#125;                                &#125;                            &#125;                        &#125;                    &#125;                    lc = mc = <span class="hljs-number">0</span>;                    <span class="hljs-comment">// フィルタを使って，周辺画素から置換</span>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = j - <span class="hljs-number">2</span>; l &lt;= j + <span class="hljs-number">2</span>; l++) &#123;                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> m = i - <span class="hljs-number">2</span>; m &lt;= i + <span class="hljs-number">2</span>; m++) &#123;                            <span class="hljs-keyword">if</span> (rank[lc][mc] &gt;= <span class="hljs-number">16</span>) &#123;                                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">3</span>; k++) &#123;                                    output.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[k] += image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(l, m)[k] / <span class="hljs-number">9</span>;                                &#125;                            &#125;                            mc++;                        &#125;                        mc = <span class="hljs-number">0</span>;                        lc++;                    &#125;                &#125;<span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">//Ringingが起きていなければ無視</span>                    output.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">0</span>] = image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">0</span>];                    output.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">1</span>] = image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">1</span>];                    output.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">2</span>] = image.<span class="hljs-built_in">at</span>&lt;Vec3w&gt;(j, i)[<span class="hljs-number">2</span>];                &#125;            &#125;        &#125;    &#125;    <span class="hljs-built_in">imwrite</span>(<span class="hljs-string">&quot;output.tif&quot;</span>, output);    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre><h3 id="結果"><a href="#結果" class="headerlink" title="結果"></a>結果</h3><p>結果は冒頭のツイートの通りで，落込みの完全解消までには至りませんでしたが，SI8のスターエンハンスに比べ，微光星の主張が激しすぎず，かつ周辺の彩度を保ったまま落込みを補完することができたんじゃないかなあと思います．画面上ではあまり違いが分かりませんが，この後少し微調整して印刷したところ，Ringingに見られるぼつぼつがある程度解消され，かなり有効だということがわかりました．</p><p>処理前<br><img src="/images/00000007-suitably-star-enhance/beforeprocess.jpg"></p><p>処理後<br><img src="/images/00000007-suitably-star-enhance/afterprocess.jpg"></p><p>いかがでしょうか，黒く落ちすぎている部分が，周りの星雲の色でもって塗られていることがわかりますね．</p><h3 id="得られた知見と感想"><a href="#得られた知見と感想" class="headerlink" title="得られた知見と感想"></a>得られた知見と感想</h3><p>プログラムについてですが，16bit tiff形式を読書きするやり方がわからず少し時間を使いました．imreadの引数や行列の定義はプログラムの通りですし，画素へのアクセスはimage.at&lt;Vec3w&gt;(y, x)[k]</code>でいけるっぽいです．<br>上記のプログラムで何回か(30回)フィルタをかませていますが，繰り返してもあまり意味がありませんでした．それと，今回は輝度だけでRingingが起きている画素かを判断していて，これはよくないですね．例えば暗黒星雲をRingingが起きている画素と判断し，暗黒星雲のある部分だけ明るくなってしまうということが起きました（以下画像参照）．<br><img src="/images/00000007-suitably-star-enhance/effect_to_dark_nebula.jpg"></p><p>ハイパスを使ったやり方も楽しそうなので，原理を勉強しつつ今後実装したいと考えています．</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ブログを移行します &amp; はじめまして</title>
      <link href="/2019/05/11/hello/"/>
      <url>/2019/05/11/hello/</url>
      
        <content type="html"><![CDATA[<p>こんにちは．astr0dab0と申します．<br>神奈川でのんびり情報系大学院生をやりながら、たまに気ままに天体写真を撮影しています。<br>詳しくは<a href="https://dabokun.github.io/about/">ABOUTページ</a>を御覧ください．</p><p>もともと更新していた<a href="https://blogs.yahoo.co.jp/astr0dab0/">yahooブログ</a>が12月あたりで閉鎖されてしまうとのことで，ブログ兼HP機能をこちらで引き継ごうと思っています．<br>天文学や天体写真や撮影用の機材，遠征記，画像処理のお勉強などなどについての話をメインにのんびり更新していきたいと思います．<br>どのみち更新頻度はそれほど高くはないと思いますが，よろしくお願いいたします．</p><p>あ，<a href="https://twitter.com/astrodabo">Twitter</a>もやっていますよ…</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>天体写真とその処理過程について【後編】</title>
      <link href="/2019/03/15/00000005-astrophoto-and-processing-2/"/>
      <url>/2019/03/15/00000005-astrophoto-and-processing-2/</url>
      
        <content type="html"><![CDATA[<p><strong>注意: この記事は過去の記事を移行したものです．</strong><br><br><br></p><h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>こんにちは．先程日本天文学会での発表を終えてきましたので，その内容を簡単にまとめておきたいと思います．そして，だいぶ前の記事<br><a href="/2018/12/28/00000001-astrophoto-and-processing/"><strong>天体写真とその処理過程について【前編】</strong></a><br>の伏線をここで回収したいと思います．なぜこのタイミングなのか？それは読み進めて行けばわかります笑</p><span id="more"></span><h3 id="発表内容"><a href="#発表内容" class="headerlink" title="発表内容"></a>発表内容</h3><p>今回発表してきた内容は，主にAFLAK（Advanced Framework for Learning Astrophysical Knowledge）と呼ばれる，天体データ処理用フレームワークについてでした．インストール方法等はこちら（<a href="http://aflak.jp/">http://aflak.jp</a>）をご覧ください．</p><h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>最近，銀河等の天体に対して，面分光と呼ばれる技術を用いて得られる多波長データと呼ばれる類のデータを解析することが天文学者の間で盛んになされています．この多波長データというのは，通常RGBの3チャンネルを持つ写真のデータとは異なり，波長方向に数千～数万もの大きな次元サイズをもつデータを指します．それぞれのチャンネルの波長幅はなんと1nmほど，天体写真を撮っている方であれば，「究極のナローバンド」と考えれば良いでしょう笑．このような大規模かつ高次元なデータを扱うソフトウェアは従来から存在しますが，基本的にコマンドベースのもの，あるいは解析内容を天文学者自らがプログラムの形で記述するようなものでした．</p><h4 id="提案手法（AFLAK）"><a href="#提案手法（AFLAK）" class="headerlink" title="提案手法（AFLAK）"></a>提案手法（AFLAK）</h4><p>そこで，AFLAKと呼ばれるフレームワークでは，ビジュアルプログラミング環境を提供することによって，ユーザがより効率的に解析を行うことを支援します．以下のようなメリットが挙げられます．</p><ul><li>パラメタの変更などが即座に反映され，ユーザに対する迅速なフィードバックを行う．</li><li><font color="red"><strong>解析そのものの内容の管理が容易となる．</strong></font></li></ul><p>以下のスクリーンショットをご覧ください．画面上側に何やらグラフのようなもの，画面下側に２つの出力結果が見て取れます．画面上側のエディタ（この中にあるそれぞれのボックスをノードと呼びまして，エディタ全体をノードエディタと呼びます）をユーザは操作し所望の解析を行います．データは左から右へと流れていくと考えてください．まずいちばん左上のPathというノードで，ファイルを選択します．このソフトウェアではfits形式のファイルを扱うことになっているので，選択したファイルを次のopen_fitsというノードで開きます．fitsにはHDUというデータユニット（データの塊です）が存在しており，複数の天体データを保持できるようになっているので，次のfits_to_imageというノードでどのデータを取り出すかを選択しています．この時点で，今回赤経赤緯および波長方向の三次元のデータになっていますので，ここからextract_waveノードとslice_one_frameノードを使って，結果のイメージを出しています．前者が輝度のスペクトル，後者が，ある波長でスライスした時の輝度の二次元イメージになります．</p><p><img src="/images/00000005-astrophoto-and-processing-2/aflak.png"></p><p>ここで，例えばslice_one_frameノードの中のパラメタを変更すると，フレームの画像はすぐに更新されます．これがユーザに対する迅速なフィードバックです．<font color="red"><strong>また，解析自体の内容はこのグラフの構造自体が持っています．このようなグラフ構造をデータとして保存するのはさほど難しくはないです．</strong></font></p><p>…さて，発表ではこのあと私が実装した少し複雑な解析例を提示し，天文学者が解析したものと同様の結果が出ましたということを言って，その他の解析例や課題を示して終わったわけです．</p><p>で，この研究に携わり始めた頃から，ずっと自分の中で考えていたことがあるんです．<br><br><br><br><br></p><p><font color="red"> ……これ，天体写真の画像処理にもめちゃくちゃ使えるのでは？</font></p><p>重要なのは，私が先程から赤で書いている部分，<br>「<font color="red"><strong>解析そのものの内容の管理が容易となる．</strong></font>」という部分です．これの「<font color="red"><strong>解析</strong></font>」を「<font color="red"><strong>現像</strong></font>」と読み替えると，理解していただけるのではないでしょうか．私が<a href="/2018/12/28/00000001-astrophoto-and-processing/">前回の記事</a>で指摘した内容を簡単にまとめるとこうです．</p><ul><li>編集過程は天体写真において，それが科学であろうと芸術であろうと重要ではないか．</li><li>にも関わらず，編集過程を管理している人は限りなく少ない．</li><li>それは人間の問題ではなく，<font color="red">ソフトウェア側の問題</font>である．もともと，ソフトウェアがそういったことを管理すべきだった．</li><li>解決しようという動きがある．例えばステライメージ8にはワークフローの機能が追加されている．ただし，結局レイヤー的な処理にとどまるものと言え，複雑な処理に対応できない可能性がある．</li></ul><p>私は，このAFLAKがもつ特長は，この<font color="red">ソフトウェア側の問題を根本的に解決するものとなりえる</font>と考えています．このソフトウェアでは解析の「分岐」を表現することができるんです．これがステライメージ8との違いだと考えます．<br>例えば画像をRGB分解して，あるチャンネルだけに処理をかけて合成するということ，そしてその間にかけられる処理はユーザが自由に表現できるんです．そして，何より，<font color="red">その自由な表現を，グラフの形で保存し，共有することができます（当然公開の自由はあると思いますが）．</font></p><p>例えば，保存されたあのあこがれの人の処理過程を使って，自分の写真で開いて試してみよう．これはパクりを教唆するわけではありません．むしろ，<font color="red">あのあこがれの人に近づくには何が必要なのか，かえっては，自分なりの表現には何が必要なのかというヒントを得る．</font>こういったことができるようになると考えます．<font color="red">科学において解析の内容を保持することは重要ですが，芸術においても重要なのではないでしょうか．</font></p><p>もちろん，このソフトウェアは未だ天体写真ではなく，天文学用のデータに特化したものです．どのような処理ノード，パラメタがあれば写真の用途にも使えるのかは，まだまだ検討していかなければならない段階であると思います．<br>しかし，このソフトウェアは，天体写真の「複雑な現像処理を必要とする」という特性を埋めるものであり，<font color="red">天体写真処理に革命を起こす</font>のではないかと考えています．なぜなら，もし世に出ることがあれば，それは「<font color="red">天体写真は各人が持っている画像処理の腕では実質決まらない</font>」世の訪れを示唆するものであるからです．</p><p>コメント，批判，提案等あるかもしれませんが，是非お願いいたします．<br><br><br></p><p>注意:以下コメントになります．</p><p>ぐっち:</p><blockquote><p>現状は「天体写真は各人が持っている画像処理の腕で実質決まってしまう」事が多いので画像処理の習得に挫折する事で天文(あるいは天体写真撮影)から遠ざかってしまう人も多いと思います｡<br>“いい天体写真”“すごい天体写真”(この定義が難しいですが)に仕上げるために施された処理過程を解析し､再現可能な処理に再構築することができれば､<br>「天体写真は各人が持っている画像処理の腕では実質決まらない」世<br>が来るかもしれません｡それこそDeepLeaningの世界でしょうか｡<br>期待しています｡</p></blockquote><br>astrodabo:> ぐっちさんコメントありがとうございます。情報工学を学んでいる人間として本文のような文章を書きました。機械学習が多くの分野で流行っていることや、機械学習による恩恵は大きい、というのは事実です。が、このような芸術的な側面ももつ領域において、なんでもコンピュータにやらせる、というのは、私としてはちょっと違うのかなと思います。「天体写真は各人が持っている画像処理の腕では実質決まらない」というのは、良くも悪くも、副産物のようなものだと考えています。処理が上手い人にとってそのようなことは受け入れがたいかもしれないという意味ではデメリットにもなりますし、逆に画像処理の敷居が下がるのはメリットだとも思います。それよりも私が望んでいるのは、処理プロセスを可視化することによって「自分なりの表現を見つける機会が増える」ことです。従来のレイヤー的な処理しかできないソフトウェアでは発見しにくい自分の表現の利点や欠点を発見する機会が増えることで、天体写真という趣味がさらに深まればいいなと考えています。<br>ぐっち:> 4月に入ってしまいましたが､時折思い出したときにこの件について考えていました｡自動車のオートマが出てきたとき､この(当時の)新技術に対してかなりネガティブな批評や反感があったことと重なりました｡｢車を操る楽しみがなくなる｣｢変速段数が少ない｣｢燃費が悪い｣などけっこう散々でした｡開発を続けてきたことと意識が変わってきたこともあり､今は自動車は大半がオートまでマニュアルの方が少なくなってしまいました｡<br>天体写真の画像処理については､・再現性(同じ素材に対して誰が､何度やっても同じ結果が出せる)､・汎用性(異なる対象に対しても同じプロセスが適用できる)､・普遍性(特定のソフトやそのバージョンに依存しない)を持った手法が確立できれば､天体写真における画像処理の比重が少なくなるのではないかと思います｡<br>これは撮影の比重が相対的に大きくなることを意味するので､撮影地､光学系､カメラ等の差や撮影時の構図の取り方や追尾の手法など､｢天体撮影｣の本質で工夫する領域が増えるのではないかと思います｢撮影｣した結果が｢画像処理｣のインプットになり､この｢画像処理｣のアウトプットを使って作者の好みによる｢最後の仕上げ｣を行うようなプロセスで天体写真ができるようになれば楽しいかな､と思います｡<br>astrodabo:> ぐっちさんコメントありがとうございます。新年度が始まって忙しくなかなかブログを見れておらず遅くなって申し訳ありません。<br>このパラダイムはもともとゲーム開発や3Dモデリング/シェーディング等の分野で使われていまして、それを画像処理フローに輸入できないかという提案なので、(確かに計算資源が近年豊富となってきているというバックグラウンドはありますが)ATのような目新しいテクニックというわけではないですね。ただ何か新しいことをしようとした時に似たような指摘や批判は免れないと考えています。<br>再現性、汎用性、普遍性にプラスして、本文で記述し忘れていた重要なこととして、「ユーザが思いついた処理を即座にフローの形で表現できる」、すなわちラピッドプロトタイピング可能性というものも挙げられますね。<br>撮影の比重が重くなるというのは本当にその通りで、構図、追尾、写真の内容で「何か面白いことをする」ということでもって、今よりももっと天体写真の表現の幅が広がればいいな、と考えています。]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> SI8 </tag>
            
            <tag> Adobe Photoshop </tag>
            
            <tag> Adobe Lightroom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日本天文学会2019年春季年会で発表します．</title>
      <link href="/2019/03/01/00000004-astro-meeting-spring/"/>
      <url>/2019/03/01/00000004-astro-meeting-spring/</url>
      
        <content type="html"><![CDATA[<p><strong>注意: この記事は過去の記事を移行したものです．</strong><br><br><br></p><p>こんにちは．<br>なんだかんだでもう3月になってしまい，時の経つ早さに震えています．先週はサークルの卒業旅行でハワイに行っていました(そのお話もまた別でしたいと思います)．<br>yahooブログもなんだかんだ今年末で終わってしまうそうで，始めたばっかりですが移行先も考えないといけませんね…．かなしいやら．</p><p>さて，タイトルでも書きましたが，3月14日～17日で法政大学にて開催される日本天文学会2019年春季年会で，自らの大学での研究に関することに関して発表します．自分は15日の銀河のセッションのどこかになります（探してみてね）．</p><p>予稿集のリンクはこちら↓<br><a href="http://www.asj.or.jp/nenkai/archive/2019a/session-R.html">http://www.asj.or.jp/nenkai/archive/2019a/session-R.html</a></p><p>当方情報工学を専攻しているので，分野的にも完全にアウェーなのですが，初めての（勉強会を除いた）対外発表なので<del>ボコボコにされないように</del>頑張りたいと思います．いろいろなフィードバック，コメントをいただけるのではと期待しています．</p><p>発表が終わったら，内容についても記事にしたいと思っています．<br>それでは．</p>]]></content>
      
      
      <categories>
          
          <category> その他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> その他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年の遠征を振り返る【後編】</title>
      <link href="/2019/01/02/00000003-review-outing-2018-2/"/>
      <url>/2019/01/02/00000003-review-outing-2018-2/</url>
      
        <content type="html"><![CDATA[<p><strong>注意: この記事は過去の記事を移行したものです．</strong><br><br><br></p><h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>あけましておめでとうございます．今年ものんびりよろしくおねがいします．<br>今回は，こちら「<a href="/2018/12/31/00000002-review-outing-2018/">2018年の遠征を振り返る【前編】</a>」<br>の続きを書いていきます．8月～の分です．</p><h3 id="8-8-10-乗鞍岳"><a href="#8-8-10-乗鞍岳" class="headerlink" title="8&#x2F;8-10 乗鞍岳"></a>8&#x2F;8-10 乗鞍岳</h3><p>ここ4年ほど毎年行っている乗鞍ですが，今年はいつも企画してくださる方に大型バスを借りてもらって行きました．正確な人数は忘れましたが，だいたい20人くらいです．初日の集合時は雨でいろいろと大変でしたが，道中はめちゃくちゃ楽（これまで鈍行か，レンタカーで行くのが通例でした）．<br>到着すると無事霧（知ってた）．初日夜の天気は晴れるかどうか微妙なところでしたが，結局晴れず，この日はひたすら寝ていた気がします．にしても，年々乗鞍は寒くなくなってる気がする…自分の感覚が麻痺してきたのかな？</p><p>二日目は朝から気持ちよく晴れたので，宿からほど近い富士見岳に登山．<br><img src="/images/00000003-review-outing-2018-2/01_fujimidake.jpg"></p><span id="more"></span><p>標高は高いように見えますが，登る高さはおそらく100mもないです．ただし足場がちょいとキツイ．<br><img src="/images/00000003-review-outing-2018-2/02_kengamine.jpg"></p><p>富士見岳から剣ヶ峰を見た時の様子．やっぱり高いな～．<br><img src="/images/00000003-review-outing-2018-2/03_norikura.jpg"></p><p>今は封鎖されているらしい？乗鞍の観測所です．こんなところに観測所持ってみたい…←<br>RICOHのTHETAで記念撮影をし，下山した後その辺をぶらぶら…<br>ふと草むらに動く物体を発見．よく見ると雷鳥です！この場所の他にも，結構出没してたみたいです．私はせいぜい135mmしかもっていないので，あまりクローズアップした写真は撮れませんが，仲間は望遠鏡や100-400でバシバシ撮っていました笑<br><img src="/images/00000003-review-outing-2018-2/04_raicho.jpg"></p><p>親子で向かい合っていてかわいいですね．<br>雷鳥撮影会をしていると，突然ものすごい音が．雪渓の一部が崩れて湖に落下した音でした（本当にびっくりした）．<br><img src="/images/00000003-review-outing-2018-2/05_norikura.jpg"></p><p>水面を見てもらえると，落下したときの波がわかると思います．</p><p>夕方になるとまた天気が怪しくなってきて，あかんかな～っと思っていたのですが，蓋を開けてみるとなんと雲海がはるレベル．近くの魔王岳からのぞむ夕日は最高でした．<br><img src="/images/00000003-review-outing-2018-2/06_norikura.jpg"></p><p>夜も普通に夜半過ぎまで晴れたので，一枚だけ星野を撮ったりして…<br><img src="/images/00000003-review-outing-2018-2/07_ic1396.jpg"></p><p>楽しいひと時でした．</p><h3 id="8-13-16-白布峠"><a href="#8-13-16-白布峠" class="headerlink" title="8&#x2F;13-16 白布峠"></a>8&#x2F;13-16 白布峠</h3><p>サークルでは毎年これくらいの時期になると，福島県に「強化合宿」なるものをしに行きます．といっても遊ぶだけなので，仲間や先輩後輩との絆以外には特に強化されるものはないのですが…(？)</p><p>晴れそうな晩には天体観測をするわけで，今年は二日目の晩に行いました．到着時は少し曇っていましたが，だんだんと晴れたので1時間くらいアンドロメダを撮影…．<br><img src="/images/00000003-review-outing-2018-2/08_m31.jpg"><br><img src="/images/00000003-review-outing-2018-2/09_shirabu.jpg"></p><p>集合写真も撮影しました．</p><p>他にも，同期とドライブしたり，いつも通りワイワイ自由気ままに過ごしました．</p><h3 id="9-16-天城高原"><a href="#9-16-天城高原" class="headerlink" title="9&#x2F;16 天城高原"></a>9&#x2F;16 天城高原</h3><p>たまには(？)しっかり撮影するかーということで天城高原へ．研究室の同期と後輩を連れて行きました．</p><p>現地には<a href="https://twitter.com/richie_astropho">りっちー氏</a>や<a href="https://twitter.com/ShonanAstroPhot">けーたろ氏</a>がいらっしゃり，不安定な天気の天城を楽しんでいました．夜半過ぎからはちゃんと晴れましたね．<br>M33とサドル付近～網状を撮影…<br><img src="/images/00000003-review-outing-2018-2/10_sadr.jpg"><br><img src="/images/00000003-review-outing-2018-2/11_m33.jpg"></p><p>いや派手に処理しすぎたな…まあいいや．</p><p>ジャコビニ・ツィナー彗星(21P)も撮影しました．<br><img src="/images/00000003-review-outing-2018-2/12_comet.jpg"></p><p>一枚撮りなので，クオリティーは度外視で．いやでもちゃんと尾が分かって感動しました．</p><p>帰りは約束の地(伊東マリンタウン)で一休みし，帰宅しました．</p><h3 id="10-7-富士山新五合目"><a href="#10-7-富士山新五合目" class="headerlink" title="10&#x2F;7 富士山新五合目"></a>10&#x2F;7 富士山新五合目</h3><p>大学は11月末頃に文化祭があるので，それに出す写真を撮影するためこの時期からカメラを持っている人間はケツに火が付き始めます．といっても，自分はもう引退済みなので関係ないのですが笑<br>足があったほうがいいよね，家の車出せる時は出せるし，ということを言い訳に，この「観測ラッシュ」に，OBである私はほぼ毎週参加しました．</p><p>一発目は五合目．もともと朝霧に行く予定だったのですが，この時期には野外ライブがやっているらしく断念．ただ結果的には正解でした．標高が低い朝霧などはほとんど曇って見えなかったそうです．<br><img src="/images/00000003-review-outing-2018-2/13_fuji.jpg"></p><p>オリオンをバックに．このときカメラの後ろ側で車がライトを偶然点灯させ，ちくしょーと思ったのですが撮影後プレビューを確認してみると，結構いい感じ．そのまま採用しました笑</p><p>もともと自分の撮影計画もなかったので，後輩ちゃんに135mmを貸して撮影．ここには載せませんが，APSCにつけるのアリだな…と思いました（まあ持ってないんですが）．帰りは少しガスっていて怖かったですが，無事花の湯に到着．一休みし，後輩を何人か連れて帰還しました．<br><img src="/images/00000003-review-outing-2018-2/14_fuji.jpg"></p><p>朝焼け．真ん中らへんの緑に近い空の色が本当に幻想的で好きです．</p><h3 id="10-20-本栖湖"><a href="#10-20-本栖湖" class="headerlink" title="10&#x2F;20 本栖湖"></a>10&#x2F;20 本栖湖</h3><p>この日はサークルの観測ラッシュとしてではなく，個人で，友人とサークルの後輩と本栖湖へ行きました．もともと1時か2時頃から晴れの予報だったのですが，1時間前倒しで晴れだしました．<a href="/2018/12/31/00000002-review-outing-2018/">前回の記事</a>で，夜にここ来たらきっと最高だなーと思ったわけですが，半年越しくらいに確認できました．結果最高でした．上弦くらいだったので，夜半すぎくらいまでは月明かりがありましたが，沈んでみると意外と暗い．ちょっとスペースが少ないですが，そこが解消できれば直焦もきっとできると思います．<br><img src="/images/00000003-review-outing-2018-2/15_motosu.jpg"></p><p>月明かりがある時に撮影．月がなければ，空はもっとニュートラルグレーになります．ただこれもいい．<br><img src="/images/00000003-review-outing-2018-2/16_motosu.jpg"></p><p>のぼりゆくおおいぬにクローズアップ．比較明合成ではなく，シャッター開けっぱで撮ってます．あまりやったことがなかったので．<br><img src="/images/00000003-review-outing-2018-2/17_motosu.jpg"></p><p>朝日．本当に神々しかった．．</p><h3 id="10-27-上毛高原キャンプグラウンド"><a href="#10-27-上毛高原キャンプグラウンド" class="headerlink" title="10&#x2F;27 上毛高原キャンプグラウンド"></a>10&#x2F;27 上毛高原キャンプグラウンド</h3><p>満月ということで，観測ではなくガッツリキャンプにステ振り．といっても，キャンプ用品は後輩がほとんど実家から持ってきてくれました(いや本当にありがとうございます)．鍋を3杯とカレーを1杯くらい食べました．ダッチオーブンを使った鍋も食べたのですが，これがめちゃくちゃうまい．にんじんをはじめてうまいと思うレベルでした(私は別ににんじんが嫌いなわけではないです)．<br><img src="/images/00000003-review-outing-2018-2/18_jomo.jpg"><br><img src="/images/00000003-review-outing-2018-2/19_jomo.jpg"><br><img src="/images/00000003-review-outing-2018-2/20_jomo.jpg"><br><img src="/images/00000003-review-outing-2018-2/21_jomo.jpg"></p><p>鍋とカレー，うまそうだろ？<br><img src="/images/00000003-review-outing-2018-2/22_jomo.jpg"></p><p>満月，明るい地上景．どういうの撮ろうかなあと考えた挙げ句こんな構図．なかなかキマってると思うんですが，どうですかね？<br>一応？しっかりと望遠鏡も出してます．</p><p>またキャンプしたいなあ．キャンプ用品買わないとなあ…()</p><h3 id="11-3-美ヶ原"><a href="#11-3-美ヶ原" class="headerlink" title="11&#x2F;3 美ヶ原"></a>11&#x2F;3 美ヶ原</h3><p>実は10&#x2F;13にも美ヶ原に行ったのですが，この日は天気的に完全敗北したので載せることがなにもありません（ただ帰りに笛吹市近辺で先輩方と観光したのが楽しかったなー）．<br>さて，ここまでで2戦2敗している美ヶ原ですが，この日もこの日で到着すると霧．またやっちまったか…と思っていたらなんと夜半過ぎから晴れ．結露と格闘しながら後輩やらをバシバシ撮影しました．<br>そうそう，この日にソフトフィルターが温度順応に耐えきれずぶっ壊れたので，今年は新しいのを買わないといけません…．それから，美ヶ原には「美しの塔」という知る人ぞ知る(？)塔があるのですが（めちゃくちゃ有名です），そこからの帰る途中でレンズキャップを落とし，その後一人で暗闇&amp;濃霧の中30分ほど捜索するというアクシデントもありました…結局見つかったので良かったのですが，暗闇&amp;霧の中孤独なのはめちゃくちゃ怖かったですね．<br><img src="/images/00000003-review-outing-2018-2/23_utsukushigahara.jpg"></p><p>引退した後輩たち．めっちゃ楽しそうやんけ（てかセンサーにゴミついてるし…）．<br><img src="/images/00000003-review-outing-2018-2/24_utsukushigahara.jpg"></p><p>石碑に乗っちゃうくらい，晴れの美ヶ原が嬉しかったです（乗っちゃダメとかだったら本当にすみません）．<br><img src="/images/00000003-review-outing-2018-2/25_utsukushigahara.jpg"></p><p>シエンタ．自分が1年の頃からサークルで愛用していたレンタカー車種ですが，この月をもってトヨタレンタカーでは取扱を終了．廃車になってしまうそうで．今までありがとうの気持ちを込めて，車名の由来である“Siete(スペイン語で7を意味する)”をひっかけた北斗七星をバックに．</p><p>この日はサークルの1個下の後輩の引退観測ということでもあり，３度目の正直で晴れて本当によかった…．</p><h3 id="11-10-戦場ヶ原"><a href="#11-10-戦場ヶ原" class="headerlink" title="11&#x2F;10 戦場ヶ原"></a>11&#x2F;10 戦場ヶ原</h3><p>サークルの引退観測も終了したので，少し休みますかーと思いきや，また観測に行くことになりました笑<br>同期に声をかけてもらい，同期のお仲間と後輩友人らと戦場ヶ原へ．よく晴れていましたが，戦場ヶ原ってこんな寒かったっけ…何もすることがなければひたすら車にこもっていました．<br>この日は後輩の面倒を見ていたので，私は一切写真を撮っていません！まあたまにはこんな日もいいよね．<br><img src="/images/00000003-review-outing-2018-2/26_senjo.jpg"></p><p>同期のカメラで撮影してもらいました．改造機なのでバーナードループもうっすら写ってます．<br>この日は<a href="https://nakacyg.com/">nakaki氏</a>もいらしており，50mmでエリダヌス座のスーパーバブルを狙っていました．自分も135mmでいずれ撮ってみたい対象です（ただし映らなかったときの敗北が怖い…）．</p><p>とまあ，11月末の文化祭も終わり，12月は卒業研究がヤバイ，ということでこれを最後に18年は観測には行っておりません．<br>さて，結構いろんなとこ行ったなーと思ったので，マップに行った場所をプロットしてみました．<br><img src="/images/00000003-review-outing-2018-2/27_map.jpg"></p><p>夜に天体観測をした場所（ただし自宅近辺を除く）になります．こうしてみると案外少ないなーという印象ですが，美ヶ原には3回行ってたりするので，まあ平均月イチぐらいで行けてるかなあという感じですね．</p><h3 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h3><p>2018年も色んな所へ行き，その場所それぞれの良さを再確認しました．機材にはほとんどお金をかけられていませんが，引き続きカメラレンズでの撮影も楽しんでいきたいところです．あとR200SSの眼視システムも整えんとな～．ある事情から，これは3月末までの可及的速やかに達成すべき目標とします．その他の今年の抱負については長くなってしまうのでまたいつか．</p><p>それでは本年もどうぞよろしくお願いいたします．m(_ _)m</p>]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018年の遠征を振り返る【前編】</title>
      <link href="/2018/12/31/00000002-review-outing-2018/"/>
      <url>/2018/12/31/00000002-review-outing-2018/</url>
      
        <content type="html"><![CDATA[<p><strong>注意: この記事は過去の記事を移行したものです．</strong><br><br><br></p><h3 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h3><p>さて，先日からブログを初めたはいいものの，まだまだ自分の天文へののめり込み具合は「浅い」わけで，書くネタが思い浮かばず困っています笑<br>年末ということで，とりあえず今年の遠征を前後編に分けて振り返ってみようかなあと思います．とりあえず7月分までです！</p><h3 id="1-31-皆既月食"><a href="#1-31-皆既月食" class="headerlink" title="1&#x2F;31 皆既月食"></a>1&#x2F;31 皆既月食</h3><p>今年は初っ端から，結構大きな天文イベントがあり，1&#x2F;31には皆既月食がありましたね！この日は私の誕生日であり，坂本真綾の「CLEAR」発売日だった（※私は坂本真綾の大ファンです）ことも印象的です．多くの方が撮影されていましたが，私もこの日は（家の近所ではありますが）撮影しました．食の後半は曇ってしまって撤収しましたが，前半～皆既時刻まではよく晴れていてよかったです．1月なのもあって，軽い防寒だと標高が低くても3時間も外に出ていると凍えるぐらい寒い…今年はあまりガチ防寒が必要な遠征地に行ってないので，来年は行きたいなあ…</p><p><img src="/images/00000002-review-outing-2018/01_eclipse.jpg"></p><span id="more"></span><p>曇るまでの皆既月食をひたすら露光．事前にシミュレーションしていないので最広角(24mm)で撮っており，解像度は高くないですが欠けていく様子がわかってとてもおもしろいです．</p><h3 id="3-24-あいあい岬"><a href="#3-24-あいあい岬" class="headerlink" title="3&#x2F;24 あいあい岬"></a>3&#x2F;24 あいあい岬</h3><p>静岡県の南端，あいあいです．今年はモニュメントや階段に電飾がなされる！？ということで天文界隈に大きな衝撃が走った地でもありました（今はどうなってるのかな？）．天気的に行けそうなのがここ！ということで，社会人の方やサークルの後輩とともに行きました．ここから眺める夕日は最高！70-200を使って高台からモニュメント側をパシャリ．<br><img src="/images/00000002-review-outing-2018/02_aiai.jpg"></p><p>夕日にシルエットがとても映えますね．<br>夜は海風が激しく，15～20m&#x2F;sくらいの風が常時吹きっぱですが，意外とポタ赤でも撮影ができて感動．<br><img src="/images/00000002-review-outing-2018/03_aiai.jpg"></p><p>35mmでの撮影です．右側の星像がイマイチなのがちょっと残念ですが，さすがはあいあい．南が映るわ映るわ．<br>もう一枚．<br><img src="/images/00000002-review-outing-2018/04_aiai.jpg"></p><p>70mmでのモザイクに初挑戦！(爆風の中やるものではなかった笑)さすがはモザイク．当たり前ではありますが高画素で端まで綺麗な星像になる！<br>風はめちゃくちゃ恐怖ですが，来年も行きたいですね．</p><h3 id="4-22-朝霧高原"><a href="#4-22-朝霧高原" class="headerlink" title="4&#x2F;22 朝霧高原"></a>4&#x2F;22 朝霧高原</h3><p>人生初の朝霧高原！といっても，この日は天体観測がメインではなく，アニメ「ゆるキャン」のスタンプラリーが目的．学部の友人とともに，朝霧～本栖湖～南部町を友人の車の代車（マークX）で移動．夜は朝霧アリーナで過ごしたという次第です．このスタンプラリー，「ゆるくない」と謳っているだけあってめちゃくちゃ大変．全部集め終わるまでに7時間ほど要しました…．結局，スタンプを集めるだけ集めて，集めると応募できる景品？に応募するのをすっかり忘れていたのですが…．富士山をぐるっとまわったので到着はかなり遅い時間になりましたが，夜はよく晴れていて，観測中の方にミューロンで惑星を見せていただいたりしました．<br><img src="/images/00000002-review-outing-2018/05_asagiri.jpg"></p><p>朝方に撮影した集合写真．過酷なスタンプ集めであった…．<br><img src="/images/00000002-review-outing-2018/06_motosu.jpg"></p><p>本栖湖からの千円札富士山！夜に来たら最高だと確信したのはこの時であった…．</p><h3 id="5-11-清里"><a href="#5-11-清里" class="headerlink" title="5&#x2F;11 清里"></a>5&#x2F;11 清里</h3><p>上記の朝霧に行くタイミングで，知り合いの星屑さんからR200SSを超破格で買い取り（本当にありがとうございました），その使用感の検証で，カメラアダプターや諸々を揃え，清里に行きました．結局，この時からR200SS使えてない…（理由は後述）．同期二人と，後輩一人の計四人です．夜はしっかりと晴れ，シーイングもなかなかの空．ただ，買い取ったR200SSは金属でできており，自分のEM-11だと追尾がとてもシビア…(たぶん搭載重量普通にアウトだと思う)．光軸もけっこうずれており，flickrなどに載せられるレベルのは撮れませんでした．デカイ，重い，まともに乗らないということで，この晩から撮影には使ってないのですが，せっかく人様から買い取っておいて（しかも格安で）使わないのはちょっとなー，ということで，眼視用として使おう使おうとは思っています．結局それも買わずに年末を迎えてしまいましたが．．来年はもっと使いたいなあ…．<br><img src="/images/00000002-review-outing-2018/07_m13.jpg"></p><p>ちなみにこんなのが撮れましたよ（M13）．星の色が綺麗に出るのは反射のいいところですね～．（左下のちっちゃい銀河好き）</p><h3 id="5-22-岡山天体物理観測所"><a href="#5-22-岡山天体物理観測所" class="headerlink" title="5&#x2F;22 岡山天体物理観測所"></a>5&#x2F;22 岡山天体物理観測所</h3><p>観測ではなく，研究関連の用事で，岡山天体物理観測所でミーティング兼，当時設計途中のせいめい望遠鏡を見学しました．日帰りでしたが，実際の天文学者と多くのことを議論できて，とても良かったと思います．内部の写真は載せたら大変なことになる可能性があるので載せません．文章だけでお許しください．<br><img src="/images/00000002-review-outing-2018/08_okayama.jpg"></p><p>岡山天体物理観測所です．岡山初上陸．（追記:よく考えたら通過したことはあったので，初上陸ではありませんでした）<br><img src="/images/00000002-review-outing-2018/09_seimei.jpg"></p><p>研究の関係で見学したせいめい望遠鏡です．もう完成していますが，当時はまだまだ建造途中といった感じでした．</p><h3 id="7-14-美ヶ原"><a href="#7-14-美ヶ原" class="headerlink" title="7&#x2F;14 美ヶ原"></a>7&#x2F;14 美ヶ原</h3><p>研究室でお世話になっている先輩とその家族の方々と一緒に，美ヶ原へ行きました．結果はどん曇り，いやー晴れると思ったんですが，今年の美ヶ原は本当に勝率が低かった（後編でも触れます）．朝方も長い間ずっと霧でしたが，夜が明けると晴れて結構きれいでした．美ヶ原は本気だすと乗鞍岳とはりあうレベルになると思っているので，来年も行きたいです．<br><img src="/images/00000002-review-outing-2018/10_utsukushigahara.jpg"></p><p>朝までずっとこんな感じ！まあこれもこれで幻想的ですよね．<br><img src="/images/00000002-review-outing-2018/11_utsukushigahara.jpg"></p><p>しばらくしたら青空も見えました．<br><br><br></p><p>注意:以下コメントになります．</p><p>りゅう:</p><blockquote><p>どうもです。昼でも夜でも、本栖湖の富士山全景を観れなかった者としては<br>風景写真のような景色が観れたのは羨ましいなと思うぐらいイイ写真ですね。</p></blockquote><br>astrodabo:>  りゅうさんコメントどうもありがとうございます！曇っていて見えないことも多いそうで、遠くからお越しになったりする場合はなかなか難しいところではありますね。次にお越しになるときには全景見えることを祈っております。]]></content>
      
      
      <categories>
          
          <category> 遠征記 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 遠征記 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>天体写真とその処理過程について【前編】</title>
      <link href="/2018/12/28/00000001-astrophoto-and-processing/"/>
      <url>/2018/12/28/00000001-astrophoto-and-processing/</url>
      
        <content type="html"><![CDATA[<p><strong>注意: この記事は過去の記事を移行したものです．</strong><br><br><br></p><h2 id="あいさつ"><a href="#あいさつ" class="headerlink" title="あいさつ"></a>あいさつ</h2><p>　こんにちは．<br>　今年前半は遊び呆けて，後半は研究と天体観測に行ったりしていたらもう年末ということで，2018年もあっという間に過ぎ去ってしまいますね．<br>さて，今年ラストということで，自分の中で1年間溜め込んでいたことを，軽く書いておこうと思います．<br>　9月と12月にはそれぞれ関東天文部勉強会や天体写真勉強会なるものがあり，そちらで発表したことです．これらの勉強会は非常に有意義なもので，他の人がなにを考えながら天体写真を撮影し，現像しているのかを垣間見ることができて良かったと思います．それと同様に，私が一年間何を考えていたのかを書き留めておくことは，悪いことではないと考えるのです．</p><span id="more"></span><h2 id="大学でのことについて"><a href="#大学でのことについて" class="headerlink" title="大学でのことについて"></a>大学でのことについて</h2><p>　本題に入る前にですが，前回の記事で私が大学で何を学んでいるのかを書き忘れてしまったのでそちらの方に触れておこうと思います．<br>私は大学では所謂コンピュータ可視化（Computer Visualization）やコンピュータグラフィックス（Computer Graphics）の諸技術について，そしてそれらを工学的にどのように活かすのかということを学んでいます．メインは前者の可視化の方です．可視化というのは，簡単に言えば数値的なデータをいかに見やすく提示するかということで，天体写真を撮っている方なら，<a href="https://www.windy.com/">Windy.com</a>や<a href="http://weather-gpv.info/">GPV</a>みたいなものを想像していただければわかりやすいかなと思います．あのようなツールでは，気圧等の観測データの数値をもとに風が流線で表示されたり，気温をもとにヒートマップで色がついていたりしますよね．ああいうものが可視化です．<br>その中で，「これは天体写真にも活かせる」というものを今年一年かけて気づいたので，その話を2回に分けてしたいと思います．</p><h2 id="本題"><a href="#本題" class="headerlink" title="本題"></a>本題</h2><p>　さて，本題に入りましょう．<br>少し前，Twitterで以下のようなアンケートをとりました．</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/astr0dab0/status/1042800668400967680"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>　正直，これはかなりセンシティブな内容で，Twitterではいろいろ言われました．そもそも，Twitterのアンケートに正当性なんて無いだろと言われたらそのとおりですし，自分でもそう思います．ここで自分が確かめたかったのは，「天体写真には芸術と科学の両方の性質がある」ということだけです．勘違いしていただきたくないのは，天体写真は芸術か科学かでしかないということを言いたかったわけではないということです．予想ではもっと芸術に寄ると思っていたのですが，意外と4割も科学であると考えている人がいらっしゃって，驚きました．</p><h2 id="データ起源の観点で天体写真を眺める"><a href="#データ起源の観点で天体写真を眺める" class="headerlink" title="データ起源の観点で天体写真を眺める"></a>データ起源の観点で天体写真を眺める</h2><p>　ところで，情報工学の分野では<strong>データ起源</strong>（Data Provenance，出自と言ったりもします）という考え方があります．そのデータがいつ（When），どこで（Where），誰によって（Who），どのように（How），なぜ（Why）生成されたのか，ということです．　<br>もし，天体写真が芸術写真であるならば，その芸術作品たるものに対して，どのようなものが起源となるでしょうか？アート作品として自分の写真を紹介する場合を考えてみてください．当然，いつどこで誰が撮影したか，ということも重要ですが，その写真から読み取れることや，背景にあるコンテクストなどを絡めて，なぜそのような写真としたのか，ということが，おそらく起源のメイン要素として挙げられるんじゃないかなーと思います．<br>　では，天体写真が科学写真であるならば？私は，もし天体写真が科学写真であるなら，写真撮影という行為は，大学での実験みたいなものに相当するんじゃないかなー，などと考えます．そして，その成果物としての「レポート」が，作品写真だったりするわけです．データの処理過程をいろいろ考えて，自分の頭の中で仮定している理想の写真に近づける．こういう編集をしたらここがダメだったとか，じゃあこういう編集に変えてみようとか，そういう一連のプロセスは，まさに研究みたいな感じで，天体写真はその代表となるイメージだと思うわけです(だから編集が嫌いな人は嫌いなのかもしれないですね笑)．<br>だとするとですよ？みなさん，学生時代に，<strong>「レポート書くときに，最低限ハズしてはいけないこと」<strong>ってなんだったでしょうか？他人の論文剽窃しちゃダメとかまあそういう論外なのはさておき，これだけは注意してねと指導されることはなんだったでしょうか？<br>そうです！<font color="Red"></strong>「誰が見ても，そこに書かれていることだけでプロセスが実行できなければならない」</strong></font>ということ，すなわち，<font color="Red"><strong>再現性</strong></font>です．天体写真が科学写真であるならば，天体写真におけるデータ起源は，その再現性に関わるありとあらゆるものを必要とするのです．そこには撮影機材や設定，そして今回取り上げる<font color="Red"><strong>「編集過程」</strong></font>が含まれています（つまり，今回は天体写真は科学写真であるという立場で記事を書いています）．</p><h2 id="現実は……"><a href="#現実は……" class="headerlink" title="現実は……"></a>現実は……</h2><p>　では現実に目を向けてみましょう．撮影日時や撮影地，設定，機材を書く人はあふれています．ですが，そこに**「編集過程」を厳密に書く人**は見たことがありますか？私はありません．なんなら，私も書きません．<br>どれくらいの人が編集過程を管理しているのかということについても，私はTwitterでアンケートをとりました．</p><div class="twitter-wrapper"><blockquote class="twitter-tweet"><a href="https://twitter.com/astr0dab0/status/1067407032532185090"></a></blockquote></div><script async defer src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>いくらなんでもちゃんとやってる人，少なすぎませんか？<br>　今月，天体写真勉強会というものに参加してきました．これは天体写真に関する勉強会で，何人かの人が，写真の「編集過程」についてお話してくれました．このような勉強会が存在するということは，「編集過程」はそれだけ大事だということです．誰もが身につけたいスキルであるからこそ，このような勉強会が開かれて，聞きに来てくれる人がいるわけですよ．「編集過程」が大事だということは皆さん理解されてますよね？じゃあなんで，それをきちんと管理しないんですか？なぜ，日付と機材と設定と，こういうソフトで処理しましたという文言だけで終わりということがありえるのでしょうか？</p><h2 id="なぜやらないのか？"><a href="#なぜやらないのか？" class="headerlink" title="なぜやらないのか？"></a>なぜやらないのか？</h2><p>　一つは，その人が「科学写真」だとは考えていないからです．芸術であるなら，編集過程こそが命であって，それを公開しないことは当然です．ですが，公開しないことと管理しないことは別です．以前，某変態モザイクのお方が，某雑誌で，「自分の処理過程を管理したらとても編集がしやすくなった（うろ覚えなので原文ママではないです）」と書かれていたのが印象的でしたが，仮に芸術作品と捉えている人でも，自分の中だけで編集過程を管理しておくことは，自分の編集技術向上において効果があるのではないかと考えます．<br>もう一つは，（私ならこう答えます．）「めんどくさいから」です．おそらく多くの人がこう答えるのではないでしょうか．だって考えてみてください．ステライメージのデジタル現像一つとったって，ありとあらゆるパラメータが存在しますよね．それをいちいちメモったりとかできますか？私にはできません．仮にメモったとしても，後で役立つかはわかりませんし，そもそも完成してから後で気が変わって，その部分の処理まで戻るのなんて考えられない．<br>私はさきほど，「なんで管理しないんですか？」と問いました．管理しないのは，みなさんユーザのせいではないからなのです．ソフトウェアやデータ記録フォーマットが，このような考え方をそもそも想定して設計されていないから，とりわけ編集が複雑な天体写真の世界で管理できないのは当然なのです．では我々は諦めて，いつまでもある人の編集過程が全くわからない世界で生きていくべきでしょうか？いいえ，問題を発見したら，どうすれば解決できるのかを考えるのがこういった趣味の醍醐味です．</p><h2 id="解決しようと思う人はいる"><a href="#解決しようと思う人はいる" class="headerlink" title="解決しようと思う人はいる"></a>解決しようと思う人はいる</h2><p>　これを解決しようという動きはあります．ステライメージを見てみると，7から，「ワークフロー」の機能が追加されています．自分がかけた処理の記録を見たり，順番を変えてその違いを確認したりすることができます．ですが，この機能はあくまで「1ライン」上でしか動きません．順番を変えられると書かれているということは，つまりはそういうことで，処理過程は一本の直線とみなされています．天体写真の編集は一本の直線でしょうか？たとえばRGBに分解して，Rにだけ処理をかけて，もとの画像と合成するなどという処理があった場合，それを一本の直線で記述することは適切でしょうか？Hαのフレームを別に用意して，あるチャンネルと合成するという処理を，一本の直線でふつう記述しますか？しませんよね？<br>したがって，私は，ステライメージのワークフロー機能はかなり評価できるとは思いますが，完全ではないと考えています．</p><p>　次回，どうすれば解決できるのかという私なりの考えを示します．</p><p>なにか，コメントやご意見のあるかたはここでもTwitterでもいいので，お願いします．震えて待ちます．</p><p>追記:後半は<a href="/2019/03/15/00000005-astrophoto-and-processing-2/">こちら</a>になります</p>]]></content>
      
      
      <categories>
          
          <category> 画像処理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 写真 </tag>
            
            <tag> 天体写真 </tag>
            
            <tag> 画像処理 </tag>
            
            <tag> SI8 </tag>
            
            <tag> Adobe Photoshop </tag>
            
            <tag> Adobe Lightroom </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
